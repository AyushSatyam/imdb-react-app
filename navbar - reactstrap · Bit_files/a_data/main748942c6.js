(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{1031:function(e,t,n){n(280),e.exports=n(1020)},199:function(e,t,n){"use strict";var a=n(142),o=n(26),i=n(27),r=n(37),s=n(36),c=n(38),l=n(104),u=n(7),d=n.n(u),f=n(42),p=n.n(f),h=n(595),g=n.n(h),m=n(596),v=n.n(m),b=d.a.createElement(g.a,{color:"#ffffff",size:18,style:{verticalAlign:"middle"}}),k=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(n=Object(r.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(i)))).state={isLoading:!1},n.handleClick=function(e){var t=n.props.onClick;t&&(n.setState({isLoading:!0}),Promise.resolve(t.call(Object(l.a)(Object(l.a)(n)),e)).catch((function(){})).then((function(){n.setState({isLoading:!1})})))},n}return Object(c.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.onClick,e.className),n=e.children,o=e.loader,i=e.loading,r=Object(a.a)(e,["onClick","className","children","loader","loading"]),s=this.state.isLoading,c=void 0!==i&&i||s?o:n;return d.a.createElement("button",Object.assign({},r,{onClick:this.handleClick,className:p()(t,v.a.vanillaButton)}),c)}}]),t}(u.Component);k.defaultProps={loader:b};n(530);n.d(t,"a",(function(){return k}))},245:function(e,t,n){"use strict";var a=n(68),o=n(7),i=n.n(o),r=n(42),s=n.n(r),c=n(1033),l=Object(c.a)("FILE_EXPLORER",{beginDrag:function(e){return{id:e.node.id}}},(function(e,t){return{dragSource:e.dragSource(),isDragging:t.isDragging()}}))((function(e){var t=e.dragSource,n=e.isDragging,o=e.children,r=e.className,c=void 0===r?"drag-handle":r,l=e.classWhenDragging,u=void 0===l?"dragging-handle":l,d=o;return t(i.a.createElement("div",{className:s()(c,Object(a.a)({},u,n))},d))}));var u=n(26),d=n(27),f=n(37),p=n(36),h=n(38),g=n(1032),m=function(e){function t(){return Object(u.a)(this,t),Object(f.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=!1===e.isDropHover&&!0===t.isDropHover,a=!0===e.isDropHover&&!1===t.isDropHover;n&&t.onDropHoverIn&&t.onDropHoverIn(),a&&t.onDropHoverOut&&t.onDropHoverOut()}},{key:"render",value:function(){var e=this.props,t=e.dropTarget,n=e.isDropHover,o=e.children,r=e.className,c=void 0===r?"drag-handle":r,l=e.classWhenDragged,u=void 0===l?"dragging-handle":l,d=o;return t(i.a.createElement("div",{className:s()(c,Object(a.a)({},u,n))},d))}}]),t}(o.Component),v=Object(g.a)("FILE_EXPLORER",{drop:function(e,t){t.didDrop()||(0,e.onDrop)(t.getItem().id)},canDrop:function(e,t){return t.getItem().id!==e.node.id}},(function(e,t){return{dropTarget:e.dropTarget(),isDropHover:t.canDrop()&&t.isOver({shallow:!0})}}))(m);n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return v}))},257:function(e,t,n){e.exports={capsuleContainer:"capsule-ctrl_capsuleContainer__MzBxg",hidden:"capsule-ctrl_hidden__3Dmn6",smallLoader:"capsule-ctrl_smallLoader__2tgW7",logo:"capsule-ctrl_logo__1_-aZ"}},332:function(e,t,n){"use strict";var a=n(26),o=n(27),i=n(37),r=n(36),s=n(38),c=n(7),l=n.n(c),u=n(42),d=n.n(u),f=n(440),p=n.n(f),h=n(441),g=n.n(h),m=n(336);function v(e){var t=e.Template,n=void 0===t?m.a:t;return l.a.createElement(p.a,{isOpen:e.isOpen,onRequestClose:e.onCancel,className:d()(g.a.confirmationModal,e.className),overlayClassName:d()(g.a.confirmationBackground,e.overlayClassName)},l.a.createElement(n,e))}p.a.setAppElement(document.getElementById("root"));n(532);var b=n(629),k=n(345),C=n.n(k),_=function(e){function t(){var e,n;Object(a.a)(this,t);for(var o=arguments.length,s=new Array(o),c=0;c<o;c++)s[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(s)))).state={isClosing:!1},n.handleCancel=function(e){n.setState({isClosing:!0});var t=n.props.onCancel;t&&setTimeout((function(){return t(e)}),300)},n.handleConfirm=function(e){n.setState({isClosing:!0});var t=n.props.onConfirm;t&&setTimeout((function(){return t(e)}),300)},n}return Object(s.a)(t,e),Object(o.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.props.isOpen!==e.isOpen&&this.setState({isClosing:!e.isOpen})}},{key:"render",value:function(){var e=this.props.className,t=this.state.isClosing;return l.a.createElement(v,Object.assign({},this.props,{className:d()(C.a.genConfirmationModal,t&&C.a.isClosing,e),overlayClassName:C.a.genConfirmationBackdrop,Template:b.a,onCancel:this.handleCancel,onConfirm:this.handleConfirm}))}}]),t}(c.Component);n.d(t,"a",(function(){return _}))},343:function(e,t,n){e.exports={background:"big-loader_background__1k0fp",loader:"big-loader_loader__3zQPB",bigLoaderText:"big-loader_bigLoaderText__3fSMN"}},345:function(e,t,n){e.exports={genConfirmationModal:"gen-confirmation-modal_genConfirmationModal__1rcke",genConfirmationBackdrop:"gen-confirmation-modal_genConfirmationBackdrop__1N1vC",isClosing:"gen-confirmation-modal_isClosing__2uyVr"}},437:function(e,t,n){e.exports={connectionStatus:"connection-status_connectionStatus__1DlA7",fadeIn:"connection-status_fadeIn__3aOlP",connecting:"connection-status_connecting__3rhzf",idle:"connection-status_idle__1Z00Q",reconnecting:"connection-status_reconnecting__1eqAY",disconnected:"connection-status_disconnected__3aq2Z",connected:"connection-status_connected__211Q4",fadeInOut:"connection-status_fadeInOut__1BMuk"}},438:function(e,t,n){e.exports={brickLoaderContainer:"brick-loader_brickLoaderContainer__3eGYa",loaderVisible:"brick-loader_loaderVisible__2rURR"}},441:function(e,t,n){e.exports={confirmationModal:"confirmation-modal_confirmationModal__260m_",confirmationBackground:"confirmation-modal_confirmationBackground__1Zgsk"}},443:function(e,t,n){e.exports={genesisCta:"genesis-button_genesisCta__3yrq6",genesisButton:"genesis-button_genesisButton__ZGPx8"}},452:function(e,t,n){"use strict";var a=n(199),o=n(7),i=n.n(o),r=n(442),s=n(42),c=n.n(s),l=n(443),u=n.n(l);n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return p}));var d,f=(d=a.a,function(e){return i.a.createElement(d,Object.assign({},e,{className:c()(r.a,u.a.genesisCta,e.className)}))}),p=function(e){return function(t){return i.a.createElement(e,Object.assign({},t,{className:c()(r.a,u.a.genesisButton,t.className)}))}}(a.a)},530:function(e,t){},532:function(e,t){},582:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(7),o=n.n(a),i=n(616),r=n(610),s=n(617),c=n(422),l=n.n(c);function u(){var e="undefined"===typeof window?{}:"undefined"===typeof window.location?{}:"string"!==typeof window.location.search?{}:l.a.parse(window.location.search),t=e.standalone,n=void 0!==t&&t,a=e.bitId;return o.a.createElement(r.a,null,n&&o.a.createElement(s.a,{bitId:a}),!n&&o.a.createElement(i.a,null))}},596:function(e,t,n){e.exports={vanillaButton:"button_vanillaButton__27753"}},605:function(e,t,n){e.exports={textButton:"text-button_textButton__16JGC"}},613:function(e,t,n){"use strict";var a=n(89),o=n(61),i=n.n(o),r=n(94),s=n(26),c=n(27),l=n(37),u=n(36),d=n(38),f=n(104),p=n(7),h=n.n(p),g=n(149),m=n.n(g),v=n(584),b=n(251),k=n(585),C=n.n(k),_=n(57),y=n(216),O=n(215),j=n(250),w=n(437),L=n.n(w),S=new Map([[_.Lifecycle.Connected,"Connected"],[_.Lifecycle.Reconnecting,"Connecting..."],[_.Lifecycle.Connecting,"Connecting..."],[_.Lifecycle.Disconnected,"Disconnected"],[_.Lifecycle.Idle,"Idle"]]);function E(e){var t=e.status;return t&&S.has(t)?h.a.createElement("div",{id:L.a.connectionStatus,className:L.a[t.toString()]},S.get(t)):null}var I=n(68),W=n(323),P=n.n(W),D=n(202),N=n(42),x=n.n(N),T=n(438),B=n.n(T),F=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.visible;return h.a.createElement("div",{className:x()(B.a.brickLoaderContainer,t,Object(I.a)({},B.a.loaderVisible,n))},h.a.createElement(P.a,{size:17},h.a.createElement(D.Platform,{size:17,background:"#8787F2"}),h.a.createElement(D.Platform,{size:17,background:"#8ACFFF"}),h.a.createElement(D.Platform,{size:17,background:"#fbd280"})))}}]),t}(p.Component),H=n(625),M=n(343),U=n.n(M);function z(e){var t=e.topFace,n=e.midFace;return h.a.createElement("div",{className:U.a.background},h.a.createElement("div",{className:U.a.loader},h.a.createElement(P.a,{size:64,className:"margin-center"},h.a.createElement(D.Platform,{size:64,background:"#fb507b"}),h.a.createElement(D.Platform,{size:64,background:"#25e1a3"},n),h.a.createElement(D.Platform,{size:64,background:"#8acfff"},t)),h.a.createElement("div",{className:U.a.bigLoaderText},h.a.createElement(R,null))))}var A,R=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={text:"Loading playground..."},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){if(y.a.feature_bonusLoaderTexts){var e=Math.floor(Math.random()*V.length),t=V[e];this.setState({text:t})}}},{key:"render",value:function(){return this.state.text}}]),t}(p.PureComponent),V=["molding Capsule...","injecting nano-bits...","formulating bits...","clapping for blog posts...","statring Bit Container...","injecting Component into Capsule...","injecting Capsule into Container...","formulating formulas","encapsulating code capsulations...","summoning code platform...","hiring Indians to write this demo...","hiring Bulgarians to write this demo...","hiring speed boats...","fueling speed boats...","hiring Americans to write this demo...","fetching moon rocks...","training monkeys to render components...","spicing sauce...","making contract with Sumalian pirates... for a pirate themed party","throwing ball...","fetching ball...","Hiring Bill Murray","applying special permission from the Office of Silly Walks","remember: buy extra batteries for your flashlight","take a deep breath","You're a super-hot ninja machine!","baking code...","calculating rotational vectors..","did you know you can use import statements?","elevating platforms","requesting fresh Capsule..","nothing beats a fresh Capsule","I love the smell of Capsule in the morning","did you know cats are made of catponents?","feeding dogs...","applying mayonnaise...","generating T.U.K.O projections..","going live in Tokyo...","cut off one head, and two more shall take its place","I did everything he did, but backwards and in high heels!","in bit heaven, there's a fresh serving of hummus every day","in bit heaven, the coliforms sit at the Highest of Heavens"],q=n(587),K=n.n(q),Z=/\/sockjs-node(\/)?$/;!function(e){e.Invalid="invalid",e.Hash="hash",e.Ok="ok",e.StillOk="still-ok",e.Errors="errors",e.Warnings="warnings",e.ContentChanged="content-changed",e.Hot="hot",e.LogLevel="log-level"}(A||(A={}));var J=function(){function e(t){var n=this;Object(s.a)(this,e),this.handleClose=function(e){n.onProblem&&n.onProblem()},this.handleMessage=function(e){if(e&&e.data){var t;console.debug("[HMR]",e.data);try{t=JSON.parse(e.data)}catch(a){return}n.handleMessageCases(t)}},this.handleMessageCases=function(e){var t=e.type,a=e.data;switch(t){case A.Invalid:return void(n.onStartPacking&&n.onStartPacking());case A.Hash:return n.currentHash=a,void(n.onDidPack&&n.onDidPack());case A.Ok:case A.Errors:case A.Warnings:return;case A.StillOk:case A.ContentChanged:case A.Hot:case A.LogLevel:return}};var a=Z.test(t)?t:t+"/sockjs-node";this._socket=new K.a(a),this._socket.onmessage=this.handleMessage,this._socket.onclose=this.handleClose}return Object(c.a)(e,[{key:"destroy",value:function(){this._socket.close()}}]),e}(),G=function(){function e(){var t=this,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];Object(s.a)(this,e),this._taskPromises=new Set,this._isWorking=!1,this.handleWebpackRepacking=function(e){t.handleTaskAdded(e)},this.handleInstallFiles=function(e){t.handleTaskAdded(e)},this.handleExampleChanges=function(){t.updateWorkingLoader(!0),t.updateSetupLoader(!0)},this.reset=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t._taskPromises=new Set,t.updateWorkingLoader(e),t.updateSetupLoader(e)},this.delayedUpdateLoader=m()(this.updateSetupLoader.bind(this),1e3,{trailing:!0}),this._state=n}return Object(c.a)(e,[{key:"handleTaskAdded",value:function(e){var t=this;this._taskPromises.add(e),e.then((function(){return t.handleTaskComplete(e)})),this.reevaluate()}},{key:"handleTaskComplete",value:function(e){this._taskPromises.has(e)&&(this._taskPromises.delete(e),this.reevaluate())}},{key:"reevaluate",value:function(){var e=0<this._taskPromises.size;this.updateWorkingLoader(e),!0===e?this.delayedUpdateLoader.cancel():this.delayedUpdateLoader(!1)}},{key:"updateSetupLoader",value:function(e){var t=this.onSetupChange,n=this._state;this.delayedUpdateLoader.cancel(),n!==e&&(this._state=e,t&&t(e))}},{key:"updateWorkingLoader",value:function(e){var t=this.onWorkingChange;e!==this._isWorking&&(this._isWorking=e,t&&t(e))}}]),e}(),Q=n(257),Y=n.n(Q),X=n(624),$=n(623),ee=new Set([void 0,_.Lifecycle.Idle,_.Lifecycle.Disconnected]),te={uri:y.a.orchestratorUrl},ne=C.a.get(y.a.cookieName),ae=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={isWorking:!1,isCapsuleWorking:!1,isSettingUp:!0,status:void 0,iframeKey:0},n.capsuleWriteLock=!1,n.handleIframeLoaded=function(e){console.debug("...iframe loaded"),n.resolveIframePromise&&n.resolveIframePromise()},n._getCapsuleInstance=function(e,t){var a=O.a.get(e);if(!a)throw new Error('no such capsule type as "'.concat(e,'"'));return n.setState({capsuleDef:a}),(0,a.factory)({socketOptions:te,cookie:ne,capsuleType:e,bitId:t}).then((function(e){return n.capsule=e,e}))},n.getCapsuleInstance=Object(b.a)(n._getCapsuleInstance),n.startCapsule=function(){var e=n.props,t=e.onFsChange,a=e.onCapsuleChange,o=n.state.capsuleDef,i=Object(f.a)(Object(f.a)(n)).capsule;if(!i)throw new Error("capsule should be initiated before starting connection");return n.prevWritten={},new Promise((function(e,r){i.on(_.Lifecycle.Connected,(function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=r.url;n.resolveIframePromise=e;var c=new $.a({observers:n._loaderCtrl.handleInstallFiles}),l=i.fs,u=Object(X.a)(l,c.middleware);if(t&&t(u),a&&a(n.capsule),!s)return e();n.setState({url:s}),o&&o.hmrEnabled&&n.connectToHmr(s)})),Object.values(_.Lifecycle).map((function(e){return e})).forEach((function(e){return i.on(e,(function(){return n.handleConnectionChanged(e)}))})),i.start()}))},n.connectToHmr=function(e){n.hmrSocket=new J(e);var t=function(){};n.hmrSocket.onStartPacking=function(){n.setState({isCapsuleWorking:!0}),t(),n._loaderCtrl.handleWebpackRepacking(new Promise((function(e){return t=e})))},n.hmrSocket.onDidPack=function(){n.setState({isCapsuleWorking:!1}),t()},n.hmrSocket.onProblem=function(){n.setState({isCapsuleWorking:!1}),t()}},n.disengageCapsule=function(){var e=n.props,t=e.onFsChange,a=e.onCapsuleChange;n.syncFilesToCapsule.cancel(),n.capsuleWriteLock=!1,n.prevWritten={},n.capsule=void 0,n.hmrSocket&&(n.hmrSocket.destroy(),n.hmrSocket=void 0),n.setState({url:void 0,status:void 0}),n._loaderCtrl.reset(!0),t&&t(void 0),a&&a(void 0)},n.handleConnectionChanged=function(e){n.state.status!==e&&n.setState({status:e})},n.syncFilesToCapsule=m()((function(){var e=Object(f.a)(Object(f.a)(n)).capsule,t=n.props.files,a=n.state.status;if(t)if(e&&!n.capsuleWriteLock){n.capsuleWriteLock=!0;var o=Promise.resolve().then((function(){if(ee.has(a))return n.startCapsule()})).then((function(){return n.writeFilesToCapsule(e,t)})).catch().then((function(){n.capsuleWriteLock=!1}));n._loaderCtrl.handleInstallFiles(o)}else n.syncFilesToCapsule();else n.capsuleWriteLock=!1}),600),n.prevWritten={},n.reload=function(){console.debug("reloading... ");var e=n.status;ee.has(e)?n.handleIframeLoaded():n.setState({iframeKey:n.state.iframeKey+1})},n._loaderCtrl=new G,n._loaderCtrl.onSetupChange=function(e){return n.setState({isSettingUp:e})},n._loaderCtrl.onWorkingChange=function(e){return n.setState({isWorking:e})},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.type,a=t.bitId;n&&this.getCapsuleInstance(n,a).then((function(){return e.startCapsule()})).then((function(){return e.syncFilesToCapsule()}))}},{key:"componentWillUnmount",value:function(){this.destroyCapsule()}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=e.type!==t.type||e.bitId!==t.bitId;t.type&&(e.codeId!=t.codeId&&this._loaderCtrl.handleExampleChanges(),n&&(this.destroyCapsule(),this.getCapsuleInstance(t.type,t.bitId)),e.files!==t.files&&t.files&&this.syncFilesToCapsule())}},{key:"destroyCapsule",value:function(){var e=Object(r.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.capsule,this.disengageCapsule(),!t){e.next=5;break}return e.next=5,t.destroy();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"writeFilesToCapsule",value:function(){var e=Object(r.a)(i.a.mark((function e(t,n){var o,r,s,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=Object(v.detailedDiff)(this.prevWritten,n),r=o.added,s=o.deleted,c=o.updated,e.prev=1,e.next=4,t.updateFs(Object(a.a)({},r,c));case 4:return e.next=6,Promise.all(Object.keys(s).map((function(e){return t.fs.unlink(e)})));case 6:this.prevWritten=n,e.next=14;break;case 9:return e.prev=9,e.t0=e.catch(1),console.error("failed writing files to capsule",e.t0),this.prevWritten={},e.abrupt("return");case 14:case"end":return e.stop()}}),e,this,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.isVisible,t=void 0===e||e,n=this.state,a=n.url,o=n.iframeKey,i=n.status,r=n.isWorking,s=n.isCapsuleWorking,c=n.isSettingUp,l=n.capsuleDef,u=l&&l.logoUrl,d=h.a.createElement(z,{topFace:u&&h.a.createElement("img",{className:Y.a.logo,src:u})});return h.a.createElement("div",{className:"".concat(Y.a.capsuleContainer," ").concat(t?"":Y.a.hidden)},h.a.createElement(H.a,{mask:d,maskVisible:c},h.a.createElement(F,{className:Y.a.smallLoader,visible:(r||s)&&!c}),h.a.createElement("iframe",{className:Y.a.iframe,key:o,src:a,id:j.a,name:j.a,onLoad:this.handleIframeLoaded,height:"100%",width:"100%",sandbox:"allow-forms allow-scripts allow-same-origin"})),h.a.createElement(E,{status:i}))}},{key:"status",get:function(){return this.state.status}}]),t}(p.Component);ae.defaultProps={isVisible:!0},n.d(t,"a",(function(){return ae}))},628:function(e,t,n){"use strict";var a=n(199),o=n(7),i=n.n(o),r=n(42),s=n.n(r),c=n(605),l=n.n(c);n.d(t,"a",(function(){return d}));var u,d=(u=a.a,function(e){return i.a.createElement(u,Object.assign({},e,{className:s()(l.a.textButton,e.className)}))})},814:function(e,t){},816:function(e,t){},850:function(e,t){}}]);
//# sourceMappingURL=main~748942c6.62556b74.chunk.js.map