(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{207:function(e,t,i){"use strict";i.d(t,"a",(function(){return H}));i(673);var o=i(0),n=i(1),r=i(13),a=i(6),s=i(2),d=i(44),l=i(93),u=i(5),h=i(43),c=i(611),f=i(308),g=i(449),m=i(21),_=i(10),p=i(3),v=i(24),D=i(310),y=i(47),w=i(8),b=i(12),C=i(51),E=i(4),S=i(615),L=i(40),N=i(11),I=i(20),R=i(168),O=i(59),M=i(19),T=i(87),x=i(23),P=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),V=function(e,t,i,o){var n,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},F=function(e,t){return function(i,o){t(i,o,e)}},W=0,A=function(){function e(e,t,i,o,n,r){this.model=e,this.viewModel=t,this.cursor=i,this.view=o,this.hasRealView=n,this.listenersToRemove=r}return e.prototype.dispose=function(){Object(s.f)(this.listenersToRemove),this.model.onBeforeDetached(),this.hasRealView&&this.view.dispose(),this.cursor.dispose(),this.viewModel.dispose()},e}(),H=function(e){function t(t,i,o,n,s,d,l,h,c,f){var g=e.call(this)||this;g._onDidDispose=g._register(new a.a),g.onDidDispose=g._onDidDispose.event,g._onDidChangeModelContent=g._register(new a.a),g.onDidChangeModelContent=g._onDidChangeModelContent.event,g._onDidChangeModelLanguage=g._register(new a.a),g.onDidChangeModelLanguage=g._onDidChangeModelLanguage.event,g._onDidChangeModelLanguageConfiguration=g._register(new a.a),g.onDidChangeModelLanguageConfiguration=g._onDidChangeModelLanguageConfiguration.event,g._onDidChangeModelOptions=g._register(new a.a),g.onDidChangeModelOptions=g._onDidChangeModelOptions.event,g._onDidChangeModelDecorations=g._register(new a.a),g.onDidChangeModelDecorations=g._onDidChangeModelDecorations.event,g._onDidChangeConfiguration=g._register(new a.a),g.onDidChangeConfiguration=g._onDidChangeConfiguration.event,g._onDidChangeModel=g._register(new a.a),g.onDidChangeModel=g._onDidChangeModel.event,g._onDidChangeCursorPosition=g._register(new a.a),g.onDidChangeCursorPosition=g._onDidChangeCursorPosition.event,g._onDidChangeCursorSelection=g._register(new a.a),g.onDidChangeCursorSelection=g._onDidChangeCursorSelection.event,g._onDidAttemptReadOnlyEdit=g._register(new a.a),g.onDidAttemptReadOnlyEdit=g._onDidAttemptReadOnlyEdit.event,g._onDidLayoutChange=g._register(new a.a),g.onDidLayoutChange=g._onDidLayoutChange.event,g._editorTextFocus=g._register(new k),g.onDidFocusEditorText=g._editorTextFocus.onDidChangeToTrue,g.onDidBlurEditorText=g._editorTextFocus.onDidChangeToFalse,g._editorWidgetFocus=g._register(new k),g.onDidFocusEditorWidget=g._editorWidgetFocus.onDidChangeToTrue,g.onDidBlurEditorWidget=g._editorWidgetFocus.onDidChangeToFalse,g._onWillType=g._register(new a.a),g.onWillType=g._onWillType.event,g._onDidType=g._register(new a.a),g.onDidType=g._onDidType.event,g._onCompositionStart=g._register(new a.a),g.onCompositionStart=g._onCompositionStart.event,g._onCompositionEnd=g._register(new a.a),g.onCompositionEnd=g._onCompositionEnd.event,g._onDidPaste=g._register(new a.a),g.onDidPaste=g._onDidPaste.event,g._onMouseUp=g._register(new a.a),g.onMouseUp=g._onMouseUp.event,g._onMouseDown=g._register(new a.a),g.onMouseDown=g._onMouseDown.event,g._onMouseDrag=g._register(new a.a),g.onMouseDrag=g._onMouseDrag.event,g._onMouseDrop=g._register(new a.a),g.onMouseDrop=g._onMouseDrop.event,g._onContextMenu=g._register(new a.a),g.onContextMenu=g._onContextMenu.event,g._onMouseMove=g._register(new a.a),g.onMouseMove=g._onMouseMove.event,g._onMouseLeave=g._register(new a.a),g.onMouseLeave=g._onMouseLeave.event,g._onMouseWheel=g._register(new a.a),g.onMouseWheel=g._onMouseWheel.event,g._onKeyUp=g._register(new a.a),g.onKeyUp=g._onKeyUp.event,g._onKeyDown=g._register(new a.a),g.onKeyDown=g._onKeyDown.event,g._onDidScrollChange=g._register(new a.a),g.onDidScrollChange=g._onDidScrollChange.event,g._onDidChangeViewZones=g._register(new a.a),g.onDidChangeViewZones=g._onDidChangeViewZones.event,g._domElement=t,g._id=++W,g._decorationTypeKeysToIds={},g._decorationTypeSubtypes={},g.isSimpleWidget=o.isSimpleWidget||!1,g._telemetryData=o.telemetryData,i=i||{},g._configuration=g._register(g._createConfiguration(i,f)),g._register(g._configuration.onDidChange((function(e){g._onDidChangeConfiguration.fire(e);var t=g._configuration.options;if(e.hasChanged(103)){var i=t.get(103);g._onDidLayoutChange.fire(i)}}))),g._contextKeyService=g._register(l.createScoped(g._domElement)),g._notificationService=c,g._codeEditorService=s,g._commandService=d,g._themeService=h,g._register(new j(g,g._contextKeyService)),g._register(new U(g,g._contextKeyService)),g._instantiationService=n.createChild(new R.a([N.c,g._contextKeyService])),g._modelData=null,g._contributions={},g._actions={},g._focusTracker=new B(t),g._focusTracker.onChange((function(){g._editorWidgetFocus.setValue(g._focusTracker.hasFocus())})),g._contentWidgets={},g._overlayWidgets={};for(var m=0,_=Array.isArray(o.contributions)?o.contributions:u.d.getEditorContributions();m<_.length;m++){var p=_[m];try{var v=g._instantiationService.createInstance(p.ctor,g);g._contributions[p.id]=v}catch(y){Object(r.e)(y)}}return u.d.getEditorActions().forEach((function(e){var t=new D.a(e.id,e.label,e.alias,Object(x.n)(e.precondition),(function(){return g._instantiationService.invokeFunction((function(t){return Promise.resolve(e.runEditorCommand(t,g,null))}))}),g._contextKeyService);g._actions[t.id]=t})),g._codeEditorService.addCodeEditor(g),g}return P(t,e),t.prototype._createConfiguration=function(e,t){return new l.a(this.isSimpleWidget,e,this._domElement,t)},t.prototype.getId=function(){return this.getEditorType()+":"+this._id},t.prototype.getEditorType=function(){return y.a.ICodeEditor},t.prototype.dispose=function(){this._codeEditorService.removeCodeEditor(this),this._focusTracker.dispose();for(var t=Object.keys(this._contributions),i=0,o=t.length;i<o;i++){var n=t[i];this._contributions[n].dispose()}this._removeDecorationTypes(),this._postDetachModelCleanup(this._detachModel()),this._onDidDispose.fire(),e.prototype.dispose.call(this)},t.prototype.invokeWithinContext=function(e){return this._instantiationService.invokeFunction(e)},t.prototype.updateOptions=function(e){this._configuration.updateOptions(e)},t.prototype.getOptions=function(){return this._configuration.options},t.prototype.getOption=function(e){return this._configuration.options.get(e)},t.prototype.getRawOptions=function(){return this._configuration.getRawOptions()},t.prototype.getValue=function(e){if(void 0===e&&(e=null),!this._modelData)return"";var t=!(!e||!e.preserveBOM),i=0;return e&&e.lineEnding&&"\n"===e.lineEnding?i=1:e&&e.lineEnding&&"\r\n"===e.lineEnding&&(i=2),this._modelData.model.getValue(i,t)},t.prototype.setValue=function(e){this._modelData&&this._modelData.model.setValue(e)},t.prototype.getModel=function(){return this._modelData?this._modelData.model:null},t.prototype.setModel=function(e){void 0===e&&(e=null);var t=e;if((null!==this._modelData||null!==t)&&(!this._modelData||this._modelData.model!==t)){var i=this.hasTextFocus(),o=this._detachModel();this._attachModel(t),i&&this.hasModel()&&this.focus();var n={oldModelUrl:o?o.uri:null,newModelUrl:t?t.uri:null};this._removeDecorationTypes(),this._onDidChangeModel.fire(n),this._postDetachModelCleanup(o)}},t.prototype._removeDecorationTypes=function(){if(this._decorationTypeKeysToIds={},this._decorationTypeSubtypes){for(var e in this._decorationTypeSubtypes){var t=this._decorationTypeSubtypes[e];for(var i in t)this._removeDecorationType(e+"-"+i)}this._decorationTypeSubtypes={}}},t.prototype.getVisibleRanges=function(){return this._modelData?this._modelData.viewModel.getVisibleRanges():[]},t.prototype.getWhitespaces=function(){return this._modelData?this._modelData.viewModel.viewLayout.getWhitespaces():[]},t._getVerticalOffsetForPosition=function(e,t,i){var o=e.model.validatePosition({lineNumber:t,column:i}),n=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(o);return e.viewModel.viewLayout.getVerticalOffsetForLineNumber(n.lineNumber)},t.prototype.getTopForLineNumber=function(e){return this._modelData?t._getVerticalOffsetForPosition(this._modelData,e,1):-1},t.prototype.getTopForPosition=function(e,i){return this._modelData?t._getVerticalOffsetForPosition(this._modelData,e,i):-1},t.prototype.setHiddenAreas=function(e){this._modelData&&this._modelData.viewModel.setHiddenAreas(e.map((function(e){return p.a.lift(e)})))},t.prototype.getVisibleColumnFromPosition=function(e){if(!this._modelData)return e.column;var t=this._modelData.model.validatePosition(e),i=this._modelData.model.getOptions().tabSize;return m.a.visibleColumnFromColumn(this._modelData.model.getLineContent(t.lineNumber),t.column,i)+1},t.prototype.getPosition=function(){return this._modelData?this._modelData.cursor.getPosition():null},t.prototype.setPosition=function(e){if(this._modelData){if(!_.a.isIPosition(e))throw new Error("Invalid arguments");this._modelData.cursor.setSelections("api",[{selectionStartLineNumber:e.lineNumber,selectionStartColumn:e.column,positionLineNumber:e.lineNumber,positionColumn:e.column}])}},t.prototype._sendRevealRange=function(e,t,i,o){if(this._modelData){if(!p.a.isIRange(e))throw new Error("Invalid arguments");var n=this._modelData.model.validateRange(e),r=this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(n);this._modelData.cursor.emitCursorRevealRange("api",r,t,i,o)}},t.prototype.revealLine=function(e,t){void 0===t&&(t=0),this._revealLine(e,0,t)},t.prototype.revealLineInCenter=function(e,t){void 0===t&&(t=0),this._revealLine(e,1,t)},t.prototype.revealLineInCenterIfOutsideViewport=function(e,t){void 0===t&&(t=0),this._revealLine(e,2,t)},t.prototype._revealLine=function(e,t,i){if("number"!==typeof e)throw new Error("Invalid arguments");this._sendRevealRange(new p.a(e,1,e,1),t,!1,i)},t.prototype.revealPosition=function(e,t){void 0===t&&(t=0),this._revealPosition(e,0,!0,t)},t.prototype.revealPositionInCenter=function(e,t){void 0===t&&(t=0),this._revealPosition(e,1,!0,t)},t.prototype.revealPositionInCenterIfOutsideViewport=function(e,t){void 0===t&&(t=0),this._revealPosition(e,2,!0,t)},t.prototype._revealPosition=function(e,t,i,o){if(!_.a.isIPosition(e))throw new Error("Invalid arguments");this._sendRevealRange(new p.a(e.lineNumber,e.column,e.lineNumber,e.column),t,i,o)},t.prototype.getSelection=function(){return this._modelData?this._modelData.cursor.getSelection():null},t.prototype.getSelections=function(){return this._modelData?this._modelData.cursor.getSelections():null},t.prototype.setSelection=function(e){var t=v.a.isISelection(e),i=p.a.isIRange(e);if(!t&&!i)throw new Error("Invalid arguments");if(t)this._setSelectionImpl(e);else if(i){var o={selectionStartLineNumber:e.startLineNumber,selectionStartColumn:e.startColumn,positionLineNumber:e.endLineNumber,positionColumn:e.endColumn};this._setSelectionImpl(o)}},t.prototype._setSelectionImpl=function(e){if(this._modelData){var t=new v.a(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn);this._modelData.cursor.setSelections("api",[t])}},t.prototype.revealLines=function(e,t,i){void 0===i&&(i=0),this._revealLines(e,t,0,i)},t.prototype.revealLinesInCenter=function(e,t,i){void 0===i&&(i=0),this._revealLines(e,t,1,i)},t.prototype.revealLinesInCenterIfOutsideViewport=function(e,t,i){void 0===i&&(i=0),this._revealLines(e,t,2,i)},t.prototype._revealLines=function(e,t,i,o){if("number"!==typeof e||"number"!==typeof t)throw new Error("Invalid arguments");this._sendRevealRange(new p.a(e,1,t,1),i,!1,o)},t.prototype.revealRange=function(e,t,i,o){void 0===t&&(t=0),void 0===i&&(i=!1),void 0===o&&(o=!0),this._revealRange(e,i?1:0,o,t)},t.prototype.revealRangeInCenter=function(e,t){void 0===t&&(t=0),this._revealRange(e,1,!0,t)},t.prototype.revealRangeInCenterIfOutsideViewport=function(e,t){void 0===t&&(t=0),this._revealRange(e,2,!0,t)},t.prototype.revealRangeAtTop=function(e,t){void 0===t&&(t=0),this._revealRange(e,3,!0,t)},t.prototype._revealRange=function(e,t,i,o){if(!p.a.isIRange(e))throw new Error("Invalid arguments");this._sendRevealRange(p.a.lift(e),t,i,o)},t.prototype.setSelections=function(e,t){if(void 0===t&&(t="api"),this._modelData){if(!e||0===e.length)throw new Error("Invalid arguments");for(var i=0,o=e.length;i<o;i++)if(!v.a.isISelection(e[i]))throw new Error("Invalid arguments");this._modelData.cursor.setSelections(t,e)}},t.prototype.getScrollWidth=function(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollWidth():-1},t.prototype.getScrollLeft=function(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollLeft():-1},t.prototype.getScrollHeight=function(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollHeight():-1},t.prototype.getScrollTop=function(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollTop():-1},t.prototype.setScrollLeft=function(e){if(this._modelData){if("number"!==typeof e)throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPositionNow({scrollLeft:e})}},t.prototype.setScrollTop=function(e){if(this._modelData){if("number"!==typeof e)throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPositionNow({scrollTop:e})}},t.prototype.setScrollPosition=function(e){this._modelData&&this._modelData.viewModel.viewLayout.setScrollPositionNow(e)},t.prototype.saveViewState=function(){if(!this._modelData)return null;for(var e={},t=0,i=Object.keys(this._contributions);t<i.length;t++){var o=i[t],n=this._contributions[o];"function"===typeof n.saveViewState&&(e[o]=n.saveViewState())}return{cursorState:this._modelData.cursor.saveState(),viewState:this._modelData.viewModel.saveState(),contributionsState:e}},t.prototype.restoreViewState=function(e){if(this._modelData&&this._modelData.hasRealView){var t=e;if(t&&t.cursorState&&t.viewState){var i=t.cursorState;Array.isArray(i)?this._modelData.cursor.restoreState(i):this._modelData.cursor.restoreState([i]);for(var o=t.contributionsState||{},n=Object.keys(this._contributions),r=0,a=n.length;r<a;r++){var s=n[r],d=this._contributions[s];"function"===typeof d.restoreViewState&&d.restoreViewState(o[s])}var l=this._modelData.viewModel.reduceRestoreState(t.viewState);this._modelData.view.restoreState(l)}}},t.prototype.getContribution=function(e){return this._contributions[e]||null},t.prototype.getActions=function(){for(var e=[],t=Object.keys(this._actions),i=0,o=t.length;i<o;i++){var n=t[i];e.push(this._actions[n])}return e},t.prototype.getSupportedActions=function(){var e=this.getActions();return e=e.filter((function(e){return e.isSupported()}))},t.prototype.getAction=function(e){return this._actions[e]||null},t.prototype.trigger=function(e,t,i){if(i=i||{},t===y.b.Type){if(!this._modelData||"string"!==typeof i.text||0===i.text.length)return;return"keyboard"===e&&this._onWillType.fire(i.text),this._modelData.cursor.trigger(e,t,i),void("keyboard"===e&&this._onDidType.fire(i.text))}if(t!==y.b.Paste){t===y.b.CompositionStart&&this._onCompositionStart.fire(),t===y.b.CompositionEnd&&this._onCompositionEnd.fire();var o=this.getAction(t);o?Promise.resolve(o.run()).then(void 0,r.e):this._modelData&&(this._triggerEditorCommand(e,t,i)||this._modelData.cursor.trigger(e,t,i))}else{if(!this._modelData||"string"!==typeof i.text||0===i.text.length)return;var n=this._modelData.cursor.getSelection().getStartPosition();this._modelData.cursor.trigger(e,t,i);var a=this._modelData.cursor.getSelection().getStartPosition();"keyboard"===e&&this._onDidPaste.fire(new p.a(n.lineNumber,n.column,a.lineNumber,a.column))}},t.prototype._triggerEditorCommand=function(e,t,i){var o=this,n=u.d.getEditorCommand(t);return!!n&&((i=i||{}).source=e,this._instantiationService.invokeFunction((function(e){Promise.resolve(n.runEditorCommand(e,o,i)).then(void 0,r.e)})),!0)},t.prototype._getCursors=function(){return this._modelData?this._modelData.cursor:null},t.prototype.pushUndoStop=function(){return!!this._modelData&&(!this._configuration.options.get(65)&&(this._modelData.model.pushStackElement(),!0))},t.prototype.executeEdits=function(e,t,i){return!!this._modelData&&(!this._configuration.options.get(65)&&(o=i?Array.isArray(i)?function(){return i}:i:function(){return null},this._modelData.cursor.executeEdits(e,t,o),!0));var o},t.prototype.executeCommand=function(e,t){this._modelData&&this._modelData.cursor.trigger(e,y.b.ExecuteCommand,t)},t.prototype.executeCommands=function(e,t){this._modelData&&this._modelData.cursor.trigger(e,y.b.ExecuteCommands,t)},t.prototype.changeDecorations=function(e){return this._modelData?this._modelData.model.changeDecorations(e,this._id):null},t.prototype.getLineDecorations=function(e){return this._modelData?this._modelData.model.getLineDecorations(e,this._id,this._configuration.options.get(65)):null},t.prototype.deltaDecorations=function(e,t){return this._modelData?0===e.length&&0===t.length?e:this._modelData.model.deltaDecorations(e,t,this._id):[]},t.prototype.removeDecorations=function(e){var t=this._decorationTypeKeysToIds[e];t&&this.deltaDecorations(t,[]),this._decorationTypeKeysToIds.hasOwnProperty(e)&&delete this._decorationTypeKeysToIds[e],this._decorationTypeSubtypes.hasOwnProperty(e)&&delete this._decorationTypeSubtypes[e]},t.prototype.getLayoutInfo=function(){return this._configuration.options.get(103)},t.prototype.createOverviewRuler=function(e){return this._modelData&&this._modelData.hasRealView?this._modelData.view.createOverviewRuler(e):null},t.prototype.getDomNode=function(){return this._modelData&&this._modelData.hasRealView?this._modelData.view.domNode.domNode:null},t.prototype.delegateVerticalScrollbarMouseDown=function(e){this._modelData&&this._modelData.hasRealView&&this._modelData.view.delegateVerticalScrollbarMouseDown(e)},t.prototype.layout=function(e){this._configuration.observeReferenceElement(e),this.render()},t.prototype.focus=function(){this._modelData&&this._modelData.hasRealView&&this._modelData.view.focus()},t.prototype.hasTextFocus=function(){return!(!this._modelData||!this._modelData.hasRealView)&&this._modelData.view.isFocused()},t.prototype.hasWidgetFocus=function(){return this._focusTracker&&this._focusTracker.hasFocus()},t.prototype.addContentWidget=function(e){var t={widget:e,position:e.getPosition()};this._contentWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a content widget with the same id."),this._contentWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addContentWidget(t)},t.prototype.layoutContentWidget=function(e){var t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){var i=this._contentWidgets[t];i.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutContentWidget(i)}},t.prototype.removeContentWidget=function(e){var t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){var i=this._contentWidgets[t];delete this._contentWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeContentWidget(i)}},t.prototype.addOverlayWidget=function(e){var t={widget:e,position:e.getPosition()};this._overlayWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting an overlay widget with the same id."),this._overlayWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addOverlayWidget(t)},t.prototype.layoutOverlayWidget=function(e){var t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){var i=this._overlayWidgets[t];i.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutOverlayWidget(i)}},t.prototype.removeOverlayWidget=function(e){var t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){var i=this._overlayWidgets[t];delete this._overlayWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeOverlayWidget(i)}},t.prototype.changeViewZones=function(e){this._modelData&&this._modelData.hasRealView&&(this._modelData.view.change(e)&&this._onDidChangeViewZones.fire())},t.prototype.getTargetAtClientPoint=function(e,t){return this._modelData&&this._modelData.hasRealView?this._modelData.view.getTargetAtClientPoint(e,t):null},t.prototype.getScrolledVisiblePosition=function(e){if(!this._modelData||!this._modelData.hasRealView)return null;var i=this._modelData.model.validatePosition(e),o=this._configuration.options,n=o.get(103);return{top:t._getVerticalOffsetForPosition(this._modelData,i.lineNumber,i.column)-this.getScrollTop(),left:this._modelData.view.getOffsetForColumn(i.lineNumber,i.column)+n.glyphMarginWidth+n.lineNumbersWidth+n.decorationsWidth-this.getScrollLeft(),height:o.get(47)}},t.prototype.getOffsetForColumn=function(e,t){return this._modelData&&this._modelData.hasRealView?this._modelData.view.getOffsetForColumn(e,t):-1},t.prototype.render=function(e){void 0===e&&(e=!1),this._modelData&&this._modelData.hasRealView&&this._modelData.view.render(!0,e)},t.prototype.applyFontInfo=function(e){l.a.applyFontInfoSlow(e,this._configuration.options.get(32))},t.prototype._attachModel=function(e){var t=this;if(e){var i=[];this._domElement.setAttribute("data-mode-id",e.getLanguageIdentifier().language),this._configuration.setIsDominatedByLongLines(e.isDominatedByLongLines()),this._configuration.setMaxLineNumber(e.getLineCount()),e.onBeforeAttached();var r=new S.a(this._id,this._configuration,e,(function(e){return n.T(e)}));i.push(e.onDidChangeDecorations((function(e){return t._onDidChangeModelDecorations.fire(e)}))),i.push(e.onDidChangeLanguage((function(i){t._domElement.setAttribute("data-mode-id",e.getLanguageIdentifier().language),t._onDidChangeModelLanguage.fire(i)}))),i.push(e.onDidChangeLanguageConfiguration((function(e){return t._onDidChangeModelLanguageConfiguration.fire(e)}))),i.push(e.onDidChangeContent((function(e){return t._onDidChangeModelContent.fire(e)}))),i.push(e.onDidChangeOptions((function(e){return t._onDidChangeModelOptions.fire(e)}))),i.push(e.onWillDispose((function(){return t.setModel(null)})));var a=new g.a(this._configuration,e,r);i.push(a.onDidReachMaxCursorCount((function(){t._notificationService.warn(o.a("cursors.maximum","The number of cursors has been limited to {0}.",g.a.MAX_CURSOR_COUNT))}))),i.push(a.onDidAttemptReadOnlyEdit((function(){t._onDidAttemptReadOnlyEdit.fire(void 0)}))),i.push(a.onDidChange((function(e){for(var i=[],o=0,n=e.selections.length;o<n;o++)i[o]=e.selections[o].getPosition();var r={position:i[0],secondaryPositions:i.slice(1),reason:e.reason,source:e.source};t._onDidChangeCursorPosition.fire(r);var a={selection:e.selections[0],secondarySelections:e.selections.slice(1),modelVersionId:e.modelVersionId,oldSelections:e.oldSelections,oldModelVersionId:e.oldModelVersionId,source:e.source,reason:e.reason};t._onDidChangeCursorSelection.fire(a)})));var s=this._createView(r,a),d=s[0],l=s[1];if(l){this._domElement.appendChild(d.domNode.domNode);for(var u=Object.keys(this._contentWidgets),h=0,c=u.length;h<c;h++){var f=u[h];d.addContentWidget(this._contentWidgets[f])}for(h=0,c=(u=Object.keys(this._overlayWidgets)).length;h<c;h++){f=u[h];d.addOverlayWidget(this._overlayWidgets[f])}d.render(!1,!0),d.domNode.domNode.setAttribute("data-uri",e.uri.toString())}this._modelData=new A(e,r,a,d,l,i)}else this._modelData=null},t.prototype._createView=function(e,t){var i,o=this;i=this.isSimpleWidget?{executeEditorCommand:function(e,i){e.runCoreEditorCommand(t,i)},paste:function(e,t,i,n){o.trigger(e,y.b.Paste,{text:t,pasteOnNewLine:i,multicursorText:n})},type:function(e,t){o.trigger(e,y.b.Type,{text:t})},replacePreviousChar:function(e,t,i){o.trigger(e,y.b.ReplacePreviousChar,{text:t,replaceCharCnt:i})},compositionStart:function(e){o.trigger(e,y.b.CompositionStart,void 0)},compositionEnd:function(e){o.trigger(e,y.b.CompositionEnd,void 0)},cut:function(e){o.trigger(e,y.b.Cut,void 0)}}:{executeEditorCommand:function(e,i){e.runCoreEditorCommand(t,i)},paste:function(e,t,i,n){o._commandService.executeCommand(y.b.Paste,{text:t,pasteOnNewLine:i,multicursorText:n})},type:function(e,t){o._commandService.executeCommand(y.b.Type,{text:t})},replacePreviousChar:function(e,t,i){o._commandService.executeCommand(y.b.ReplacePreviousChar,{text:t,replaceCharCnt:i})},compositionStart:function(e){o._commandService.executeCommand(y.b.CompositionStart,{})},compositionEnd:function(e){o._commandService.executeCommand(y.b.CompositionEnd,{})},cut:function(e){o._commandService.executeCommand(y.b.Cut,{})}};var n=new f.a(e);return n.onDidScroll=function(e){return o._onDidScrollChange.fire(e)},n.onDidGainFocus=function(){return o._editorTextFocus.setValue(!0)},n.onDidLoseFocus=function(){return o._editorTextFocus.setValue(!1)},n.onContextMenu=function(e){return o._onContextMenu.fire(e)},n.onMouseDown=function(e){return o._onMouseDown.fire(e)},n.onMouseUp=function(e){return o._onMouseUp.fire(e)},n.onMouseDrag=function(e){return o._onMouseDrag.fire(e)},n.onMouseDrop=function(e){return o._onMouseDrop.fire(e)},n.onKeyUp=function(e){return o._onKeyUp.fire(e)},n.onMouseMove=function(e){return o._onMouseMove.fire(e)},n.onMouseLeave=function(e){return o._onMouseLeave.fire(e)},n.onMouseWheel=function(e){return o._onMouseWheel.fire(e)},n.onKeyDown=function(e){return o._onKeyDown.fire(e)},[new c.a(i,this._configuration,this._themeService,e,t,n),!0]},t.prototype._postDetachModelCleanup=function(e){e&&e.removeAllDecorationsWithOwnerId(this._id)},t.prototype._detachModel=function(){if(!this._modelData)return null;var e=this._modelData.model,t=this._modelData.hasRealView?this._modelData.view.domNode.domNode:null;return this._modelData.dispose(),this._modelData=null,this._domElement.removeAttribute("data-mode-id"),t&&this._domElement.removeChild(t),e},t.prototype._removeDecorationType=function(e){this._codeEditorService.removeDecorationType(e)},t.prototype.hasModel=function(){return null!==this._modelData},t=V([F(3,I.a),F(4,h.a),F(5,L.b),F(6,N.c),F(7,M.c),F(8,O.a),F(9,T.b)],t)}(s.a),k=function(e){function t(){var t=e.call(this)||this;return t._onDidChangeToTrue=t._register(new a.a),t.onDidChangeToTrue=t._onDidChangeToTrue.event,t._onDidChangeToFalse=t._register(new a.a),t.onDidChangeToFalse=t._onDidChangeToFalse.event,t._value=0,t}return P(t,e),t.prototype.setValue=function(e){var t=e?2:1;this._value!==t&&(this._value=t,2===this._value?this._onDidChangeToTrue.fire():1===this._value&&this._onDidChangeToFalse.fire())},t}(s.a),j=function(e){function t(t,i){var o=e.call(this)||this;return o._editor=t,i.createKey("editorId",t.getId()),o._editorFocus=w.a.focus.bindTo(i),o._textInputFocus=w.a.textInputFocus.bindTo(i),o._editorTextFocus=w.a.editorTextFocus.bindTo(i),o._editorTabMovesFocus=w.a.tabMovesFocus.bindTo(i),o._editorReadonly=w.a.readOnly.bindTo(i),o._hasMultipleSelections=w.a.hasMultipleSelections.bindTo(i),o._hasNonEmptySelection=w.a.hasNonEmptySelection.bindTo(i),o._canUndo=w.a.canUndo.bindTo(i),o._canRedo=w.a.canRedo.bindTo(i),o._register(o._editor.onDidChangeConfiguration((function(){return o._updateFromConfig()}))),o._register(o._editor.onDidChangeCursorSelection((function(){return o._updateFromSelection()}))),o._register(o._editor.onDidFocusEditorWidget((function(){return o._updateFromFocus()}))),o._register(o._editor.onDidBlurEditorWidget((function(){return o._updateFromFocus()}))),o._register(o._editor.onDidFocusEditorText((function(){return o._updateFromFocus()}))),o._register(o._editor.onDidBlurEditorText((function(){return o._updateFromFocus()}))),o._register(o._editor.onDidChangeModel((function(){return o._updateFromModel()}))),o._register(o._editor.onDidChangeConfiguration((function(){return o._updateFromModel()}))),o._updateFromConfig(),o._updateFromSelection(),o._updateFromFocus(),o._updateFromModel(),o}return P(t,e),t.prototype._updateFromConfig=function(){var e=this._editor.getOptions();this._editorTabMovesFocus.set(e.get(102)),this._editorReadonly.set(e.get(65))},t.prototype._updateFromSelection=function(){var e=this._editor.getSelections();e?(this._hasMultipleSelections.set(e.length>1),this._hasNonEmptySelection.set(e.some((function(e){return!e.isEmpty()})))):(this._hasMultipleSelections.reset(),this._hasNonEmptySelection.reset())},t.prototype._updateFromFocus=function(){this._editorFocus.set(this._editor.hasWidgetFocus()&&!this._editor.isSimpleWidget),this._editorTextFocus.set(this._editor.hasTextFocus()&&!this._editor.isSimpleWidget),this._textInputFocus.set(this._editor.hasTextFocus())},t.prototype._updateFromModel=function(){var e=this._editor.getModel();this._canUndo.set(Boolean(e&&e.canUndo())),this._canRedo.set(Boolean(e&&e.canRedo()))},t}(s.a),U=function(e){function t(t,i){var o=e.call(this)||this;o._editor=t,o._contextKeyService=i,o._langId=w.a.languageId.bindTo(i),o._hasCompletionItemProvider=w.a.hasCompletionItemProvider.bindTo(i),o._hasCodeActionsProvider=w.a.hasCodeActionsProvider.bindTo(i),o._hasCodeLensProvider=w.a.hasCodeLensProvider.bindTo(i),o._hasDefinitionProvider=w.a.hasDefinitionProvider.bindTo(i),o._hasDeclarationProvider=w.a.hasDeclarationProvider.bindTo(i),o._hasImplementationProvider=w.a.hasImplementationProvider.bindTo(i),o._hasTypeDefinitionProvider=w.a.hasTypeDefinitionProvider.bindTo(i),o._hasHoverProvider=w.a.hasHoverProvider.bindTo(i),o._hasDocumentHighlightProvider=w.a.hasDocumentHighlightProvider.bindTo(i),o._hasDocumentSymbolProvider=w.a.hasDocumentSymbolProvider.bindTo(i),o._hasReferenceProvider=w.a.hasReferenceProvider.bindTo(i),o._hasRenameProvider=w.a.hasRenameProvider.bindTo(i),o._hasSignatureHelpProvider=w.a.hasSignatureHelpProvider.bindTo(i),o._hasDocumentFormattingProvider=w.a.hasDocumentFormattingProvider.bindTo(i),o._hasDocumentSelectionFormattingProvider=w.a.hasDocumentSelectionFormattingProvider.bindTo(i),o._hasMultipleDocumentFormattingProvider=w.a.hasMultipleDocumentFormattingProvider.bindTo(i),o._hasMultipleDocumentSelectionFormattingProvider=w.a.hasMultipleDocumentSelectionFormattingProvider.bindTo(i),o._isInWalkThrough=w.a.isInEmbeddedEditor.bindTo(i);var n=function(){return o._update()};return o._register(t.onDidChangeModel(n)),o._register(t.onDidChangeModelLanguage(n)),o._register(b.d.onDidChange(n)),o._register(b.a.onDidChange(n)),o._register(b.b.onDidChange(n)),o._register(b.f.onDidChange(n)),o._register(b.e.onDidChange(n)),o._register(b.o.onDidChange(n)),o._register(b.B.onDidChange(n)),o._register(b.n.onDidChange(n)),o._register(b.i.onDidChange(n)),o._register(b.k.onDidChange(n)),o._register(b.s.onDidChange(n)),o._register(b.t.onDidChange(n)),o._register(b.g.onDidChange(n)),o._register(b.j.onDidChange(n)),o._register(b.w.onDidChange(n)),n(),o}return P(t,e),t.prototype.dispose=function(){e.prototype.dispose.call(this)},t.prototype.reset=function(){var e=this;this._contextKeyService.bufferChangeEvents((function(){e._langId.reset(),e._hasCompletionItemProvider.reset(),e._hasCodeActionsProvider.reset(),e._hasCodeLensProvider.reset(),e._hasDefinitionProvider.reset(),e._hasDeclarationProvider.reset(),e._hasImplementationProvider.reset(),e._hasTypeDefinitionProvider.reset(),e._hasHoverProvider.reset(),e._hasDocumentHighlightProvider.reset(),e._hasDocumentSymbolProvider.reset(),e._hasReferenceProvider.reset(),e._hasRenameProvider.reset(),e._hasDocumentFormattingProvider.reset(),e._hasDocumentSelectionFormattingProvider.reset(),e._hasSignatureHelpProvider.reset(),e._isInWalkThrough.reset()}))},t.prototype._update=function(){var e=this,t=this._editor.getModel();t?this._contextKeyService.bufferChangeEvents((function(){e._langId.set(t.getLanguageIdentifier().language),e._hasCompletionItemProvider.set(b.d.has(t)),e._hasCodeActionsProvider.set(b.a.has(t)),e._hasCodeLensProvider.set(b.b.has(t)),e._hasDefinitionProvider.set(b.f.has(t)),e._hasDeclarationProvider.set(b.e.has(t)),e._hasImplementationProvider.set(b.o.has(t)),e._hasTypeDefinitionProvider.set(b.B.has(t)),e._hasHoverProvider.set(b.n.has(t)),e._hasDocumentHighlightProvider.set(b.i.has(t)),e._hasDocumentSymbolProvider.set(b.k.has(t)),e._hasReferenceProvider.set(b.s.has(t)),e._hasRenameProvider.set(b.t.has(t)),e._hasSignatureHelpProvider.set(b.w.has(t)),e._hasDocumentFormattingProvider.set(b.g.has(t)||b.j.has(t)),e._hasDocumentSelectionFormattingProvider.set(b.j.has(t)),e._hasMultipleDocumentFormattingProvider.set(b.g.all(t).length+b.j.all(t).length>1),e._hasMultipleDocumentSelectionFormattingProvider.set(b.j.all(t).length>1),e._isInWalkThrough.set(t.uri.scheme===d.b.walkThroughSnippet)})):this.reset()},t}(s.a),B=function(e){function t(t){var i=e.call(this)||this;return i._onChange=i._register(new a.a),i.onChange=i._onChange.event,i._hasFocus=!1,i._domFocusTracker=i._register(n.W(t)),i._register(i._domFocusTracker.onDidFocus((function(){i._hasFocus=!0,i._onChange.fire(void 0)}))),i._register(i._domFocusTracker.onDidBlur((function(){i._hasFocus=!1,i._onChange.fire(void 0)}))),i}return P(t,e),t.prototype.hasFocus=function(){return this._hasFocus},t}(s.a),Z=encodeURIComponent("<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='"),z=encodeURIComponent("'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>");function q(e){return Z+encodeURIComponent(e.toString())+z}var K=encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" height="3" width="12"><g fill="'),G=encodeURIComponent('"><circle cx="1" cy="1" r="1"/><circle cx="5" cy="1" r="1"/><circle cx="9" cy="1" r="1"/></g></svg>');Object(M.e)((function(e,t){var i=e.getColor(E.p);i&&t.addRule(".monaco-editor .squiggly-error { border-bottom: 4px double "+i+"; }");var o=e.getColor(E.q);o&&t.addRule('.monaco-editor .squiggly-error { background: url("data:image/svg+xml,'+q(o)+'") repeat-x bottom left; }');var n=e.getColor(E.O);n&&t.addRule(".monaco-editor .squiggly-warning { border-bottom: 4px double "+n+"; }");var r=e.getColor(E.P);r&&t.addRule('.monaco-editor .squiggly-warning { background: url("data:image/svg+xml,'+q(r)+'") repeat-x bottom left; }');var a=e.getColor(E.G);a&&t.addRule(".monaco-editor .squiggly-info { border-bottom: 4px double "+a+"; }");var s=e.getColor(E.H);s&&t.addRule('.monaco-editor .squiggly-info { background: url("data:image/svg+xml,'+q(s)+'") repeat-x bottom left; }');var d=e.getColor(E.y);d&&t.addRule(".monaco-editor .squiggly-hint { border-bottom: 2px dotted "+d+"; }");var l=e.getColor(E.z);l&&t.addRule('.monaco-editor .squiggly-hint { background: url("data:image/svg+xml,'+(K+encodeURIComponent(l.toString())+G)+'") no-repeat bottom left; }');var u=e.getColor(C.o);u&&t.addRule(".monaco-editor.showUnused .squiggly-inline-unnecessary { opacity: "+u.rgba.a+"; }");var h=e.getColor(C.n);h&&t.addRule(".monaco-editor.showUnused .squiggly-unnecessary { border-bottom: 2px dashed "+h+"; }");var c=e.getColor(E.x)||"inherit";t.addRule(".monaco-editor .squiggly-inline-deprecated { text-decoration: line-through; text-decoration-color: "+c+"}")}))},274:function(e,t,i){"use strict";i.d(t,"a",(function(){return m}));var o=i(41),n=i(43),r=i(207),a=i(40),s=i(11),d=i(20),l=i(59),u=i(19),h=i(87),c=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),f=function(e,t,i,o){var n,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},g=function(e,t){return function(i,o){t(i,o,e)}},m=function(e){function t(t,i,o,n,r,a,s,d,l,u){var h=e.call(this,t,o.getRawOptions(),{},n,r,a,s,d,l,u)||this;return h._parentEditor=o,h._overwriteOptions=i,e.prototype.updateOptions.call(h,h._overwriteOptions),h._register(o.onDidChangeConfiguration((function(e){return h._onParentConfigurationChanged(e)}))),h}return c(t,e),t.prototype.getParentEditor=function(){return this._parentEditor},t.prototype._onParentConfigurationChanged=function(t){e.prototype.updateOptions.call(this,this._parentEditor.getRawOptions()),e.prototype.updateOptions.call(this,this._overwriteOptions)},t.prototype.updateOptions=function(t){o.g(this._overwriteOptions,t,!0),e.prototype.updateOptions.call(this,this._overwriteOptions)},t=f([g(3,d.a),g(4,n.a),g(5,a.b),g(6,s.c),g(7,u.c),g(8,l.a),g(9,h.b)],t)}(r.a)},419:function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var o=i(175),n=i(6),r=i(2),a=i(41),s=i(3),d=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),l={followsCaret:!0,ignoreCharChanges:!0,alwaysRevealFirst:!0},u=function(e){function t(t,i){void 0===i&&(i={});var o=e.call(this)||this;return o._onDidUpdate=o._register(new n.a),o._editor=t,o._options=a.g(i,l,!1),o.disposed=!1,o.nextIdx=-1,o.ranges=[],o.ignoreSelectionChange=!1,o.revealFirst=Boolean(o._options.alwaysRevealFirst),o._register(o._editor.onDidDispose((function(){return o.dispose()}))),o._register(o._editor.onDidUpdateDiff((function(){return o._onDiffUpdated()}))),o._options.followsCaret&&o._register(o._editor.getModifiedEditor().onDidChangeCursorPosition((function(e){o.ignoreSelectionChange||(o.nextIdx=-1)}))),o._options.alwaysRevealFirst&&o._register(o._editor.getModifiedEditor().onDidChangeModel((function(e){o.revealFirst=!0}))),o._init(),o}return d(t,e),t.prototype._init=function(){this._editor.getLineChanges()},t.prototype._onDiffUpdated=function(){this._init(),this._compute(this._editor.getLineChanges()),this.revealFirst&&null!==this._editor.getLineChanges()&&(this.revealFirst=!1,this.nextIdx=-1,this.next(1))},t.prototype._compute=function(e){var t=this;this.ranges=[],e&&e.forEach((function(e){!t._options.ignoreCharChanges&&e.charChanges?e.charChanges.forEach((function(e){t.ranges.push({rhs:!0,range:new s.a(e.modifiedStartLineNumber,e.modifiedStartColumn,e.modifiedEndLineNumber,e.modifiedEndColumn)})})):t.ranges.push({rhs:!0,range:new s.a(e.modifiedStartLineNumber,1,e.modifiedStartLineNumber,1)})})),this.ranges.sort((function(e,t){return e.range.getStartPosition().isBeforeOrEqual(t.range.getStartPosition())?-1:t.range.getStartPosition().isBeforeOrEqual(e.range.getStartPosition())?1:0})),this._onDidUpdate.fire(this)},t.prototype._initIdx=function(e){var t=!1,i=this._editor.getPosition();if(i){for(var o=0,n=this.ranges.length;o<n&&!t;o++){var r=this.ranges[o].range;i.isBeforeOrEqual(r.getStartPosition())&&(this.nextIdx=o+(e?0:-1),t=!0)}t||(this.nextIdx=e?0:this.ranges.length-1),this.nextIdx<0&&(this.nextIdx=this.ranges.length-1)}else this.nextIdx=0},t.prototype._move=function(e,t){if(o.a(!this.disposed,"Illegal State - diff navigator has been disposed"),this.canNavigate()){-1===this.nextIdx?this._initIdx(e):e?(this.nextIdx+=1,this.nextIdx>=this.ranges.length&&(this.nextIdx=0)):(this.nextIdx-=1,this.nextIdx<0&&(this.nextIdx=this.ranges.length-1));var i=this.ranges[this.nextIdx];this.ignoreSelectionChange=!0;try{var n=i.range.getStartPosition();this._editor.setPosition(n),this._editor.revealPositionInCenter(n,t)}finally{this.ignoreSelectionChange=!1}}},t.prototype.canNavigate=function(){return this.ranges&&this.ranges.length>0},t.prototype.next=function(e){void 0===e&&(e=0),this._move(!0,e)},t.prototype.previous=function(e){void 0===e&&(e=0),this._move(!1,e)},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.ranges=[],this.disposed=!0},t}(r.a)},424:function(e,t,i){"use strict";i(762);var o=i(0),n=i(1),r=i(29),a=i(189),s=i(18),d=i(6),l=i(2),u=i(41),h=i(93),c=i(102),f=i(43),g=i(207),m=(i(764),i(112)),_=i(99),p=i(85),v=i(5),D=i(32),y=i(115),w=i(10),b=i(51),C=i(91),E=i(75),S=i(11),L=i(4),N=i(19),I=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),R=function(){function e(e,t,i,o){this.originalLineStart=e,this.originalLineEnd=t,this.modifiedLineStart=i,this.modifiedLineEnd=o}return e.prototype.getType=function(){return 0===this.originalLineStart?1:0===this.modifiedLineStart?2:0},e}(),O=function(e){this.entries=e},M=function(e){function t(t){var i=e.call(this)||this;return i._width=0,i._diffEditor=t,i._isVisible=!1,i.shadow=Object(r.b)(document.createElement("div")),i.shadow.setClassName("diff-review-shadow"),i.actionBarContainer=Object(r.b)(document.createElement("div")),i.actionBarContainer.setClassName("diff-review-actions"),i._actionBar=i._register(new m.a(i.actionBarContainer.domNode)),i._actionBar.push(new p.a("diffreview.close",o.a("label.close","Close"),"close-diff-review",!0,(function(){return i.hide(),Promise.resolve(null)})),{label:!1,icon:!0}),i.domNode=Object(r.b)(document.createElement("div")),i.domNode.setClassName("diff-review monaco-editor-background"),i._content=Object(r.b)(document.createElement("div")),i._content.setClassName("diff-review-content"),i.scrollbar=i._register(new _.a(i._content.domNode,{})),i.domNode.domNode.appendChild(i.scrollbar.getDomNode()),i._register(t.onDidUpdateDiff((function(){i._isVisible&&(i._diffs=i._compute(),i._render())}))),i._register(t.getModifiedEditor().onDidChangeCursorPosition((function(){i._isVisible&&i._render()}))),i._register(t.getOriginalEditor().onDidFocusEditorWidget((function(){i._isVisible&&i.hide()}))),i._register(t.getModifiedEditor().onDidFocusEditorWidget((function(){i._isVisible&&i.hide()}))),i._register(n.o(i.domNode.domNode,"click",(function(e){e.preventDefault();var t=n.x(e.target,"diff-review-row");t&&i._goToRow(t)}))),i._register(n.o(i.domNode.domNode,"keydown",(function(e){(e.equals(18)||e.equals(2066)||e.equals(530))&&(e.preventDefault(),i._goToRow(i._getNextRow())),(e.equals(16)||e.equals(2064)||e.equals(528))&&(e.preventDefault(),i._goToRow(i._getPrevRow())),(e.equals(9)||e.equals(2057)||e.equals(521)||e.equals(1033))&&(e.preventDefault(),i.hide()),(e.equals(10)||e.equals(3))&&(e.preventDefault(),i.accept())}))),i._diffs=[],i._currentDiff=null,i}return I(t,e),t.prototype.prev=function(){var e=0;if(this._isVisible||(this._diffs=this._compute()),this._isVisible){for(var t=-1,i=0,o=this._diffs.length;i<o;i++)if(this._diffs[i]===this._currentDiff){t=i;break}e=this._diffs.length+t-1}else e=this._findDiffIndex(this._diffEditor.getPosition());0!==this._diffs.length&&(e%=this._diffs.length,this._diffEditor.setPosition(new w.a(this._diffs[e].entries[0].modifiedLineStart,1)),this._isVisible=!0,this._diffEditor.doLayout(),this._render(),this._goToRow(this._getNextRow()))},t.prototype.next=function(){var e=0;if(this._isVisible||(this._diffs=this._compute()),this._isVisible){for(var t=-1,i=0,o=this._diffs.length;i<o;i++)if(this._diffs[i]===this._currentDiff){t=i;break}e=t+1}else e=this._findDiffIndex(this._diffEditor.getPosition());0!==this._diffs.length&&(e%=this._diffs.length,this._diffEditor.setPosition(new w.a(this._diffs[e].entries[0].modifiedLineStart,1)),this._isVisible=!0,this._diffEditor.doLayout(),this._render(),this._goToRow(this._getNextRow()))},t.prototype.accept=function(){var e=-1,t=this._getCurrentFocusedRow();if(t){var i=parseInt(t.getAttribute("data-line"),10);isNaN(i)||(e=i)}this.hide(),-1!==e&&(this._diffEditor.setPosition(new w.a(e,1)),this._diffEditor.revealPosition(new w.a(e,1),1))},t.prototype.hide=function(){this._isVisible=!1,this._diffEditor.focus(),this._diffEditor.doLayout(),this._render()},t.prototype._getPrevRow=function(){var e=this._getCurrentFocusedRow();return e?e.previousElementSibling?e.previousElementSibling:e:this._getFirstRow()},t.prototype._getNextRow=function(){var e=this._getCurrentFocusedRow();return e?e.nextElementSibling?e.nextElementSibling:e:this._getFirstRow()},t.prototype._getFirstRow=function(){return this.domNode.domNode.querySelector(".diff-review-row")},t.prototype._getCurrentFocusedRow=function(){var e=document.activeElement;return e&&/diff-review-row/.test(e.className)?e:null},t.prototype._goToRow=function(e){var t=this._getCurrentFocusedRow();e.tabIndex=0,e.focus(),t&&t!==e&&(t.tabIndex=-1),this.scrollbar.scanDomNode()},t.prototype.isVisible=function(){return this._isVisible},t.prototype.layout=function(e,t,i){this._width=t,this.shadow.setTop(e-6),this.shadow.setWidth(t),this.shadow.setHeight(this._isVisible?6:0),this.domNode.setTop(e),this.domNode.setWidth(t),this.domNode.setHeight(i),this._content.setHeight(i),this._content.setWidth(t),this._isVisible?(this.actionBarContainer.setAttribute("aria-hidden","false"),this.actionBarContainer.setDisplay("block")):(this.actionBarContainer.setAttribute("aria-hidden","true"),this.actionBarContainer.setDisplay("none"))},t.prototype._compute=function(){var e=this._diffEditor.getLineChanges();if(!e||0===e.length)return[];var i=this._diffEditor.getOriginalEditor().getModel(),o=this._diffEditor.getModifiedEditor().getModel();return i&&o?t._mergeAdjacent(e,i.getLineCount(),o.getLineCount()):[]},t._mergeAdjacent=function(e,t,i){if(!e||0===e.length)return[];for(var o=[],n=0,r=0,a=e.length;r<a;r++){var s=e[r],d=s.originalStartLineNumber,l=s.originalEndLineNumber,u=s.modifiedStartLineNumber,h=s.modifiedEndLineNumber,c=[],f=0,g=0===l?d:d-1,m=0===h?u:u-1,_=1,p=1;if(r>0){var v=e[r-1];_=0===v.originalEndLineNumber?v.originalStartLineNumber+1:v.originalEndLineNumber+1,p=0===v.modifiedEndLineNumber?v.modifiedStartLineNumber+1:v.modifiedEndLineNumber+1}var D=g-3+1,y=m-3+1;if(D<_)D+=L=_-D,y+=L;if(y<p)D+=L=p-y,y+=L;c[f++]=new R(D,g,y,m),0!==l&&(c[f++]=new R(d,l,0,0)),0!==h&&(c[f++]=new R(0,0,u,h));var w=0===l?d+1:l+1,b=0===h?u+1:h+1,C=t,E=i;if(r+1<a){var S=e[r+1];C=0===S.originalEndLineNumber?S.originalStartLineNumber:S.originalStartLineNumber-1,E=0===S.modifiedEndLineNumber?S.modifiedStartLineNumber:S.modifiedStartLineNumber-1}var L,N=w+3-1,I=b+3-1;if(N>C)N+=L=C-N,I+=L;if(I>E)N+=L=E-I,I+=L;c[f++]=new R(w,N,b,I),o[n++]=new O(c)}var M=o[0].entries,T=[],x=0;for(r=1,a=o.length;r<a;r++){var P=o[r].entries,V=M[M.length-1],F=P[0];0===V.getType()&&0===F.getType()&&F.originalLineStart<=V.originalLineEnd?(M[M.length-1]=new R(V.originalLineStart,F.originalLineEnd,V.modifiedLineStart,F.modifiedLineEnd),M=M.concat(P.slice(1))):(T[x++]=new O(M),M=P)}return T[x++]=new O(M),T},t.prototype._findDiffIndex=function(e){for(var t=e.lineNumber,i=0,o=this._diffs.length;i<o;i++){var n=this._diffs[i].entries;if(t<=n[n.length-1].modifiedLineEnd)return i}return 0},t.prototype._render=function(){var e=this._diffEditor.getOriginalEditor().getOptions(),i=this._diffEditor.getModifiedEditor().getOptions(),r=this._diffEditor.getOriginalEditor().getModel(),a=this._diffEditor.getModifiedEditor().getModel(),s=r.getOptions(),d=a.getOptions();if(!this._isVisible||!r||!a)return n.t(this._content.domNode),this._currentDiff=null,void this.scrollbar.scanDomNode();var l=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs[l]!==this._currentDiff){this._currentDiff=this._diffs[l];var u=this._diffs[l].entries,c=document.createElement("div");c.className="diff-review-table",c.setAttribute("role","list"),h.a.applyFontInfoSlow(c,i.get(32));for(var f=0,g=0,m=0,_=0,p=0,v=u.length;p<v;p++){var D=(M=u[p]).originalLineStart,y=M.originalLineEnd,w=M.modifiedLineStart,b=M.modifiedLineEnd;0!==D&&(0===f||D<f)&&(f=D),0!==y&&(0===g||y>g)&&(g=y),0!==w&&(0===m||w<m)&&(m=w),0!==b&&(0===_||b>_)&&(_=b)}var C=document.createElement("div");C.className="diff-review-row";var E=document.createElement("div");E.className="diff-review-cell diff-review-summary";var S=g-f+1,L=_-m+1;E.appendChild(document.createTextNode(l+1+"/"+this._diffs.length+": @@ -"+f+","+S+" +"+m+","+L+" @@")),C.setAttribute("data-line",String(m));var N=function(e){return 0===e?o.a("no_lines","no lines"):1===e?o.a("one_line","1 line"):o.a("more_lines","{0} lines",e)},I=N(S),R=N(L);C.setAttribute("aria-label",o.a({key:"header",comment:["This is the ARIA label for a git diff header.","A git diff header looks like this: @@ -154,12 +159,39 @@.","That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.","Variables 0 and 1 refer to the diff index out of total number of diffs.","Variables 2 and 4 will be numbers (a line number).",'Variables 3 and 5 will be "no lines", "1 line" or "X lines", localized separately.']},"Difference {0} of {1}: original {2}, {3}, modified {4}, {5}",l+1,this._diffs.length,f,I,m,R)),C.appendChild(E),C.setAttribute("role","listitem"),c.appendChild(C);var O=m;for(p=0,v=u.length;p<v;p++){var M=u[p];t._renderSection(c,M,O,this._width,e,r,s,i,a,d),0!==M.modifiedLineStart&&(O=M.modifiedLineEnd)}n.t(this._content.domNode),this._content.domNode.appendChild(c),this.scrollbar.scanDomNode()}},t._renderSection=function(e,t,i,n,r,a,s,d,l,u){var h=t.getType(),c="diff-review-row",f="",g="diff-review-spacer";switch(h){case 1:c="diff-review-row line-insert",f=" char-insert",g="diff-review-spacer insert-sign";break;case 2:c="diff-review-row line-delete",f=" char-delete",g="diff-review-spacer delete-sign"}for(var m=t.originalLineStart,_=t.originalLineEnd,p=t.modifiedLineStart,v=t.modifiedLineEnd,D=Math.max(v-p,_-m),y=r.get(103),w=y.glyphMarginWidth+y.lineNumbersWidth,b=d.get(103),C=10+b.glyphMarginWidth+b.lineNumbersWidth,E=0;E<=D;E++){var S=0===m?0:m+E,L=0===p?0:p+E,N=document.createElement("div");N.style.minWidth=n+"px",N.className=c,N.setAttribute("role","listitem"),0!==L&&(i=L),N.setAttribute("data-line",String(i));var I=document.createElement("div");I.className="diff-review-cell",N.appendChild(I);var R=document.createElement("span");R.style.width=w+"px",R.style.minWidth=w+"px",R.className="diff-review-line-number"+f,0!==S?R.appendChild(document.createTextNode(String(S))):R.innerHTML="&#160;",I.appendChild(R);var O=document.createElement("span");O.style.width=C+"px",O.style.minWidth=C+"px",O.style.paddingRight="10px",O.className="diff-review-line-number"+f,0!==L?O.appendChild(document.createTextNode(String(L))):O.innerHTML="&#160;",I.appendChild(O);var M=document.createElement("span");M.className=g,M.innerHTML="&#160;&#160;",I.appendChild(M);var T=void 0;0!==L?(I.insertAdjacentHTML("beforeend",this._renderLine(l,d,u.tabSize,L)),T=l.getLineContent(L)):(I.insertAdjacentHTML("beforeend",this._renderLine(a,r,s.tabSize,S)),T=a.getLineContent(S)),0===T.length&&(T=o.a("blankLine","blank"));var x="";switch(h){case 0:x=o.a("equalLine","original {0}, modified {1}: {2}",S,L,T);break;case 1:x=o.a("insertLine","+ modified {0}: {1}",L,T);break;case 2:x=o.a("deleteLine","- original {0}: {1}",S,T)}N.setAttribute("aria-label",x),e.appendChild(N)}},t._renderLine=function(e,t,i,o){var n=e.getLineContent(o),r=t.get(32),a=new Uint32Array(2);a[0]=n.length,a[1]=16793600;var s=new y.a(a,n),d=E.d.isBasicASCII(n,e.mightContainNonBasicASCII()),l=E.d.containsRTL(n,d,e.mightContainRTL());return Object(C.e)(new C.c(r.isMonospace&&!t.get(22),r.canUseHalfwidthRightwardsArrow,n,!1,d,l,0,s,[],i,r.spaceWidth,t.get(84),t.get(70),t.get(66),t.get(33)!==D.d.OFF,null)).html},t}(l.a);Object(N.e)((function(e,t){var i=e.getColor(b.k);i&&t.addRule(".monaco-diff-editor .diff-review-line-number { color: "+i+"; }");var o=e.getColor(L.Vb);o&&t.addRule(".monaco-diff-editor .diff-review-shadow { box-shadow: "+o+" 0 -6px 6px -6px inset; }")}));var T=function(e){function t(){return e.call(this,{id:"editor.action.diffReview.next",label:o.a("editor.action.diffReview.next","Go to Next Difference"),alias:"Go to Next Difference",precondition:S.a.has("isInDiffEditor"),kbOpts:{kbExpr:null,primary:65,weight:100}})||this}return I(t,e),t.prototype.run=function(e,t){var i=P(e);i&&i.diffReviewNext()},t}(v.b),x=function(e){function t(){return e.call(this,{id:"editor.action.diffReview.prev",label:o.a("editor.action.diffReview.prev","Go to Previous Difference"),alias:"Go to Previous Difference",precondition:S.a.has("isInDiffEditor"),kbOpts:{kbExpr:null,primary:1089,weight:100}})||this}return I(t,e),t.prototype.run=function(e,t){var i=P(e);i&&i.diffReviewPrev()},t}(v.b);function P(e){for(var t=e.get(f.a).listDiffEditors(),i=0,o=t.length;i<o;i++){var n=t[i];if(n.hasWidgetFocus())return n}return null}Object(v.f)(T),Object(v.f)(x);var V=i(3),F=i(236),W=i(47),A=i(31),H=i(101),k=i(217),j=i(176),U=i(20),B=i(168),Z=i(59),z=i(86),q=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),K=function(e,t,i,o){return new(i||(i=Promise))((function(n,r){function a(e){try{d(o.next(e))}catch(t){r(t)}}function s(e){try{d(o.throw(e))}catch(t){r(t)}}function d(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,s)}d((o=o.apply(e,t||[])).next())}))},G=function(e,t){var i,o,n,r,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(n=2&r[0]?o.return:r[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,r[1])).done)return n;switch(o=0,n&&(r=[2&r[0],n.value]),r[0]){case 0:case 1:n=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(n=(n=a.trys).length>0&&n[n.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!n||r[1]>n[0]&&r[1]<n[3])){a.label=r[1];break}if(6===r[0]&&a.label<n[1]){a.label=n[1],n=r;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(r);break}n[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(s){r=[6,s],o=0}finally{i=n=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}},X=function(e){function t(t,i,r,a,s,d){var l=e.call(this)||this;l._viewZoneId=t,l._marginDomNode=i,l.editor=r,l.diff=a,l._contextMenuService=s,l._clipboardService=d,l._visibility=!1,l._marginDomNode.style.zIndex="10",l._diffActions=document.createElement("div"),l._diffActions.className="lightbulb-glyph",l._diffActions.style.position="absolute";var u=r.getOption(47),h=r.getModel().getEOL();l._diffActions.style.right="0px",l._diffActions.style.visibility="hidden",l._diffActions.style.height=u+"px",l._diffActions.style.lineHeight=u+"px",l._marginDomNode.appendChild(l._diffActions);var c=[];c.push(new p.a("diff.clipboard.copyDeletedContent",a.originalEndLineNumber>a.modifiedStartLineNumber?o.a("diff.clipboard.copyDeletedLinesContent.label","Copy deleted lines"):o.a("diff.clipboard.copyDeletedLinesContent.single.label","Copy deleted line"),void 0,!0,(function(){return K(l,void 0,void 0,(function(){return G(this,(function(e){switch(e.label){case 0:return[4,this._clipboardService.writeText(a.originalContent.join(h)+h)];case 1:return e.sent(),[2]}}))}))})));var f=0,g=void 0;a.originalEndLineNumber>a.modifiedStartLineNumber&&(g=new p.a("diff.clipboard.copyDeletedLineContent",o.a("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",a.originalStartLineNumber),void 0,!0,(function(){return K(l,void 0,void 0,(function(){return G(this,(function(e){switch(e.label){case 0:return[4,this._clipboardService.writeText(a.originalContent[f])];case 1:return e.sent(),[2]}}))}))})),c.push(g)),r.getOption(65)||c.push(new p.a("diff.inline.revertChange",o.a("diff.inline.revertChange.label","Revert this change"),void 0,!0,(function(){return K(l,void 0,void 0,(function(){var e;return G(this,(function(t){return 0===a.modifiedEndLineNumber?(e=r.getModel().getLineMaxColumn(a.modifiedStartLineNumber),r.executeEdits("diffEditor",[{range:new V.a(a.modifiedStartLineNumber,e,a.modifiedStartLineNumber,e),text:h+a.originalContent.join(h)}])):(e=r.getModel().getLineMaxColumn(a.modifiedEndLineNumber),r.executeEdits("diffEditor",[{range:new V.a(a.modifiedStartLineNumber,1,a.modifiedEndLineNumber,e),text:a.originalContent.join(h)}])),[2]}))}))})));var m=function(e,t){l._contextMenuService.showContextMenu({getAnchor:function(){return{x:e,y:t}},getActions:function(){return g&&(g.label=o.a("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",a.originalStartLineNumber+f)),c},autoSelectFirstItem:!0})};return l._register(n.o(l._diffActions,"mousedown",(function(e){var t=n.B(l._diffActions),i=t.top,o=t.height,r=Math.floor(u/3);e.preventDefault(),m(e.posx,i+o+r)}))),l._register(r.onMouseMove((function(e){8===e.target.type||5===e.target.type?e.target.detail.viewZoneId===l._viewZoneId?(l.visibility=!0,f=l._updateLightBulbPosition(l._marginDomNode,e.event.browserEvent.y,u)):l.visibility=!1:l.visibility=!1}))),l._register(r.onMouseDown((function(e){e.event.rightButton&&(8!==e.target.type&&5!==e.target.type||e.target.detail.viewZoneId===l._viewZoneId&&(e.event.preventDefault(),f=l._updateLightBulbPosition(l._marginDomNode,e.event.browserEvent.y,u),m(e.event.posx,e.event.posy+u)))}))),l}return q(t,e),Object.defineProperty(t.prototype,"visibility",{get:function(){return this._visibility},set:function(e){this._visibility!==e&&(this._visibility=e,this._diffActions.style.visibility=e?"visible":"hidden")},enumerable:!0,configurable:!0}),t.prototype._updateLightBulbPosition=function(e,t,i){var o=t-n.B(e).top,r=Math.floor(o/i),a=r*i;return this._diffActions.style.top=a+"px",r},t}(l.a),J=i(13),Y=i(134);i.d(t,"a",(function(){return oe}));var Q=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),$=function(e,t,i,o){var n,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},ee=function(e,t){return function(i,o){t(i,o,e)}},te=function(){function e(e,t){this._contextMenuService=e,this._clipboardService=t,this._zones=[],this.inlineDiffMargins=[],this._zonesMap={},this._decorations=[]}return e.prototype.getForeignViewZones=function(e){var t=this;return e.filter((function(e){return!t._zonesMap[String(e.id)]}))},e.prototype.clean=function(e){var t=this;this._zones.length>0&&e.changeViewZones((function(e){for(var i=0,o=t._zones.length;i<o;i++)e.removeZone(t._zones[i])})),this._zones=[],this._zonesMap={},this._decorations=e.deltaDecorations(this._decorations,[])},e.prototype.apply=function(e,t,i,o){var n=this,r=o?c.c.capture(e):null;e.changeViewZones((function(t){for(var o=0,r=n._zones.length;o<r;o++)t.removeZone(n._zones[o]);o=0;for(var a=n.inlineDiffMargins.length;o<a;o++)n.inlineDiffMargins[o].dispose();n._zones=[],n._zonesMap={},n.inlineDiffMargins=[];o=0;for(var s=i.zones.length;o<s;o++){var d=i.zones[o];d.suppressMouseDown=!0;var l=t.addZone(d);n._zones.push(l),n._zonesMap[String(l)]=!0,i.zones[o].diff&&d.marginDomNode&&n._clipboardService&&(d.suppressMouseDown=!1,n.inlineDiffMargins.push(new X(l,d.marginDomNode,e,i.zones[o].diff,n._contextMenuService,n._clipboardService)))}})),r&&r.restore(e),this._decorations=e.deltaDecorations(this._decorations,i.decorations),t&&t.setZones(i.overviewZones)},e}(),ie=0,oe=function(e){function t(i,o,a,l,u,h,c,f,g,m,_){var p=e.call(this)||this;p._editorProgressService=_,p._onDidDispose=p._register(new d.a),p.onDidDispose=p._onDidDispose.event,p._onDidUpdateDiff=p._register(new d.a),p.onDidUpdateDiff=p._onDidUpdateDiff.event,p._lastOriginalWarning=null,p._lastModifiedWarning=null,p._editorWorkerService=l,p._codeEditorService=c,p._contextKeyService=p._register(u.createScoped(i)),p._contextKeyService.createKey("isInDiffEditor",!0),p._themeService=f,p._notificationService=g,p.id=++ie,p._state=0,p._updatingDiffProgress=null,p._domElement=i,o=o||{},p._renderSideBySide=!0,"undefined"!==typeof o.renderSideBySide&&(p._renderSideBySide=o.renderSideBySide),p._maxComputationTime=5e3,"undefined"!==typeof o.maxComputationTime&&(p._maxComputationTime=o.maxComputationTime),p._ignoreTrimWhitespace=!0,"undefined"!==typeof o.ignoreTrimWhitespace&&(p._ignoreTrimWhitespace=o.ignoreTrimWhitespace),p._renderIndicators=!0,"undefined"!==typeof o.renderIndicators&&(p._renderIndicators=o.renderIndicators),p._originalIsEditable=!1,"undefined"!==typeof o.originalEditable&&(p._originalIsEditable=Boolean(o.originalEditable)),p._updateDecorationsRunner=p._register(new s.d((function(){return p._updateDecorations()}),0)),p._containerDomElement=document.createElement("div"),p._containerDomElement.className=t._getClassName(p._themeService.getTheme(),p._renderSideBySide),p._containerDomElement.style.position="relative",p._containerDomElement.style.height="100%",p._domElement.appendChild(p._containerDomElement),p._overviewViewportDomElement=Object(r.b)(document.createElement("div")),p._overviewViewportDomElement.setClassName("diffViewport"),p._overviewViewportDomElement.setPosition("absolute"),p._overviewDomElement=document.createElement("div"),p._overviewDomElement.className="diffOverview",p._overviewDomElement.style.position="absolute",p._overviewDomElement.appendChild(p._overviewViewportDomElement.domNode),p._register(n.o(p._overviewDomElement,"mousedown",(function(e){p.modifiedEditor.delegateVerticalScrollbarMouseDown(e)}))),p._containerDomElement.appendChild(p._overviewDomElement),p._originalDomNode=document.createElement("div"),p._originalDomNode.className="editor original",p._originalDomNode.style.position="absolute",p._originalDomNode.style.height="100%",p._containerDomElement.appendChild(p._originalDomNode),p._modifiedDomNode=document.createElement("div"),p._modifiedDomNode.className="editor modified",p._modifiedDomNode.style.position="absolute",p._modifiedDomNode.style.height="100%",p._containerDomElement.appendChild(p._modifiedDomNode),p._beginUpdateDecorationsTimeout=-1,p._currentlyChangingViewZones=!1,p._diffComputationToken=0,p._originalEditorState=new te(m,a),p._modifiedEditorState=new te(m,a),p._isVisible=!0,p._isHandlingScrollEvent=!1,p._width=0,p._height=0,p._reviewHeight=0,p._diffComputationResult=null;var D=p._contextKeyService.createScoped();D.createKey("isInDiffLeftEditor",!0);var y=new B.a;y.set(S.c,D);var w=h.createChild(y),b=p._contextKeyService.createScoped();b.createKey("isInDiffRightEditor",!0);var C=new B.a;C.set(S.c,b);var E=h.createChild(C);p.originalEditor=p._createLeftHandSideEditor(o,w),p.modifiedEditor=p._createRightHandSideEditor(o,E),p._originalOverviewRuler=null,p._modifiedOverviewRuler=null,p._reviewPane=new M(p),p._containerDomElement.appendChild(p._reviewPane.domNode.domNode),p._containerDomElement.appendChild(p._reviewPane.shadow.domNode),p._containerDomElement.appendChild(p._reviewPane.actionBarContainer.domNode),o.automaticLayout?(p._measureDomElementToken=new s.c,p._measureDomElementToken.cancelAndSet((function(){return p._measureDomElement(!1)}),100)):p._measureDomElementToken=null,p._enableSplitViewResizing=!0,"undefined"!==typeof o.enableSplitViewResizing&&(p._enableSplitViewResizing=o.enableSplitViewResizing),p._renderSideBySide?p._setStrategy(new le(p._createDataSource(),p._enableSplitViewResizing)):p._setStrategy(new he(p._createDataSource(),p._enableSplitViewResizing)),p._register(f.onThemeChange((function(e){p._strategy&&p._strategy.applyColors(e)&&p._updateDecorationsRunner.schedule(),p._containerDomElement.className=t._getClassName(p._themeService.getTheme(),p._renderSideBySide)})));for(var L=0,N=v.d.getDiffEditorContributions();L<N.length;L++){var I=N[L];try{p._register(h.createInstance(I.ctor,p))}catch(R){Object(J.e)(R)}}return p._codeEditorService.addDiffEditor(p),p}return Q(t,e),t.prototype._setState=function(e){this._state!==e&&(this._state=e,this._updatingDiffProgress&&(this._updatingDiffProgress.done(),this._updatingDiffProgress=null),1===this._state&&(this._updatingDiffProgress=this._editorProgressService.show(!0,1e3)))},t.prototype.hasWidgetFocus=function(){return n.I(document.activeElement,this._domElement)},t.prototype.diffReviewNext=function(){this._reviewPane.next()},t.prototype.diffReviewPrev=function(){this._reviewPane.prev()},t._getClassName=function(e,t){var i="monaco-diff-editor monaco-editor-background ";return t&&(i+="side-by-side "),i+=Object(N.d)(e.type)},t.prototype._recreateOverviewRulers=function(){this._originalOverviewRuler&&(this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode()),this._originalOverviewRuler.dispose()),this.originalEditor.hasModel()&&(this._originalOverviewRuler=this.originalEditor.createOverviewRuler("original diffOverviewRuler"),this._overviewDomElement.appendChild(this._originalOverviewRuler.getDomNode())),this._modifiedOverviewRuler&&(this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode()),this._modifiedOverviewRuler.dispose()),this.modifiedEditor.hasModel()&&(this._modifiedOverviewRuler=this.modifiedEditor.createOverviewRuler("modified diffOverviewRuler"),this._overviewDomElement.appendChild(this._modifiedOverviewRuler.getDomNode())),this._layoutOverviewRulers()},t.prototype._createLeftHandSideEditor=function(e,t){var i=this,o=this._createInnerEditor(t,this._originalDomNode,this._adjustOptionsForLeftHandSide(e,this._originalIsEditable));return this._register(o.onDidScrollChange((function(e){i._isHandlingScrollEvent||(e.scrollTopChanged||e.scrollLeftChanged||e.scrollHeightChanged)&&(i._isHandlingScrollEvent=!0,i.modifiedEditor.setScrollPosition({scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}),i._isHandlingScrollEvent=!1,i._layoutOverviewViewport())}))),this._register(o.onDidChangeViewZones((function(){i._onViewZonesChanged()}))),this._register(o.onDidChangeModelContent((function(){i._isVisible&&i._beginUpdateDecorationsSoon()}))),o},t.prototype._createRightHandSideEditor=function(e,t){var i=this,o=this._createInnerEditor(t,this._modifiedDomNode,this._adjustOptionsForRightHandSide(e));return this._register(o.onDidScrollChange((function(e){i._isHandlingScrollEvent||(e.scrollTopChanged||e.scrollLeftChanged||e.scrollHeightChanged)&&(i._isHandlingScrollEvent=!0,i.originalEditor.setScrollPosition({scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}),i._isHandlingScrollEvent=!1,i._layoutOverviewViewport())}))),this._register(o.onDidChangeViewZones((function(){i._onViewZonesChanged()}))),this._register(o.onDidChangeConfiguration((function(e){e.hasChanged(32)&&o.getModel()&&i._onViewZonesChanged()}))),this._register(o.onDidChangeModelContent((function(){i._isVisible&&i._beginUpdateDecorationsSoon()}))),this._register(o.onDidChangeModelOptions((function(e){e.tabSize&&i._updateDecorationsRunner.schedule()}))),o},t.prototype._createInnerEditor=function(e,t,i){return e.createInstance(g.a,t,i,{})},t.prototype.dispose=function(){this._codeEditorService.removeDiffEditor(this),-1!==this._beginUpdateDecorationsTimeout&&(window.clearTimeout(this._beginUpdateDecorationsTimeout),this._beginUpdateDecorationsTimeout=-1),this._measureDomElementToken&&this._measureDomElementToken.dispose(),this._cleanViewZonesAndDecorations(),this._originalOverviewRuler&&(this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode()),this._originalOverviewRuler.dispose()),this._modifiedOverviewRuler&&(this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode()),this._modifiedOverviewRuler.dispose()),this._overviewDomElement.removeChild(this._overviewViewportDomElement.domNode),this._containerDomElement.removeChild(this._overviewDomElement),this._containerDomElement.removeChild(this._originalDomNode),this.originalEditor.dispose(),this._containerDomElement.removeChild(this._modifiedDomNode),this.modifiedEditor.dispose(),this._strategy.dispose(),this._containerDomElement.removeChild(this._reviewPane.domNode.domNode),this._containerDomElement.removeChild(this._reviewPane.shadow.domNode),this._containerDomElement.removeChild(this._reviewPane.actionBarContainer.domNode),this._reviewPane.dispose(),this._domElement.removeChild(this._containerDomElement),this._onDidDispose.fire(),e.prototype.dispose.call(this)},t.prototype.getId=function(){return this.getEditorType()+":"+this.id},t.prototype.getEditorType=function(){return W.a.IDiffEditor},t.prototype.getLineChanges=function(){return this._diffComputationResult?this._diffComputationResult.changes:null},t.prototype.getOriginalEditor=function(){return this.originalEditor},t.prototype.getModifiedEditor=function(){return this.modifiedEditor},t.prototype.updateOptions=function(e){var i=!1;"undefined"!==typeof e.renderSideBySide&&this._renderSideBySide!==e.renderSideBySide&&(this._renderSideBySide=e.renderSideBySide,i=!0),"undefined"!==typeof e.maxComputationTime&&(this._maxComputationTime=e.maxComputationTime,this._isVisible&&this._beginUpdateDecorationsSoon());var o=!1;"undefined"!==typeof e.ignoreTrimWhitespace&&this._ignoreTrimWhitespace!==e.ignoreTrimWhitespace&&(this._ignoreTrimWhitespace=e.ignoreTrimWhitespace,o=!0),"undefined"!==typeof e.renderIndicators&&this._renderIndicators!==e.renderIndicators&&(this._renderIndicators=e.renderIndicators,o=!0),o&&this._beginUpdateDecorations(),"undefined"!==typeof e.originalEditable&&(this._originalIsEditable=Boolean(e.originalEditable)),this.modifiedEditor.updateOptions(this._adjustOptionsForRightHandSide(e)),this.originalEditor.updateOptions(this._adjustOptionsForLeftHandSide(e,this._originalIsEditable)),"undefined"!==typeof e.enableSplitViewResizing&&(this._enableSplitViewResizing=e.enableSplitViewResizing),this._strategy.setEnableSplitViewResizing(this._enableSplitViewResizing),i&&(this._renderSideBySide?this._setStrategy(new le(this._createDataSource(),this._enableSplitViewResizing)):this._setStrategy(new he(this._createDataSource(),this._enableSplitViewResizing)),this._containerDomElement.className=t._getClassName(this._themeService.getTheme(),this._renderSideBySide))},t.prototype.getModel=function(){return{original:this.originalEditor.getModel(),modified:this.modifiedEditor.getModel()}},t.prototype.setModel=function(e){if(e&&(!e.original||!e.modified))throw new Error(e.original?"DiffEditorWidget.setModel: Modified model is null":"DiffEditorWidget.setModel: Original model is null");this._cleanViewZonesAndDecorations(),this.originalEditor.setModel(e?e.original:null),this.modifiedEditor.setModel(e?e.modified:null),this._updateDecorationsRunner.cancel(),e&&(this.originalEditor.setScrollTop(0),this.modifiedEditor.setScrollTop(0)),this._diffComputationResult=null,this._diffComputationToken++,this._setState(0),e&&(this._recreateOverviewRulers(),this._beginUpdateDecorations()),this._layoutOverviewViewport()},t.prototype.getDomNode=function(){return this._domElement},t.prototype.getVisibleColumnFromPosition=function(e){return this.modifiedEditor.getVisibleColumnFromPosition(e)},t.prototype.getPosition=function(){return this.modifiedEditor.getPosition()},t.prototype.setPosition=function(e){this.modifiedEditor.setPosition(e)},t.prototype.revealLine=function(e,t){void 0===t&&(t=0),this.modifiedEditor.revealLine(e,t)},t.prototype.revealLineInCenter=function(e,t){void 0===t&&(t=0),this.modifiedEditor.revealLineInCenter(e,t)},t.prototype.revealLineInCenterIfOutsideViewport=function(e,t){void 0===t&&(t=0),this.modifiedEditor.revealLineInCenterIfOutsideViewport(e,t)},t.prototype.revealPosition=function(e,t){void 0===t&&(t=0),this.modifiedEditor.revealPosition(e,t)},t.prototype.revealPositionInCenter=function(e,t){void 0===t&&(t=0),this.modifiedEditor.revealPositionInCenter(e,t)},t.prototype.revealPositionInCenterIfOutsideViewport=function(e,t){void 0===t&&(t=0),this.modifiedEditor.revealPositionInCenterIfOutsideViewport(e,t)},t.prototype.getSelection=function(){return this.modifiedEditor.getSelection()},t.prototype.getSelections=function(){return this.modifiedEditor.getSelections()},t.prototype.setSelection=function(e){this.modifiedEditor.setSelection(e)},t.prototype.setSelections=function(e){this.modifiedEditor.setSelections(e)},t.prototype.revealLines=function(e,t,i){void 0===i&&(i=0),this.modifiedEditor.revealLines(e,t,i)},t.prototype.revealLinesInCenter=function(e,t,i){void 0===i&&(i=0),this.modifiedEditor.revealLinesInCenter(e,t,i)},t.prototype.revealLinesInCenterIfOutsideViewport=function(e,t,i){void 0===i&&(i=0),this.modifiedEditor.revealLinesInCenterIfOutsideViewport(e,t,i)},t.prototype.revealRange=function(e,t,i,o){void 0===t&&(t=0),void 0===i&&(i=!1),void 0===o&&(o=!0),this.modifiedEditor.revealRange(e,t,i,o)},t.prototype.revealRangeInCenter=function(e,t){void 0===t&&(t=0),this.modifiedEditor.revealRangeInCenter(e,t)},t.prototype.revealRangeInCenterIfOutsideViewport=function(e,t){void 0===t&&(t=0),this.modifiedEditor.revealRangeInCenterIfOutsideViewport(e,t)},t.prototype.revealRangeAtTop=function(e,t){void 0===t&&(t=0),this.modifiedEditor.revealRangeAtTop(e,t)},t.prototype.getSupportedActions=function(){return this.modifiedEditor.getSupportedActions()},t.prototype.saveViewState=function(){return{original:this.originalEditor.saveViewState(),modified:this.modifiedEditor.saveViewState()}},t.prototype.restoreViewState=function(e){if(e.original&&e.modified){var t=e;this.originalEditor.restoreViewState(t.original),this.modifiedEditor.restoreViewState(t.modified)}},t.prototype.layout=function(e){this._measureDomElement(!1,e)},t.prototype.focus=function(){this.modifiedEditor.focus()},t.prototype.hasTextFocus=function(){return this.originalEditor.hasTextFocus()||this.modifiedEditor.hasTextFocus()},t.prototype.trigger=function(e,t,i){this.modifiedEditor.trigger(e,t,i)},t.prototype.changeDecorations=function(e){return this.modifiedEditor.changeDecorations(e)},t.prototype._measureDomElement=function(e,t){if((t=t||{width:this._containerDomElement.clientWidth,height:this._containerDomElement.clientHeight}).width<=0)return this._width=0,this._height=0,void(this._reviewHeight=0);(e||t.width!==this._width||t.height!==this._height)&&(this._width=t.width,this._height=t.height,this._reviewHeight=this._reviewPane.isVisible()?this._height:0,this._doLayout())},t.prototype._layoutOverviewRulers=function(){if(this._originalOverviewRuler&&this._modifiedOverviewRuler){var e=t.ENTIRE_DIFF_OVERVIEW_WIDTH-2*t.ONE_OVERVIEW_WIDTH;this.modifiedEditor.getLayoutInfo()&&(this._originalOverviewRuler.setLayout({top:0,width:t.ONE_OVERVIEW_WIDTH,right:e+t.ONE_OVERVIEW_WIDTH,height:this._height-this._reviewHeight}),this._modifiedOverviewRuler.setLayout({top:0,right:0,width:t.ONE_OVERVIEW_WIDTH,height:this._height-this._reviewHeight}))}},t.prototype._onViewZonesChanged=function(){this._currentlyChangingViewZones||this._updateDecorationsRunner.schedule()},t.prototype._beginUpdateDecorationsSoon=function(){var e=this;-1!==this._beginUpdateDecorationsTimeout&&(window.clearTimeout(this._beginUpdateDecorationsTimeout),this._beginUpdateDecorationsTimeout=-1),this._beginUpdateDecorationsTimeout=window.setTimeout((function(){return e._beginUpdateDecorations()}),t.UPDATE_DIFF_DECORATIONS_DELAY)},t._equals=function(e,t){return!e&&!t||!(!e||!t)&&e.toString()===t.toString()},t.prototype._beginUpdateDecorations=function(){var e=this;this._beginUpdateDecorationsTimeout=-1;var i=this.originalEditor.getModel(),n=this.modifiedEditor.getModel();if(i&&n){this._diffComputationToken++;var r=this._diffComputationToken;this._setState(1),this._editorWorkerService.canComputeDiff(i.uri,n.uri)?this._editorWorkerService.computeDiff(i.uri,n.uri,this._ignoreTrimWhitespace,this._maxComputationTime).then((function(t){r===e._diffComputationToken&&i===e.originalEditor.getModel()&&n===e.modifiedEditor.getModel()&&(e._setState(2),e._diffComputationResult=t,e._updateDecorationsRunner.schedule(),e._onDidUpdateDiff.fire())}),(function(t){r===e._diffComputationToken&&i===e.originalEditor.getModel()&&n===e.modifiedEditor.getModel()&&(e._setState(2),e._diffComputationResult=null,e._updateDecorationsRunner.schedule())})):t._equals(i.uri,this._lastOriginalWarning)&&t._equals(n.uri,this._lastModifiedWarning)||(this._lastOriginalWarning=i.uri,this._lastModifiedWarning=n.uri,this._notificationService.warn(o.a("diff.tooLarge","Cannot compare files because one file is too large.")))}},t.prototype._cleanViewZonesAndDecorations=function(){this._originalEditorState.clean(this.originalEditor),this._modifiedEditorState.clean(this.modifiedEditor)},t.prototype._updateDecorations=function(){if(this.originalEditor.getModel()&&this.modifiedEditor.getModel()&&this._originalOverviewRuler&&this._modifiedOverviewRuler){var e=this._diffComputationResult?this._diffComputationResult.changes:[],t=this._originalEditorState.getForeignViewZones(this.originalEditor.getWhitespaces()),i=this._modifiedEditorState.getForeignViewZones(this.modifiedEditor.getWhitespaces()),o=this._strategy.getEditorsDiffDecorations(e,this._ignoreTrimWhitespace,this._renderIndicators,t,i,this.originalEditor,this.modifiedEditor);try{this._currentlyChangingViewZones=!0,this._originalEditorState.apply(this.originalEditor,this._originalOverviewRuler,o.original,!1),this._modifiedEditorState.apply(this.modifiedEditor,this._modifiedOverviewRuler,o.modified,!0)}finally{this._currentlyChangingViewZones=!1}}},t.prototype._adjustOptionsForSubEditor=function(e){var t=u.c(e||{});return t.inDiffEditor=!0,t.wordWrap="off",t.wordWrapMinified=!1,t.automaticLayout=!1,t.scrollbar=t.scrollbar||{},t.scrollbar.vertical="visible",t.folding=!1,t.codeLens=!1,t.fixedOverflowWidgets=!0,t.minimap||(t.minimap={}),t.minimap.enabled=!1,t},t.prototype._adjustOptionsForLeftHandSide=function(e,t){var i=this._adjustOptionsForSubEditor(e);return i.readOnly=!t,i.extraEditorClassName="original-in-monaco-diff-editor",i},t.prototype._adjustOptionsForRightHandSide=function(e){var i=this._adjustOptionsForSubEditor(e);return i.revealHorizontalRightPadding=D.e.revealHorizontalRightPadding.defaultValue+t.ENTIRE_DIFF_OVERVIEW_WIDTH,i.scrollbar.verticalHasArrows=!1,i.extraEditorClassName="modified-in-monaco-diff-editor",i},t.prototype.doLayout=function(){this._measureDomElement(!0)},t.prototype._doLayout=function(){var e=this._strategy.layout();this._originalDomNode.style.width=e+"px",this._originalDomNode.style.left="0px",this._modifiedDomNode.style.width=this._width-e+"px",this._modifiedDomNode.style.left=e+"px",this._overviewDomElement.style.top="0px",this._overviewDomElement.style.height=this._height-this._reviewHeight+"px",this._overviewDomElement.style.width=t.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",this._overviewDomElement.style.left=this._width-t.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",this._overviewViewportDomElement.setWidth(t.ENTIRE_DIFF_OVERVIEW_WIDTH),this._overviewViewportDomElement.setHeight(30),this.originalEditor.layout({width:e,height:this._height-this._reviewHeight}),this.modifiedEditor.layout({width:this._width-e-t.ENTIRE_DIFF_OVERVIEW_WIDTH,height:this._height-this._reviewHeight}),(this._originalOverviewRuler||this._modifiedOverviewRuler)&&this._layoutOverviewRulers(),this._reviewPane.layout(this._height-this._reviewHeight,this._width,this._reviewHeight),this._layoutOverviewViewport()},t.prototype._layoutOverviewViewport=function(){var e=this._computeOverviewViewport();e?(this._overviewViewportDomElement.setTop(e.top),this._overviewViewportDomElement.setHeight(e.height)):(this._overviewViewportDomElement.setTop(0),this._overviewViewportDomElement.setHeight(0))},t.prototype._computeOverviewViewport=function(){var e=this.modifiedEditor.getLayoutInfo();if(!e)return null;var t=this.modifiedEditor.getScrollTop(),i=this.modifiedEditor.getScrollHeight(),o=Math.max(0,e.contentHeight),n=Math.max(0,o-0),r=i>0?n/i:0;return{height:Math.max(0,Math.floor(e.contentHeight*r)),top:Math.floor(t*r)}},t.prototype._createDataSource=function(){var e=this;return{getWidth:function(){return e._width},getHeight:function(){return e._height-e._reviewHeight},getContainerDomNode:function(){return e._containerDomElement},relayoutEditors:function(){e._doLayout()},getOriginalEditor:function(){return e.originalEditor},getModifiedEditor:function(){return e.modifiedEditor}}},t.prototype._setStrategy=function(e){this._strategy&&this._strategy.dispose(),this._strategy=e,e.applyColors(this._themeService.getTheme()),this._diffComputationResult&&this._updateDecorations(),this._measureDomElement(!0)},t.prototype._getLineChangeAtOrBeforeLineNumber=function(e,t){var i=this._diffComputationResult?this._diffComputationResult.changes:[];if(0===i.length||e<t(i[0]))return null;for(var o=0,n=i.length-1;o<n;){var r=Math.floor((o+n)/2),a=t(i[r]),s=r+1<=n?t(i[r+1]):1073741824;e<a?n=r-1:e>=s?o=r+1:(o=r,n=r)}return i[o]},t.prototype._getEquivalentLineForOriginalLineNumber=function(e){var t=this._getLineChangeAtOrBeforeLineNumber(e,(function(e){return e.originalStartLineNumber}));if(!t)return e;var i=t.originalStartLineNumber+(t.originalEndLineNumber>0?-1:0),o=t.modifiedStartLineNumber+(t.modifiedEndLineNumber>0?-1:0),n=t.originalEndLineNumber>0?t.originalEndLineNumber-t.originalStartLineNumber+1:0,r=t.modifiedEndLineNumber>0?t.modifiedEndLineNumber-t.modifiedStartLineNumber+1:0,a=e-i;return a<=n?o+Math.min(a,r):o+r-n+a},t.prototype._getEquivalentLineForModifiedLineNumber=function(e){var t=this._getLineChangeAtOrBeforeLineNumber(e,(function(e){return e.modifiedStartLineNumber}));if(!t)return e;var i=t.originalStartLineNumber+(t.originalEndLineNumber>0?-1:0),o=t.modifiedStartLineNumber+(t.modifiedEndLineNumber>0?-1:0),n=t.originalEndLineNumber>0?t.originalEndLineNumber-t.originalStartLineNumber+1:0,r=t.modifiedEndLineNumber>0?t.modifiedEndLineNumber-t.modifiedStartLineNumber+1:0,a=e-o;return a<=r?i+Math.min(a,n):i+n-r+a},t.prototype.getDiffLineInformationForOriginal=function(e){return this._diffComputationResult?{equivalentLineNumber:this._getEquivalentLineForOriginalLineNumber(e)}:null},t.prototype.getDiffLineInformationForModified=function(e){return this._diffComputationResult?{equivalentLineNumber:this._getEquivalentLineForModifiedLineNumber(e)}:null},t.ONE_OVERVIEW_WIDTH=15,t.ENTIRE_DIFF_OVERVIEW_WIDTH=30,t.UPDATE_DIFF_DECORATIONS_DELAY=200,t=$([ee(3,H.a),ee(4,S.c),ee(5,U.a),ee(6,f.a),ee(7,N.c),ee(8,Z.a),ee(9,z.a),ee(10,Y.a)],t)}(l.a),ne=function(e){function t(t){var i=e.call(this)||this;return i._dataSource=t,i._insertColor=null,i._removeColor=null,i}return Q(t,e),t.prototype.applyColors=function(e){var t=(e.getColor(L.j)||L.g).transparent(2),i=(e.getColor(L.l)||L.h).transparent(2),o=!t.equals(this._insertColor)||!i.equals(this._removeColor);return this._insertColor=t,this._removeColor=i,o},t.prototype.getEditorsDiffDecorations=function(e,t,i,o,n,r,a){n=n.sort((function(e,t){return e.afterLineNumber-t.afterLineNumber})),o=o.sort((function(e,t){return e.afterLineNumber-t.afterLineNumber}));var s=this._getViewZones(e,o,n,r,a,i),d=this._getOriginalEditorDecorations(e,t,i,r,a),l=this._getModifiedEditorDecorations(e,t,i,r,a);return{original:{decorations:d.decorations,overviewZones:d.overviewZones,zones:s.original},modified:{decorations:l.decorations,overviewZones:l.overviewZones,zones:s.modified}}},t}(l.a),re=function(){function e(e){this._source=e,this._index=-1,this.current=null,this.advance()}return e.prototype.advance=function(){this._index++,this._index<this._source.length?this.current=this._source[this._index]:this.current=null},e}(),ae=function(){function e(e,t,i,o,n){this.lineChanges=e,this.originalForeignVZ=t,this.originalLineHeight=i,this.modifiedForeignVZ=o,this.modifiedLineHeight=n}return e.prototype.getViewZones=function(){for(var t=[],i=[],o=0,n=0,r=0,a=0,s=0,d=0,l=function(e,t){return e.afterLineNumber-t.afterLineNumber},u=function(e,t){if(null===t.domNode&&e.length>0){var i=e[e.length-1];if(i.afterLineNumber===t.afterLineNumber&&null===i.domNode)return void(i.heightInLines+=t.heightInLines)}e.push(t)},h=new re(this.modifiedForeignVZ),c=new re(this.originalForeignVZ),f=0,g=this.lineChanges.length;f<=g;f++){var m=f<g?this.lineChanges[f]:null;null!==m?(r=m.originalStartLineNumber+(m.originalEndLineNumber>0?-1:0),a=m.modifiedStartLineNumber+(m.modifiedEndLineNumber>0?-1:0),n=m.originalEndLineNumber>0?m.originalEndLineNumber-m.originalStartLineNumber+1:0,o=m.modifiedEndLineNumber>0?m.modifiedEndLineNumber-m.modifiedStartLineNumber+1:0,s=Math.max(m.originalStartLineNumber,m.originalEndLineNumber),d=Math.max(m.modifiedStartLineNumber,m.modifiedEndLineNumber)):(s=r+=1e7+n,d=a+=1e7+o);for(var _,p=[],v=[];h.current&&h.current.afterLineNumber<=d;){var D=void 0;D=h.current.afterLineNumber<=a?r-a+h.current.afterLineNumber:s;var y=null;m&&m.modifiedStartLineNumber<=h.current.afterLineNumber&&h.current.afterLineNumber<=m.modifiedEndLineNumber&&(y=this._createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion()),p.push({afterLineNumber:D,heightInLines:h.current.height/this.modifiedLineHeight,domNode:null,marginDomNode:y}),h.advance()}for(;c.current&&c.current.afterLineNumber<=s;){D=void 0;D=c.current.afterLineNumber<=r?a-r+c.current.afterLineNumber:d,v.push({afterLineNumber:D,heightInLines:c.current.height/this.originalLineHeight,domNode:null}),c.advance()}if(null!==m&&fe(m))(_=this._produceOriginalFromDiff(m,n,o))&&p.push(_);if(null!==m&&ge(m))(_=this._produceModifiedFromDiff(m,n,o))&&v.push(_);var w=0,b=0;for(p=p.sort(l),v=v.sort(l);w<p.length&&b<v.length;){var C=p[w],E=v[b],S=C.afterLineNumber-r,L=E.afterLineNumber-a;S<L?(u(t,C),w++):L<S?(u(i,E),b++):C.shouldNotShrink?(u(t,C),w++):E.shouldNotShrink?(u(i,E),b++):C.heightInLines>=E.heightInLines?(C.heightInLines-=E.heightInLines,b++):(E.heightInLines-=C.heightInLines,w++)}for(;w<p.length;)u(t,p[w]),w++;for(;b<v.length;)u(i,v[b]),b++}return{original:e._ensureDomNodes(t),modified:e._ensureDomNodes(i)}},e._ensureDomNodes=function(e){return e.map((function(e){return e.domNode||(e.domNode=function(){var e=document.createElement("div");return e.className="diagonal-fill",e}()),e}))},e}();function se(e,t,i,o,n){return{range:new V.a(e,t,i,o),options:n}}var de={charDelete:A.a.register({className:"char-delete"}),charDeleteWholeLine:A.a.register({className:"char-delete",isWholeLine:!0}),charInsert:A.a.register({className:"char-insert"}),charInsertWholeLine:A.a.register({className:"char-insert",isWholeLine:!0}),lineInsert:A.a.register({className:"line-insert",marginClassName:"line-insert",isWholeLine:!0}),lineInsertWithSign:A.a.register({className:"line-insert",linesDecorationsClassName:"insert-sign",marginClassName:"line-insert",isWholeLine:!0}),lineDelete:A.a.register({className:"line-delete",marginClassName:"line-delete",isWholeLine:!0}),lineDeleteWithSign:A.a.register({className:"line-delete",linesDecorationsClassName:"delete-sign",marginClassName:"line-delete",isWholeLine:!0}),lineDeleteMargin:A.a.register({marginClassName:"line-delete"})},le=function(e){function t(t,i){var o=e.call(this,t)||this;return o._disableSash=!1===i,o._sashRatio=null,o._sashPosition=null,o._startSashPosition=null,o._sash=o._register(new a.a(o._dataSource.getContainerDomNode(),o)),o._disableSash&&(o._sash.state=0),o._sash.onDidStart((function(){return o.onSashDragStart()})),o._sash.onDidChange((function(e){return o.onSashDrag(e)})),o._sash.onDidEnd((function(){return o.onSashDragEnd()})),o._sash.onDidReset((function(){return o.onSashReset()})),o}return Q(t,e),t.prototype.setEnableSplitViewResizing=function(e){var t=!1===e;this._disableSash!==t&&(this._disableSash=t,this._sash.state=this._disableSash?0:3)},t.prototype.layout=function(e){void 0===e&&(e=this._sashRatio);var i=this._dataSource.getWidth()-oe.ENTIRE_DIFF_OVERVIEW_WIDTH,o=Math.floor((e||.5)*i),n=Math.floor(.5*i);return o=this._disableSash?n:o||n,i>2*t.MINIMUM_EDITOR_WIDTH?(o<t.MINIMUM_EDITOR_WIDTH&&(o=t.MINIMUM_EDITOR_WIDTH),o>i-t.MINIMUM_EDITOR_WIDTH&&(o=i-t.MINIMUM_EDITOR_WIDTH)):o=n,this._sashPosition!==o&&(this._sashPosition=o,this._sash.layout()),this._sashPosition},t.prototype.onSashDragStart=function(){this._startSashPosition=this._sashPosition},t.prototype.onSashDrag=function(e){var t=this._dataSource.getWidth()-oe.ENTIRE_DIFF_OVERVIEW_WIDTH,i=this.layout((this._startSashPosition+(e.currentX-e.startX))/t);this._sashRatio=i/t,this._dataSource.relayoutEditors()},t.prototype.onSashDragEnd=function(){this._sash.layout()},t.prototype.onSashReset=function(){this._sashRatio=.5,this._dataSource.relayoutEditors(),this._sash.layout()},t.prototype.getVerticalSashTop=function(e){return 0},t.prototype.getVerticalSashLeft=function(e){return this._sashPosition},t.prototype.getVerticalSashHeight=function(e){return this._dataSource.getHeight()},t.prototype._getViewZones=function(e,t,i,o,n){return new ue(e,t,o.getOption(47),i,n.getOption(47)).getViewZones()},t.prototype._getOriginalEditorDecorations=function(e,t,i,o,n){for(var r=String(this._removeColor),a={decorations:[],overviewZones:[]},s=o.getModel(),d=0,l=e.length;d<l;d++){var u=e[d];if(ge(u)&&(a.decorations.push({range:new V.a(u.originalStartLineNumber,1,u.originalEndLineNumber,1073741824),options:i?de.lineDeleteWithSign:de.lineDelete}),fe(u)&&u.charChanges||a.decorations.push(se(u.originalStartLineNumber,1,u.originalEndLineNumber,1073741824,de.charDeleteWholeLine)),a.overviewZones.push(new k.a(u.originalStartLineNumber,u.originalEndLineNumber,r)),u.charChanges))for(var h=0,c=u.charChanges.length;h<c;h++){var f=u.charChanges[h];if(ge(f))if(t)for(var g=f.originalStartLineNumber;g<=f.originalEndLineNumber;g++){var m=void 0,_=void 0;m=g===f.originalStartLineNumber?f.originalStartColumn:s.getLineFirstNonWhitespaceColumn(g),_=g===f.originalEndLineNumber?f.originalEndColumn:s.getLineLastNonWhitespaceColumn(g),a.decorations.push(se(g,m,g,_,de.charDelete))}else a.decorations.push(se(f.originalStartLineNumber,f.originalStartColumn,f.originalEndLineNumber,f.originalEndColumn,de.charDelete))}}return a},t.prototype._getModifiedEditorDecorations=function(e,t,i,o,n){for(var r=String(this._insertColor),a={decorations:[],overviewZones:[]},s=n.getModel(),d=0,l=e.length;d<l;d++){var u=e[d];if(fe(u)&&(a.decorations.push({range:new V.a(u.modifiedStartLineNumber,1,u.modifiedEndLineNumber,1073741824),options:i?de.lineInsertWithSign:de.lineInsert}),ge(u)&&u.charChanges||a.decorations.push(se(u.modifiedStartLineNumber,1,u.modifiedEndLineNumber,1073741824,de.charInsertWholeLine)),a.overviewZones.push(new k.a(u.modifiedStartLineNumber,u.modifiedEndLineNumber,r)),u.charChanges))for(var h=0,c=u.charChanges.length;h<c;h++){var f=u.charChanges[h];if(fe(f))if(t)for(var g=f.modifiedStartLineNumber;g<=f.modifiedEndLineNumber;g++){var m=void 0,_=void 0;m=g===f.modifiedStartLineNumber?f.modifiedStartColumn:s.getLineFirstNonWhitespaceColumn(g),_=g===f.modifiedEndLineNumber?f.modifiedEndColumn:s.getLineLastNonWhitespaceColumn(g),a.decorations.push(se(g,m,g,_,de.charInsert))}else a.decorations.push(se(f.modifiedStartLineNumber,f.modifiedStartColumn,f.modifiedEndLineNumber,f.modifiedEndColumn,de.charInsert))}}return a},t.MINIMUM_EDITOR_WIDTH=100,t}(ne),ue=function(e){function t(t,i,o,n,r){return e.call(this,t,i,o,n,r)||this}return Q(t,e),t.prototype._createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion=function(){return null},t.prototype._produceOriginalFromDiff=function(e,t,i){return i>t?{afterLineNumber:Math.max(e.originalStartLineNumber,e.originalEndLineNumber),heightInLines:i-t,domNode:null}:null},t.prototype._produceModifiedFromDiff=function(e,t,i){return t>i?{afterLineNumber:Math.max(e.modifiedStartLineNumber,e.modifiedEndLineNumber),heightInLines:t-i,domNode:null}:null},t}(ae),he=function(e){function t(t,i){var o=e.call(this,t)||this;return o.decorationsLeft=t.getOriginalEditor().getLayoutInfo().decorationsLeft,o._register(t.getOriginalEditor().onDidLayoutChange((function(e){o.decorationsLeft!==e.decorationsLeft&&(o.decorationsLeft=e.decorationsLeft,t.relayoutEditors())}))),o}return Q(t,e),t.prototype.setEnableSplitViewResizing=function(e){},t.prototype._getViewZones=function(e,t,i,o,n,r){return new ce(e,t,i,o,n,r).getViewZones()},t.prototype._getOriginalEditorDecorations=function(e,t,i,o,n){for(var r=String(this._removeColor),a={decorations:[],overviewZones:[]},s=0,d=e.length;s<d;s++){var l=e[s];ge(l)&&(a.decorations.push({range:new V.a(l.originalStartLineNumber,1,l.originalEndLineNumber,1073741824),options:de.lineDeleteMargin}),a.overviewZones.push(new k.a(l.originalStartLineNumber,l.originalEndLineNumber,r)))}return a},t.prototype._getModifiedEditorDecorations=function(e,t,i,o,n){for(var r=String(this._insertColor),a={decorations:[],overviewZones:[]},s=n.getModel(),d=0,l=e.length;d<l;d++){var u=e[d];if(fe(u))if(a.decorations.push({range:new V.a(u.modifiedStartLineNumber,1,u.modifiedEndLineNumber,1073741824),options:i?de.lineInsertWithSign:de.lineInsert}),a.overviewZones.push(new k.a(u.modifiedStartLineNumber,u.modifiedEndLineNumber,r)),u.charChanges)for(var h=0,c=u.charChanges.length;h<c;h++){var f=u.charChanges[h];if(fe(f))if(t)for(var g=f.modifiedStartLineNumber;g<=f.modifiedEndLineNumber;g++){var m=void 0,_=void 0;m=g===f.modifiedStartLineNumber?f.modifiedStartColumn:s.getLineFirstNonWhitespaceColumn(g),_=g===f.modifiedEndLineNumber?f.modifiedEndColumn:s.getLineLastNonWhitespaceColumn(g),a.decorations.push(se(g,m,g,_,de.charInsert))}else a.decorations.push(se(f.modifiedStartLineNumber,f.modifiedStartColumn,f.modifiedEndLineNumber,f.modifiedEndColumn,de.charInsert))}else a.decorations.push(se(u.modifiedStartLineNumber,1,u.modifiedEndLineNumber,1073741824,de.charInsertWholeLine))}return a},t.prototype.layout=function(){return Math.max(5,this.decorationsLeft)},t}(ne),ce=function(e){function t(t,i,o,n,r,a){var s=e.call(this,t,i,n.getOption(47),o,r.getOption(47))||this;return s.originalModel=n.getModel(),s.modifiedEditorOptions=r.getOptions(),s.modifiedEditorTabSize=r.getModel().getOptions().tabSize,s.renderIndicators=a,s}return Q(t,e),t.prototype._createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion=function(){var e=document.createElement("div");return e.className="inline-added-margin-view-zone",e},t.prototype._produceOriginalFromDiff=function(e,t,i){var o=document.createElement("div");return o.className="inline-added-margin-view-zone",{afterLineNumber:Math.max(e.originalStartLineNumber,e.originalEndLineNumber),heightInLines:i,domNode:document.createElement("div"),marginDomNode:o}},t.prototype._produceModifiedFromDiff=function(e,t,i){var o=[];if(e.charChanges)for(var n=0,r=e.charChanges.length;n<r;n++){var a=e.charChanges[n];ge(a)&&o.push(new E.a(new V.a(a.originalStartLineNumber,a.originalStartColumn,a.originalEndLineNumber,a.originalEndColumn),"char-delete",0))}for(var s=Object(F.a)(1e4),d=[],l=this.modifiedEditorOptions.get(103),u=this.modifiedEditorOptions.get(32),c=l.decorationsWidth,f=this.modifiedEditorOptions.get(47),g=u.typicalHalfwidthCharacterWidth,m=0,_=[],p=e.originalStartLineNumber;p<=e.originalEndLineNumber;p++)if(m=Math.max(m,this._renderOriginalLine(p-e.originalStartLineNumber,this.originalModel,this.modifiedEditorOptions,this.modifiedEditorTabSize,p,o,s)),_.push(this.originalModel.getLineContent(p)),this.renderIndicators){var v=p-e.originalStartLineNumber;d=d.concat(['<div class="delete-sign" style="position:absolute;top:'+v*f+"px;width:"+c+"px;height:"+f+'px;right:0;"></div>'])}m+=this.modifiedEditorOptions.get(75);var D=document.createElement("div");D.className="view-lines line-delete",D.innerHTML=s.build(),h.a.applyFontInfoSlow(D,u);var y=document.createElement("div");return y.className="inline-deleted-margin-view-zone",y.innerHTML=d.join(""),h.a.applyFontInfoSlow(y,u),{shouldNotShrink:!0,afterLineNumber:0===e.modifiedEndLineNumber?e.modifiedStartLineNumber:e.modifiedStartLineNumber-1,heightInLines:t,minWidthInPx:m*g,domNode:D,marginDomNode:y,diff:{originalStartLineNumber:e.originalStartLineNumber,originalEndLineNumber:e.originalEndLineNumber,modifiedStartLineNumber:e.modifiedStartLineNumber,modifiedEndLineNumber:e.modifiedEndLineNumber,originalContent:_}}},t.prototype._renderOriginalLine=function(e,t,i,o,n,r,a){var s=t.getLineTokens(n),d=s.getLineContent(),l=i.get(32),u=j.a.filter(r,n,1,d.length+1);a.appendASCIIString('<div class="view-line'),0===r.length&&a.appendASCIIString(" char-delete"),a.appendASCIIString('" style="top:'),a.appendASCIIString(String(e*i.get(47))),a.appendASCIIString('px;width:1000000px;">');var h=E.d.isBasicASCII(d,t.mightContainNonBasicASCII()),c=E.d.containsRTL(d,h,t.mightContainRTL()),f=Object(C.d)(new C.c(l.isMonospace&&!i.get(22),l.canUseHalfwidthRightwardsArrow,d,!1,h,c,0,s,u,o,l.spaceWidth,i.get(84),i.get(70),i.get(66),i.get(33)!==D.d.OFF,null),a);a.appendASCIIString("</div>");var g=f.characterMapping.getAbsoluteOffsets();return g.length>0?g[g.length-1]:0},t}(ae);function fe(e){return e.modifiedEndLineNumber>0}function ge(e){return e.originalEndLineNumber>0}Object(N.e)((function(e,t){var i=e.getColor(L.j);i&&(t.addRule(".monaco-editor .line-insert, .monaco-editor .char-insert { background-color: "+i+"; }"),t.addRule(".monaco-diff-editor .line-insert, .monaco-diff-editor .char-insert { background-color: "+i+"; }"),t.addRule(".monaco-editor .inline-added-margin-view-zone { background-color: "+i+"; }"));var o=e.getColor(L.l);o&&(t.addRule(".monaco-editor .line-delete, .monaco-editor .char-delete { background-color: "+o+"; }"),t.addRule(".monaco-diff-editor .line-delete, .monaco-diff-editor .char-delete { background-color: "+o+"; }"),t.addRule(".monaco-editor .inline-deleted-margin-view-zone { background-color: "+o+"; }"));var n=e.getColor(L.k);n&&t.addRule(".monaco-editor .line-insert, .monaco-editor .char-insert { border: 1px "+("hc"===e.type?"dashed":"solid")+" "+n+"; }");var r=e.getColor(L.m);r&&t.addRule(".monaco-editor .line-delete, .monaco-editor .char-delete { border: 1px "+("hc"===e.type?"dashed":"solid")+" "+r+"; }");var a=e.getColor(L.Vb);a&&t.addRule(".monaco-diff-editor.side-by-side .editor.modified { box-shadow: -6px 0 5px -5px "+a+"; }");var s=e.getColor(L.i);s&&t.addRule(".monaco-diff-editor.side-by-side .editor.modified { border-left: 1px solid "+s+"; }")}))},673:function(e,t,i){},762:function(e,t,i){},764:function(e,t,i){}}]);
//# sourceMappingURL=30.62b92785.chunk.js.map