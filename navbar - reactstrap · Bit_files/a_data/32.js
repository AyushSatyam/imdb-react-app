(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{114:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"d",(function(){return h})),n.d(t,"c",(function(){return c})),n.d(t,"e",(function(){return d})),n.d(t,"b",(function(){return p}));var i=n(9),r=n(125),o=n(10),s=n(3),a=n(56),u=function(){function e(e,t,n,i){this.searchString=e,this.isRegex=t,this.matchCase=n,this.wordSeparators=i}return e.prototype.parseSearchRequest=function(){if(""===this.searchString)return null;var e;e=this.isRegex?function(e){if(!e||0===e.length)return!1;for(var t=0,n=e.length;t<n;t++){if(92===e.charCodeAt(t)){if(++t>=n)break;var i=e.charCodeAt(t);if(110===i||114===i||87===i||119===i)return!0}}return!1}(this.searchString):this.searchString.indexOf("\n")>=0;var t=null;try{t=i.l(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:e,global:!0,unicode:!0})}catch(o){return null}if(!t)return null;var n=!this.isRegex&&!e;return n&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(n=this.matchCase),new f(t,this.wordSeparators?Object(r.a)(this.wordSeparators):null,n?this.searchString:null)},e}();var f=function(e,t,n){this.regex=e,this.wordSeparators=t,this.simpleSearch=n};function h(e,t,n){if(!n)return new a.b(e,null);for(var i=[],r=0,o=t.length;r<o;r++)i[r]=t[r];return new a.b(e,i)}var l=function(){function e(e){for(var t=[],n=0,i=0,r=e.length;i<r;i++)10===e.charCodeAt(i)&&(t[n++]=i);this._lineFeedsOffsets=t}return e.prototype.findLineFeedCountBeforeOffset=function(e){var t=this._lineFeedsOffsets,n=0,i=t.length-1;if(-1===i)return 0;if(e<=t[0])return 0;for(;n<i;){var r=n+((i-n)/2>>0);t[r]>=e?i=r-1:t[r+1]>=e?(n=r,i=r):n=r+1}return n+1},e}(),c=function(){function e(){}return e.findMatches=function(e,t,n,i,r){var o=t.parseSearchRequest();return o?o.regex.multiline?this._doFindMatchesMultiline(e,n,new p(o.wordSeparators,o.regex),i,r):this._doFindMatchesLineByLine(e,n,o,i,r):[]},e._getMultilineMatchRange=function(e,t,n,i,r,o){var a,u,f=0;if(a=i?t+r+(f=i.findLineFeedCountBeforeOffset(r)):t+r,i){var h=i.findLineFeedCountBeforeOffset(r+o.length)-f;u=a+o.length+h}else u=a+o.length;var l=e.getPositionAt(a),c=e.getPositionAt(u);return new s.a(l.lineNumber,l.column,c.lineNumber,c.column)},e._doFindMatchesMultiline=function(e,t,n,i,r){var o,s=e.getOffsetAt(t.getStartPosition()),a=e.getValueInRange(t,1),u="\r\n"===e.getEOL()?new l(a):null,f=[],c=0;for(n.reset(0);o=n.next(a);)if(f[c++]=h(this._getMultilineMatchRange(e,s,a,u,o.index,o[0]),o,i),c>=r)return f;return f},e._doFindMatchesLineByLine=function(e,t,n,i,r){var o=[],s=0;if(t.startLineNumber===t.endLineNumber){var a=e.getLineContent(t.startLineNumber).substring(t.startColumn-1,t.endColumn-1);return s=this._findMatchesInLine(n,a,t.startLineNumber,t.startColumn-1,s,o,i,r),o}var u=e.getLineContent(t.startLineNumber).substring(t.startColumn-1);s=this._findMatchesInLine(n,u,t.startLineNumber,t.startColumn-1,s,o,i,r);for(var f=t.startLineNumber+1;f<t.endLineNumber&&s<r;f++)s=this._findMatchesInLine(n,e.getLineContent(f),f,0,s,o,i,r);if(s<r){var h=e.getLineContent(t.endLineNumber).substring(0,t.endColumn-1);s=this._findMatchesInLine(n,h,t.endLineNumber,0,s,o,i,r)}return o},e._findMatchesInLine=function(e,t,n,i,r,o,u,f){var l=e.wordSeparators;if(!u&&e.simpleSearch){for(var c=e.simpleSearch,g=c.length,_=t.length,m=-g;-1!==(m=t.indexOf(c,m+g));)if((!l||d(l,t,_,m,g))&&(o[r++]=new a.b(new s.a(n,m+1+i,n,m+1+g+i),null),r>=f))return r;return r}var v,L=new p(e.wordSeparators,e.regex);L.reset(0);do{if((v=L.next(t))&&(o[r++]=h(new s.a(n,v.index+1+i,n,v.index+1+v[0].length+i),v,u),r>=f))return r}while(v);return r},e.findNextMatch=function(e,t,n,i){var r=t.parseSearchRequest();if(!r)return null;var o=new p(r.wordSeparators,r.regex);return r.regex.multiline?this._doFindNextMatchMultiline(e,n,o,i):this._doFindNextMatchLineByLine(e,n,o,i)},e._doFindNextMatchMultiline=function(e,t,n,i){var r=new o.a(t.lineNumber,1),a=e.getOffsetAt(r),u=e.getLineCount(),f=e.getValueInRange(new s.a(r.lineNumber,r.column,u,e.getLineMaxColumn(u)),1),c="\r\n"===e.getEOL()?new l(f):null;n.reset(t.column-1);var d=n.next(f);return d?h(this._getMultilineMatchRange(e,a,f,c,d.index,d[0]),d,i):1!==t.lineNumber||1!==t.column?this._doFindNextMatchMultiline(e,new o.a(1,1),n,i):null},e._doFindNextMatchLineByLine=function(e,t,n,i){var r=e.getLineCount(),o=t.lineNumber,s=e.getLineContent(o),a=this._findFirstMatchInLine(n,s,o,t.column,i);if(a)return a;for(var u=1;u<=r;u++){var f=(o+u-1)%r,h=e.getLineContent(f+1),l=this._findFirstMatchInLine(n,h,f+1,1,i);if(l)return l}return null},e._findFirstMatchInLine=function(e,t,n,i,r){e.reset(i-1);var o=e.next(t);return o?h(new s.a(n,o.index+1,n,o.index+1+o[0].length),o,r):null},e.findPreviousMatch=function(e,t,n,i){var r=t.parseSearchRequest();if(!r)return null;var o=new p(r.wordSeparators,r.regex);return r.regex.multiline?this._doFindPreviousMatchMultiline(e,n,o,i):this._doFindPreviousMatchLineByLine(e,n,o,i)},e._doFindPreviousMatchMultiline=function(e,t,n,i){var r=this._doFindMatchesMultiline(e,new s.a(1,1,t.lineNumber,t.column),n,i,9990);if(r.length>0)return r[r.length-1];var a=e.getLineCount();return t.lineNumber!==a||t.column!==e.getLineMaxColumn(a)?this._doFindPreviousMatchMultiline(e,new o.a(a,e.getLineMaxColumn(a)),n,i):null},e._doFindPreviousMatchLineByLine=function(e,t,n,i){var r=e.getLineCount(),o=t.lineNumber,s=e.getLineContent(o).substring(0,t.column-1),a=this._findLastMatchInLine(n,s,o,i);if(a)return a;for(var u=1;u<=r;u++){var f=(r+o-u-1)%r,h=e.getLineContent(f+1),l=this._findLastMatchInLine(n,h,f+1,i);if(l)return l}return null},e._findLastMatchInLine=function(e,t,n,i){var r,o=null;for(e.reset(0);r=e.next(t);)o=h(new s.a(n,r.index+1,n,r.index+1+r[0].length),r,i);return o},e}();function d(e,t,n,i,r){return function(e,t,n,i,r){if(0===i)return!0;var o=t.charCodeAt(i-1);if(0!==e.get(o))return!0;if(13===o||10===o)return!0;if(r>0){var s=t.charCodeAt(i);if(0!==e.get(s))return!0}return!1}(e,t,0,i,r)&&function(e,t,n,i,r){if(i+r===n)return!0;var o=t.charCodeAt(i+r);if(0!==e.get(o))return!0;if(13===o||10===o)return!0;if(r>0){var s=t.charCodeAt(i+r-1);if(0!==e.get(s))return!0}return!1}(e,t,n,i,r)}var p=function(){function e(e,t){this._wordSeparators=e,this._searchRegex=t,this._prevMatchStartIndex=-1,this._prevMatchLength=0}return e.prototype.reset=function(e){this._searchRegex.lastIndex=e,this._prevMatchStartIndex=-1,this._prevMatchLength=0},e.prototype.next=function(e){var t,n=e.length;do{if(this._prevMatchStartIndex+this._prevMatchLength===n)return null;if(!(t=this._searchRegex.exec(e)))return null;var i=t.index,r=t[0].length;if(i===this._prevMatchStartIndex&&r===this._prevMatchLength){if(0===r){this._searchRegex.lastIndex+=1;continue}return null}if(this._prevMatchStartIndex=i,this._prevMatchLength=r,!this._wordSeparators||d(this._wordSeparators,e,n,i,r))return t}while(t);return null},e}()},12:function(e,t,n){"use strict";n.d(t,"p",(function(){return l})),n.d(t,"z",(function(){return c})),n.d(t,"D",(function(){return d})),n.d(t,"C",(function(){return p})),n.d(t,"x",(function(){return i})),n.d(t,"h",(function(){return r})),n.d(t,"E",(function(){return g})),n.d(t,"y",(function(){return o})),n.d(t,"l",(function(){return _})),n.d(t,"F",(function(){return m})),n.d(t,"s",(function(){return v})),n.d(t,"t",(function(){return L})),n.d(t,"d",(function(){return C})),n.d(t,"w",(function(){return b})),n.d(t,"n",(function(){return I})),n.d(t,"k",(function(){return y})),n.d(t,"i",(function(){return N})),n.d(t,"f",(function(){return k})),n.d(t,"e",(function(){return S})),n.d(t,"o",(function(){return x})),n.d(t,"B",(function(){return w})),n.d(t,"b",(function(){return E})),n.d(t,"a",(function(){return O})),n.d(t,"g",(function(){return T})),n.d(t,"j",(function(){return D})),n.d(t,"r",(function(){return M})),n.d(t,"q",(function(){return A})),n.d(t,"c",(function(){return R})),n.d(t,"u",(function(){return z})),n.d(t,"m",(function(){return B})),n.d(t,"v",(function(){return F})),n.d(t,"A",(function(){return V}));var i,r,o,s=n(23),a=n(28),u=n(3),f=n(96),h=n(538),l=function(e,t){this.language=e,this.id=t},c=function(){function e(){}return e.getLanguageId=function(e){return(255&e)>>>0},e.getTokenType=function(e){return(1792&e)>>>8},e.getFontStyle=function(e){return(14336&e)>>>11},e.getForeground=function(e){return(8372224&e)>>>14},e.getBackground=function(e){return(4286578688&e)>>>23},e.getClassNameFromMetadata=function(e){var t="mtk"+this.getForeground(e),n=this.getFontStyle(e);return 1&n&&(t+=" mtki"),2&n&&(t+=" mtkb"),4&n&&(t+=" mtku"),t},e.getInlineStyleFromMetadata=function(e,t){var n=this.getForeground(e),i=this.getFontStyle(e),r="color: "+t[n]+";";return 1&i&&(r+="font-style: italic;"),2&i&&(r+="font-weight: bold;"),4&i&&(r+="text-decoration: underline;"),r},e}(),d=function(){var e=Object.create(null);return e[0]="method",e[1]="function",e[2]="constructor",e[3]="field",e[4]="variable",e[5]="class",e[6]="struct",e[7]="interface",e[8]="module",e[9]="property",e[10]="event",e[11]="operator",e[12]="unit",e[13]="value",e[14]="constant",e[15]="enum",e[16]="enum-member",e[17]="keyword",e[25]="snippet",e[18]="text",e[19]="color",e[20]="file",e[21]="reference",e[22]="customcolor",e[23]="folder",e[24]="type-parameter",function(t){return e[t]||"property"}}(),p=function(){var e=Object.create(null);return e.method=0,e.function=1,e.constructor=2,e.field=3,e.variable=4,e.class=5,e.struct=6,e.interface=7,e.module=8,e.property=9,e.event=10,e.operator=11,e.unit=12,e.value=13,e.constant=14,e.enum=15,e["enum-member"]=16,e.enumMember=16,e.keyword=17,e.snippet=25,e.text=18,e.color=19,e.file=20,e.reference=21,e.customcolor=22,e.folder=23,e["type-parameter"]=24,e.typeParameter=24,function(t,n){var i=e[t];return"undefined"!==typeof i||n||(i=9),i}}();function g(e){return e&&a.a.isUri(e.uri)&&u.a.isIRange(e.range)&&(u.a.isIRange(e.originSelectionRange)||u.a.isIRange(e.targetSelectionRange))}!function(e){e[e.Invoke=1]="Invoke",e[e.TriggerCharacter=2]="TriggerCharacter",e[e.ContentChange=3]="ContentChange"}(i||(i={})),function(e){e[e.Text=0]="Text",e[e.Read=1]="Read",e[e.Write=2]="Write"}(r||(r={})),function(e){var t=new Map;t.set("file",0),t.set("module",1),t.set("namespace",2),t.set("package",3),t.set("class",4),t.set("method",5),t.set("property",6),t.set("field",7),t.set("constructor",8),t.set("enum",9),t.set("interface",10),t.set("function",11),t.set("variable",12),t.set("constant",13),t.set("string",14),t.set("number",15),t.set("boolean",16),t.set("array",17),t.set("object",18),t.set("key",19),t.set("null",20),t.set("enum-member",21),t.set("struct",22),t.set("event",23),t.set("operator",24),t.set("type-parameter",25);var n=new Map;n.set(0,"file"),n.set(1,"module"),n.set(2,"namespace"),n.set(3,"package"),n.set(4,"class"),n.set(5,"method"),n.set(6,"property"),n.set(7,"field"),n.set(8,"constructor"),n.set(9,"enum"),n.set(10,"interface"),n.set(11,"function"),n.set(12,"variable"),n.set(13,"constant"),n.set(14,"string"),n.set(15,"number"),n.set(16,"boolean"),n.set(17,"array"),n.set(18,"object"),n.set(19,"key"),n.set(20,"null"),n.set(21,"enum-member"),n.set(22,"struct"),n.set(23,"event"),n.set(24,"operator"),n.set(25,"type-parameter"),e.fromString=function(e){return t.get(e)},e.toString=function(e){return n.get(e)},e.toCssClassName=function(e,t){return"codicon "+(t?"inline":"block")+" codicon-symbol-"+(n.get(e)||"property")}}(o||(o={}));var _=function(){function e(e){this.value=e}return e.Comment=new e("comment"),e.Imports=new e("imports"),e.Region=new e("region"),e}();function m(e){return Object(s.i)(e)&&e.resource&&Array.isArray(e.edits)}var v=new f.a,L=new f.a,C=new f.a,b=new f.a,I=new f.a,y=new f.a,N=new f.a,k=new f.a,S=new f.a,x=new f.a,w=new f.a,E=new f.a,O=new f.a,T=new f.a,D=new f.a,M=new f.a,A=new f.a,R=new f.a,z=new f.a,B=new f.a,F=new f.a,V=new h.a},152:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return s}));var i="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";var r=function(e){void 0===e&&(e="");for(var t="(-?\\d*\\.\\d\\w*)|([^",n=0,r=i;n<r.length;n++){var o=r[n];e.indexOf(o)>=0||(t+="\\"+o)}return t+="\\s]+)",new RegExp(t,"g")}();function o(e){var t=r;if(e&&e instanceof RegExp)if(e.global)t=e;else{var n="g";e.ignoreCase&&(n+="i"),e.multiline&&(n+="m"),e.unicode&&(n+="u"),t=new RegExp(e.source,n)}return t.lastIndex=0,t}function s(e,t,n,i){t.lastIndex=0;var r=t.exec(n);if(!r)return null;var o=r[0].indexOf(" ")>=0?function(e,t,n,i){var r,o=e-1-i;for(t.lastIndex=0;r=t.exec(n);){var s=r.index||0;if(s>o)return null;if(t.lastIndex>=o)return{word:r[0],startColumn:i+1+s,endColumn:i+1+t.lastIndex}}return null}(e,t,n,i):function(e,t,n,i){var r,o=e-1-i,s=n.lastIndexOf(" ",o-1)+1;for(t.lastIndex=s;r=t.exec(n);){var a=r.index||0;if(a<=o&&t.lastIndex>=o)return{word:r[0],startColumn:i+1+a,endColumn:i+1+t.lastIndex}}return null}(e,t,n,i);return t.lastIndex=0,o}},154:function(e,t,n){"use strict";n.d(t,"f",(function(){return a})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return d})),n.d(t,"e",(function(){return _})),n.d(t,"d",(function(){return m}));var i=n(17),r=n(115),o=n(10),s=n(12);function a(e){for(var t=0,n=0,i=0,r=0,o=e.length;r<o;r++){var s=e.charCodeAt(r);13===s?(0===t&&(n=r),t++,r+1<o&&10===e.charCodeAt(r+1)&&r++,i=r+1):10===s&&(0===t&&(n=r),t++,i=r+1)}return 0===t&&(n=e.length),[t,n,e.length-i]}function u(e){return(16384|e<<0|2<<23)>>>0}var f=new Uint32Array(0).buffer,h=function(){function e(){this.tokens=[]}return e.prototype.add=function(e,t){if(this.tokens.length>0){var n=this.tokens[this.tokens.length-1];if(n.startLineNumber+n.tokens.length-1+1===e)return void n.tokens.push(t)}this.tokens.push(new p(e,[t]))},e}(),l=function(){function e(e){this._tokens=e,this._tokenCount=e.length/4}return e.prototype.getMaxDeltaLine=function(){var e=this.getTokenCount();return 0===e?-1:this.getDeltaLine(e-1)},e.prototype.getTokenCount=function(){return this._tokenCount},e.prototype.getDeltaLine=function(e){return this._tokens[4*e]},e.prototype.getStartCharacter=function(e){return this._tokens[4*e+1]},e.prototype.getEndCharacter=function(e){return this._tokens[4*e+2]},e.prototype.getMetadata=function(e){return this._tokens[4*e+3]},e.prototype.clear=function(){this._tokenCount=0},e.prototype.acceptDeleteRange=function(e,t,n,i,r){for(var o=this._tokens,s=this._tokenCount,a=i-t,u=0,f=!1,h=0;h<s;h++){var l=4*h,c=o[l],d=o[l+1],p=o[l+2],g=o[l+3];if(c<t||c===t&&p<=n)u++;else{if(c===t&&d<n)c===i&&p>r?p-=r-n:p=n;else if(c===t&&d===n){if(!(c===i&&p>r)){f=!0;continue}p-=r-n}else if(c<i||c===i&&d<r){if(!(c===i&&p>r)){f=!0;continue}p=c===t?(d=n)+(p-r):(d=0)+(p-r)}else if(c>i){if(0===a&&!f){u=s;break}c-=a}else{if(!(c===i&&d>=r))throw new Error("Not possible!");e&&0===c&&(d+=e,p+=e),c-=a,d-=r-n,p-=r-n}var _=4*u;o[_]=c,o[_+1]=d,o[_+2]=p,o[_+3]=g,u++}}this._tokenCount=u},e.prototype.acceptInsertText=function(e,t,n,i,r,o){for(var s=0===n&&1===i&&(o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122),a=this._tokens,u=this._tokenCount,f=0;f<u;f++){var h=4*f,l=a[h],c=a[h+1],d=a[h+2];if(!(l<e||l===e&&d<t)){if(l===e&&d===t){if(!s)continue;d+=1}else if(l===e&&c<t&&t<d)0===n?d+=i:d=t;else{if(l===e&&c===t&&s)continue;if(l===e)if(l+=n,0===n)c+=i,d+=i;else{var p=d-c;d=(c=r+(c-t))+p}else l+=n}a[h]=l,a[h+1]=c,a[h+2]=d}}},e}(),c=function(){function e(e,t,n){this._actual=e,this._startTokenIndex=t,this._endTokenIndex=n}return e.prototype.getCount=function(){return this._endTokenIndex-this._startTokenIndex+1},e.prototype.getStartCharacter=function(e){return this._actual.getStartCharacter(this._startTokenIndex+e)},e.prototype.getEndCharacter=function(e){return this._actual.getEndCharacter(this._startTokenIndex+e)},e.prototype.getMetadata=function(e){return this._actual.getMetadata(this._startTokenIndex+e)},e}(),d=function(){function e(e,t){this.startLineNumber=e,this.tokens=t,this.endLineNumber=this.startLineNumber+this.tokens.getMaxDeltaLine()}return e.prototype._updateEndLineNumber=function(){this.endLineNumber=this.startLineNumber+this.tokens.getMaxDeltaLine()},e.prototype.getLineTokens=function(t){if(this.startLineNumber<=t&&t<=this.endLineNumber){var n=e._findTokensWithLine(this.tokens,t-this.startLineNumber);if(n){var i=n[0],r=n[1];return new c(this.tokens,i,r)}}return null},e._findTokensWithLine=function(e,t){for(var n=0,i=e.getTokenCount()-1;n<i;){var r=n+Math.floor((i-n)/2),o=e.getDeltaLine(r);if(o<t)n=r+1;else{if(!(o>t)){for(var s=r;s>n&&e.getDeltaLine(s-1)===t;)s--;for(var a=r;a<i&&e.getDeltaLine(a+1)===t;)a++;return[s,a]}i=r-1}}return e.getDeltaLine(n)===t?[n,n]:null},e.prototype.applyEdit=function(e,t){var n=a(t),i=n[0],r=n[1],o=n[2];this.acceptEdit(e,i,r,o,t.length>0?t.charCodeAt(0):0)},e.prototype.acceptEdit=function(e,t,n,i,r){this._acceptDeleteRange(e),this._acceptInsertText(new o.a(e.startLineNumber,e.startColumn),t,n,i,r),this._updateEndLineNumber()},e.prototype._acceptDeleteRange=function(e){if(e.startLineNumber!==e.endLineNumber||e.startColumn!==e.endColumn){var t=e.startLineNumber-this.startLineNumber,n=e.endLineNumber-this.startLineNumber;if(n<0){var i=n-t;this.startLineNumber-=i}else{var r=this.tokens.getMaxDeltaLine();if(!(t>=r+1)){if(t<0&&n>=r+1)return this.startLineNumber=0,void this.tokens.clear();if(t<0){var o=-t;this.startLineNumber-=o,this.tokens.acceptDeleteRange(e.startColumn-1,0,0,n,e.endColumn-1)}else this.tokens.acceptDeleteRange(0,t,e.startColumn-1,n,e.endColumn-1)}}}},e.prototype._acceptInsertText=function(e,t,n,i,r){if(0!==t||0!==n){var o=e.lineNumber-this.startLineNumber;if(o<0)this.startLineNumber+=t;else o>=this.tokens.getMaxDeltaLine()+1||this.tokens.acceptInsertText(o,e.column-1,t,n,i,r)}},e}(),p=function(e,t){this.startLineNumber=e,this.tokens=t};function g(e){return e instanceof Uint32Array?e:new Uint32Array(e)}var _=function(){function e(){this._pieces=[]}return e.prototype.flush=function(){this._pieces=[]},e.prototype.set=function(e){this._pieces=e||[]},e.prototype.addSemanticTokens=function(t,n){var i=this._pieces;if(0===i.length)return n;var o=e._findFirstPieceWithLine(i,t),a=this._pieces[o].getLineTokens(t);if(!a)return n;for(var u=n.getCount(),f=a.getCount(),h=0,l=[],c=0,d=0;d<f;d++){for(var p=a.getStartCharacter(d),g=a.getEndCharacter(d),_=a.getMetadata(d);h<u&&n.getEndOffset(h)<=p;)l[c++]=n.getEndOffset(h),l[c++]=n.getMetadata(h),h++;for(h<u&&n.getStartOffset(h)<p&&(l[c++]=p,l[c++]=n.getMetadata(h));h<u&&n.getEndOffset(h)<=g;)h++;var m=n.getMetadata(h-1>0?h-1:h),v=s.z.getLanguageId(m),L=s.z.getTokenType(m);l[c++]=g,l[c++]=4294965248&_|v<<0>>>0|L<<8>>>0}for(;h<u;)l[c++]=n.getEndOffset(h),l[c++]=n.getMetadata(h),h++;return new r.a(new Uint32Array(l),n.getLineContent())},e._findFirstPieceWithLine=function(e,t){for(var n=0,i=e.length-1;n<i;){var r=n+Math.floor((i-n)/2);if(e[r].endLineNumber<t)n=r+1;else{if(!(e[r].startLineNumber>t)){for(;r>n&&e[r-1].startLineNumber<=t&&t<=e[r-1].endLineNumber;)r--;return r}i=r-1}}return n},e.prototype.acceptEdit=function(e,t,n,i,r){for(var o=0,s=this._pieces;o<s.length;o++){s[o].acceptEdit(e,t,n,i,r)}},e}(),m=function(){function e(){this._lineTokens=[],this._len=0}return e.prototype.flush=function(){this._lineTokens=[],this._len=0},e.prototype.getTokens=function(e,t,n){var i=null;if(t<this._len&&(i=this._lineTokens[t]),null!==i&&i!==f)return new r.a(g(i),n);var o=new Uint32Array(2);return o[0]=n.length,o[1]=u(e),new r.a(o,n)},e._massageTokens=function(e,t,n){var i=n?g(n):null;if(0===t){var r=!1;if(i&&i.length>1&&(r=s.z.getLanguageId(i[1])!==e),!r)return f}if(!i||0===i.length){var o=new Uint32Array(2);return o[0]=t,o[1]=u(e),o.buffer}return i[i.length-2]=t,0===i.byteOffset&&i.byteLength===i.buffer.byteLength?i.buffer:i},e.prototype._ensureLine=function(e){for(;e>=this._len;)this._lineTokens[this._len]=null,this._len++},e.prototype._deleteLines=function(e,t){0!==t&&(e+t>this._len&&(t=this._len-e),this._lineTokens.splice(e,t),this._len-=t)},e.prototype._insertLines=function(e,t){if(0!==t){for(var n=[],r=0;r<t;r++)n[r]=null;this._lineTokens=i.a(this._lineTokens,e,n),this._len+=t}},e.prototype.setTokens=function(t,n,i,r){var o=e._massageTokens(t,i,r);this._ensureLine(n),this._lineTokens[n]=o},e.prototype.acceptEdit=function(e,t,n){this._acceptDeleteRange(e),this._acceptInsertText(new o.a(e.startLineNumber,e.startColumn),t,n)},e.prototype._acceptDeleteRange=function(t){var n=t.startLineNumber-1;if(!(n>=this._len))if(t.startLineNumber!==t.endLineNumber){this._lineTokens[n]=e._deleteEnding(this._lineTokens[n],t.startColumn-1);var i=t.endLineNumber-1,r=null;i<this._len&&(r=e._deleteBeginning(this._lineTokens[i],t.endColumn-1)),this._lineTokens[n]=e._append(this._lineTokens[n],r),this._deleteLines(t.startLineNumber,t.endLineNumber-t.startLineNumber)}else{if(t.startColumn===t.endColumn)return;this._lineTokens[n]=e._delete(this._lineTokens[n],t.startColumn-1,t.endColumn-1)}},e.prototype._acceptInsertText=function(t,n,i){if(0!==n||0!==i){var r=t.lineNumber-1;r>=this._len||(0!==n?(this._lineTokens[r]=e._deleteEnding(this._lineTokens[r],t.column-1),this._lineTokens[r]=e._insert(this._lineTokens[r],t.column-1,i),this._insertLines(t.lineNumber,n)):this._lineTokens[r]=e._insert(this._lineTokens[r],t.column-1,i))}},e._deleteBeginning=function(t,n){return null===t||t===f?t:e._delete(t,0,n)},e._deleteEnding=function(t,n){if(null===t||t===f)return t;var i=g(t),r=i[i.length-2];return e._delete(t,n,r)},e._delete=function(e,t,n){if(null===e||e===f||t===n)return e;var i=g(e),o=i.length>>>1;if(0===t&&i[i.length-2]===n)return f;var s,a,u=r.a.findIndexInTokensArray(i,t),h=u>0?i[u-1<<1]:0;if(n<i[u<<1]){for(var l=n-t,c=u;c<o;c++)i[c<<1]-=l;return e}h!==t?(i[u<<1]=t,s=u+1<<1,a=t):(s=u<<1,a=h);for(var d=n-t,p=u+1;p<o;p++){var _=i[p<<1]-d;_>a&&(i[s++]=_,i[s++]=i[1+(p<<1)],a=_)}if(s===i.length)return e;var m=new Uint32Array(s);return m.set(i.subarray(0,s),0),m.buffer},e._append=function(e,t){if(t===f)return e;if(e===f)return t;if(null===e)return e;if(null===t)return null;var n=g(e),i=g(t),r=i.length>>>1,o=new Uint32Array(n.length+i.length);o.set(n,0);for(var s=n.length,a=n[n.length-2],u=0;u<r;u++)o[s++]=i[u<<1]+a,o[s++]=i[1+(u<<1)];return o.buffer},e._insert=function(e,t,n){if(null===e||e===f)return e;var i=g(e),o=i.length>>>1,s=r.a.findIndexInTokensArray(i,t);s>0&&(i[s-1<<1]===t&&s--);for(var a=s;a<o;a++)i[a<<1]+=n;return e},e}()},31:function(e,t,n){"use strict";var i=n(13),r=n(6),o=n(2),s=n(9),a=n(28),u=n(32),f=n(10),h=n(3),l=n(24),c=n(56),d=function(){function e(e,t){this.beforeVersionId=e,this.beforeCursorState=t,this.afterCursorState=null,this.afterVersionId=-1,this.editOperations=[]}return e.prototype.undo=function(e){for(var t=this.editOperations.length-1;t>=0;t--)this.editOperations[t]={operations:e.applyEdits(this.editOperations[t].operations)}},e.prototype.redo=function(e){for(var t=0;t<this.editOperations.length;t++)this.editOperations[t]={operations:e.applyEdits(this.editOperations[t].operations)}},e}();function p(e){return"\n"===e.getEOL()?0:1}var g=function(){function e(e,t){this.beforeVersionId=e,this.beforeCursorState=null,this.afterCursorState=null,this.afterVersionId=-1,this.eol=t}return e.prototype.undo=function(e){var t=p(e);e.setEOL(this.eol),this.eol=t},e.prototype.redo=function(e){var t=p(e);e.setEOL(this.eol),this.eol=t},e}(),_=function(){function e(e){this.model=e,this.currentOpenStackElement=null,this.past=[],this.future=[]}return e.prototype.pushStackElement=function(){null!==this.currentOpenStackElement&&(this.past.push(this.currentOpenStackElement),this.currentOpenStackElement=null)},e.prototype.clear=function(){this.currentOpenStackElement=null,this.past=[],this.future=[]},e.prototype.pushEOL=function(e){this.future=[],this.currentOpenStackElement&&this.pushStackElement();var t=p(this.model),n=new g(this.model.getAlternativeVersionId(),t);this.model.setEOL(e),n.afterVersionId=this.model.getVersionId(),this.currentOpenStackElement=n,this.pushStackElement()},e.prototype.pushEditOperation=function(t,n,i){this.future=[];var r=null;this.currentOpenStackElement&&(this.currentOpenStackElement instanceof d?r=this.currentOpenStackElement:this.pushStackElement()),this.currentOpenStackElement||(r=new d(this.model.getAlternativeVersionId(),t),this.currentOpenStackElement=r);var o={operations:this.model.applyEdits(n)};return r.editOperations.push(o),r.afterCursorState=e._computeCursorState(i,o.operations),r.afterVersionId=this.model.getVersionId(),r.afterCursorState},e._computeCursorState=function(e,t){try{return e?e(t):null}catch(n){return Object(i.e)(n),null}},e.prototype.undo=function(){if(this.pushStackElement(),this.past.length>0){var e=this.past.pop();try{e.undo(this.model)}catch(t){return Object(i.e)(t),this.clear(),null}return this.future.push(e),{selections:e.beforeCursorState,recordedVersionId:e.beforeVersionId}}return null},e.prototype.canUndo=function(){return this.past.length>0||null!==this.currentOpenStackElement},e.prototype.redo=function(){if(this.future.length>0){var e=this.future.pop();try{e.redo(this.model)}catch(t){return Object(i.e)(t),this.clear(),null}return this.past.push(e),{selections:e.afterCursorState,recordedVersionId:e.afterVersionId}}return null},e.prototype.canRedo=function(){return this.future.length>0},e}(),m=function(){this.spacesDiff=0,this.looksLikeAlignment=!1};function v(e,t,n,i,r){var o;for(r.spacesDiff=0,r.looksLikeAlignment=!1,o=0;o<t&&o<i;o++){if(e.charCodeAt(o)!==n.charCodeAt(o))break}for(var s=0,a=0,u=o;u<t;u++){32===e.charCodeAt(u)?s++:a++}var f=0,h=0;for(u=o;u<i;u++){32===n.charCodeAt(u)?f++:h++}if(!(s>0&&a>0)&&!(f>0&&h>0)){var l=Math.abs(a-h),c=Math.abs(s-f);if(0===l)return r.spacesDiff=c,void(c>0&&0<=f-1&&f-1<e.length&&f<n.length&&32!==n.charCodeAt(f)&&32===e.charCodeAt(f-1)&&(r.looksLikeAlignment=!0));c%l!==0||(r.spacesDiff=c/l)}}function L(e,t,n){for(var i=Math.min(e.getLineCount(),1e4),r=0,o=0,s="",a=0,u=[0,0,0,0,0,0,0,0,0],f=new m,h=1;h<=i;h++){for(var l=e.getLineLength(h),c=e.getLineContent(h),d=l<=65536,p=!1,g=0,_=0,L=0,C=0,b=l;C<b;C++){var I=d?c.charCodeAt(C):e.getLineCharCode(h,C);if(9===I)L++;else{if(32!==I){p=!0,g=C;break}_++}}if(p&&(L>0?r++:_>1&&o++,v(s,a,c,g,f),!f.looksLikeAlignment||n&&t===f.spacesDiff)){var y=f.spacesDiff;y<=8&&u[y]++,s=c,a=g}}var N=n;r!==o&&(N=r<o);var k=t;if(N){var S=N?0:.1*i;[2,4,6,8,3,5,7].forEach((function(e){var t=u[e];t>S&&(S=t,k=e)})),4===k&&u[4]>0&&u[2]>0&&u[2]>=u[4]/2&&(k=2)}return{insertSpaces:N,tabSize:k}}function C(e){return(1&e.metadata)>>>0}function b(e,t){e.metadata=254&e.metadata|t<<0}function I(e){return(2&e.metadata)>>>1===1}function y(e,t){e.metadata=253&e.metadata|(t?1:0)<<1}function N(e){return(4&e.metadata)>>>2===1}function k(e,t){e.metadata=251&e.metadata|(t?1:0)<<2}function S(e){return(8&e.metadata)>>>3===1}function x(e,t){e.metadata=247&e.metadata|(t?1:0)<<3}function w(e,t){e.metadata=207&e.metadata|t<<4}function E(e,t){e.metadata=191&e.metadata|(t?1:0)<<6}var O=function(){function e(e,t,n){this.metadata=0,this.parent=this,this.left=this,this.right=this,b(this,1),this.start=t,this.end=n,this.delta=0,this.maxEnd=n,this.id=e,this.ownerId=0,this.options=null,k(this,!1),w(this,1),x(this,!1),E(this,!1),this.cachedVersionId=0,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=n,this.range=null,y(this,!1)}return e.prototype.reset=function(e,t,n,i){this.start=t,this.end=n,this.maxEnd=n,this.cachedVersionId=e,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=n,this.range=i},e.prototype.setOptions=function(e){this.options=e;var t=this.options.className;k(this,"squiggly-error"===t||"squiggly-warning"===t||"squiggly-info"===t),w(this,this.options.stickiness),x(this,!(!this.options.overviewRuler||!this.options.overviewRuler.color)),E(this,this.options.collapseOnReplaceEdit)},e.prototype.setCachedOffsets=function(e,t,n){this.cachedVersionId!==n&&(this.range=null),this.cachedVersionId=n,this.cachedAbsoluteStart=e,this.cachedAbsoluteEnd=t},e.prototype.detach=function(){this.parent=null,this.left=null,this.right=null},e}(),T=new O(null,0,0);T.parent=T,T.left=T,T.right=T,b(T,0);var D=function(){function e(){this.root=T,this.requestNormalizeDelta=!1}return e.prototype.intervalSearch=function(e,t,n,i,r){return this.root===T?[]:function(e,t,n,i,r,o){var s=e.root,a=0,u=0,f=0,h=[],l=0;for(;s!==T;)if(I(s))y(s.left,!1),y(s.right,!1),s===s.parent.right&&(a-=s.parent.delta),s=s.parent;else{if(!I(s.left)){if(a+s.maxEnd<t){y(s,!0);continue}if(s.left!==T){s=s.left;continue}}if((u=a+s.start)>n)y(s,!0);else{if((f=a+s.end)>=t){s.setCachedOffsets(u,f,o);var c=!0;i&&s.ownerId&&s.ownerId!==i&&(c=!1),r&&N(s)&&(c=!1),c&&(h[l++]=s)}y(s,!0),s.right===T||I(s.right)||(a+=s.delta,s=s.right)}}return y(e.root,!1),h}(this,e,t,n,i,r)},e.prototype.search=function(e,t,n){return this.root===T?[]:function(e,t,n,i){var r=e.root,o=0,s=0,a=0,u=[],f=0;for(;r!==T;)if(I(r))y(r.left,!1),y(r.right,!1),r===r.parent.right&&(o-=r.parent.delta),r=r.parent;else if(r.left===T||I(r.left)){s=o+r.start,a=o+r.end,r.setCachedOffsets(s,a,i);var h=!0;t&&r.ownerId&&r.ownerId!==t&&(h=!1),n&&N(r)&&(h=!1),h&&(u[f++]=r),y(r,!0),r.right===T||I(r.right)||(o+=r.delta,r=r.right)}else r=r.left;return y(e.root,!1),u}(this,e,t,n)},e.prototype.collectNodesFromOwner=function(e){return function(e,t){var n=e.root,i=[],r=0;for(;n!==T;)I(n)?(y(n.left,!1),y(n.right,!1),n=n.parent):n.left===T||I(n.left)?(n.ownerId===t&&(i[r++]=n),y(n,!0),n.right===T||I(n.right)||(n=n.right)):n=n.left;return y(e.root,!1),i}(this,e)},e.prototype.collectNodesPostOrder=function(){return function(e){var t=e.root,n=[],i=0;for(;t!==T;)I(t)?(y(t.left,!1),y(t.right,!1),t=t.parent):t.left===T||I(t.left)?t.right===T||I(t.right)?(n[i++]=t,y(t,!0)):t=t.right:t=t.left;return y(e.root,!1),n}(this)},e.prototype.insert=function(e){R(this,e),this._normalizeDeltaIfNecessary()},e.prototype.delete=function(e){z(this,e),this._normalizeDeltaIfNecessary()},e.prototype.resolveNode=function(e,t){for(var n=e,i=0;e!==this.root;)e===e.parent.right&&(i+=e.parent.delta),e=e.parent;var r=n.start+i,o=n.end+i;n.setCachedOffsets(r,o,t)},e.prototype.acceptReplace=function(e,t,n,i){for(var r=function(e,t,n){var i=e.root,r=0,o=0,s=0,a=[],u=0;for(;i!==T;)if(I(i))y(i.left,!1),y(i.right,!1),i===i.parent.right&&(r-=i.parent.delta),i=i.parent;else{if(!I(i.left)){if(r+i.maxEnd<t){y(i,!0);continue}if(i.left!==T){i=i.left;continue}}(o=r+i.start)>n?y(i,!0):((s=r+i.end)>=t&&(i.setCachedOffsets(o,s,0),a[u++]=i),y(i,!0),i.right===T||I(i.right)||(r+=i.delta,i=i.right))}return y(e.root,!1),a}(this,e,e+t),o=0,s=r.length;o<s;o++){z(this,a=r[o])}this._normalizeDeltaIfNecessary(),function(e,t,n,i){var r=e.root,o=0,s=i-(n-t);for(;r!==T;)if(I(r))y(r.left,!1),y(r.right,!1),r===r.parent.right&&(o-=r.parent.delta),W(r),r=r.parent;else{if(!I(r.left)){if(o+r.maxEnd<t){y(r,!0);continue}if(r.left!==T){r=r.left;continue}}o+r.start>n?(r.start+=s,r.end+=s,r.delta+=s,(r.delta<-1073741824||r.delta>1073741824)&&(e.requestNormalizeDelta=!0),y(r,!0)):(y(r,!0),r.right===T||I(r.right)||(o+=r.delta,r=r.right))}y(e.root,!1)}(this,e,e+t,n),this._normalizeDeltaIfNecessary();for(o=0,s=r.length;o<s;o++){var a;(a=r[o]).start=a.cachedAbsoluteStart,a.end=a.cachedAbsoluteEnd,A(a,e,e+t,n,i),a.maxEnd=a.end,R(this,a)}this._normalizeDeltaIfNecessary()},e.prototype._normalizeDeltaIfNecessary=function(){this.requestNormalizeDelta&&(this.requestNormalizeDelta=!1,function(e){var t=e.root,n=0;for(;t!==T;)t.left===T||I(t.left)?t.right===T||I(t.right)?(t.start=n+t.start,t.end=n+t.end,t.delta=0,W(t),y(t,!0),y(t.left,!1),y(t.right,!1),t===t.parent.right&&(n-=t.parent.delta),t=t.parent):(n+=t.delta,t=t.right):t=t.left;y(e.root,!1)}(this))},e}();function M(e,t,n,i){return e<n||!(e>n)&&(1!==i&&(2===i||t))}function A(e,t,n,i,r){var o=function(e){return(48&e.metadata)>>>4}(e),s=0===o||2===o,a=1===o||2===o,u=n-t,f=i,h=Math.min(u,f),l=e.start,c=!1,d=e.end,p=!1;t<=l&&d<=n&&function(e){return(64&e.metadata)>>>6===1}(e)&&(e.start=t,c=!0,e.end=t,p=!0);var g=r?1:u>0?2:0;if(!c&&M(l,s,t,g)&&(c=!0),!p&&M(d,a,t,g)&&(p=!0),h>0&&!r){g=u>f?2:0;!c&&M(l,s,t+h,g)&&(c=!0),!p&&M(d,a,t+h,g)&&(p=!0)}g=r?1:0;!c&&M(l,s,n,g)&&(e.start=t+f,c=!0),!p&&M(d,a,n,g)&&(e.end=t+f,p=!0);var _=f-u;c||(e.start=Math.max(0,l+_)),p||(e.end=Math.max(0,d+_)),e.start>e.end&&(e.end=e.start)}function R(e,t){if(e.root===T)return t.parent=T,t.left=T,t.right=T,b(t,0),e.root=t,e.root;!function(e,t){var n=0,i=e.root,r=t.start,o=t.end;for(;;){if(j(r,o,i.start+n,i.end+n)<0){if(i.left===T){t.start-=n,t.end-=n,t.maxEnd-=n,i.left=t;break}i=i.left}else{if(i.right===T){t.start-=n+i.delta,t.end-=n+i.delta,t.maxEnd-=n+i.delta,i.right=t;break}n+=i.delta,i=i.right}}t.parent=i,t.left=T,t.right=T,b(t,1)}(e,t),U(t.parent);for(var n=t;n!==e.root&&1===C(n.parent);){var i;if(n.parent===n.parent.parent.left)1===C(i=n.parent.parent.right)?(b(n.parent,0),b(i,0),b(n.parent.parent,1),n=n.parent.parent):(n===n.parent.right&&F(e,n=n.parent),b(n.parent,0),b(n.parent.parent,1),V(e,n.parent.parent));else 1===C(i=n.parent.parent.left)?(b(n.parent,0),b(i,0),b(n.parent.parent,1),n=n.parent.parent):(n===n.parent.left&&V(e,n=n.parent),b(n.parent,0),b(n.parent.parent,1),F(e,n.parent.parent))}return b(e.root,0),t}function z(e,t){var n,i;if(t.left===T?(i=t,(n=t.right).delta+=t.delta,(n.delta<-1073741824||n.delta>1073741824)&&(e.requestNormalizeDelta=!0),n.start+=t.delta,n.end+=t.delta):t.right===T?(n=t.left,i=t):((n=(i=function(e){for(;e.left!==T;)e=e.left;return e}(t.right)).right).start+=i.delta,n.end+=i.delta,n.delta+=i.delta,(n.delta<-1073741824||n.delta>1073741824)&&(e.requestNormalizeDelta=!0),i.start+=t.delta,i.end+=t.delta,i.delta=t.delta,(i.delta<-1073741824||i.delta>1073741824)&&(e.requestNormalizeDelta=!0)),i===e.root)return e.root=n,b(n,0),t.detach(),B(),W(n),void(e.root.parent=T);var r,o=1===C(i);if(i===i.parent.left?i.parent.left=n:i.parent.right=n,i===t?n.parent=i.parent:(i.parent===t?n.parent=i:n.parent=i.parent,i.left=t.left,i.right=t.right,i.parent=t.parent,b(i,C(t)),t===e.root?e.root=i:t===t.parent.left?t.parent.left=i:t.parent.right=i,i.left!==T&&(i.left.parent=i),i.right!==T&&(i.right.parent=i)),t.detach(),o)return U(n.parent),i!==t&&(U(i),U(i.parent)),void B();for(U(n),U(n.parent),i!==t&&(U(i),U(i.parent));n!==e.root&&0===C(n);)n===n.parent.left?(1===C(r=n.parent.right)&&(b(r,0),b(n.parent,1),F(e,n.parent),r=n.parent.right),0===C(r.left)&&0===C(r.right)?(b(r,1),n=n.parent):(0===C(r.right)&&(b(r.left,0),b(r,1),V(e,r),r=n.parent.right),b(r,C(n.parent)),b(n.parent,0),b(r.right,0),F(e,n.parent),n=e.root)):(1===C(r=n.parent.left)&&(b(r,0),b(n.parent,1),V(e,n.parent),r=n.parent.left),0===C(r.left)&&0===C(r.right)?(b(r,1),n=n.parent):(0===C(r.left)&&(b(r.right,0),b(r,1),F(e,r),r=n.parent.left),b(r,C(n.parent)),b(n.parent,0),b(r.left,0),V(e,n.parent),n=e.root));b(n,0),B()}function B(){T.parent=T,T.delta=0,T.start=0,T.end=0}function F(e,t){var n=t.right;n.delta+=t.delta,(n.delta<-1073741824||n.delta>1073741824)&&(e.requestNormalizeDelta=!0),n.start+=t.delta,n.end+=t.delta,t.right=n.left,n.left!==T&&(n.left.parent=t),n.parent=t.parent,t.parent===T?e.root=n:t===t.parent.left?t.parent.left=n:t.parent.right=n,n.left=t,t.parent=n,W(t),W(n)}function V(e,t){var n=t.left;t.delta-=n.delta,(t.delta<-1073741824||t.delta>1073741824)&&(e.requestNormalizeDelta=!0),t.start-=n.delta,t.end-=n.delta,t.left=n.right,n.right!==T&&(n.right.parent=t),n.parent=t.parent,t.parent===T?e.root=n:t===t.parent.right?t.parent.right=n:t.parent.left=n,n.right=t,t.parent=n,W(t),W(n)}function P(e){var t=e.end;if(e.left!==T){var n=e.left.maxEnd;n>t&&(t=n)}if(e.right!==T){var i=e.right.maxEnd+e.delta;i>t&&(t=i)}return t}function W(e){e.maxEnd=P(e)}function U(e){for(;e!==T;){var t=P(e);if(e.maxEnd===t)return;e.maxEnd=t,e=e.parent}}function j(e,t,n,i){return e===n?t-i:e-n}var q=function(){function e(e,t){this.piece=e,this.color=t,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}return e.prototype.next=function(){if(this.right!==H)return G(this.right);for(var e=this;e.parent!==H&&e.parent.left!==e;)e=e.parent;return e.parent===H?H:e.parent},e.prototype.prev=function(){if(this.left!==H)return Y(this.left);for(var e=this;e.parent!==H&&e.parent.right!==e;)e=e.parent;return e.parent===H?H:e.parent},e.prototype.detach=function(){this.parent=null,this.left=null,this.right=null},e}(),H=new q(null,0);function G(e){for(;e.left!==H;)e=e.left;return e}function Y(e){for(;e.right!==H;)e=e.right;return e}function $(e){return e===H?0:e.size_left+e.piece.length+$(e.right)}function J(e){return e===H?0:e.lf_left+e.piece.lineFeedCnt+J(e.right)}function Z(){H.parent=H}function Q(e,t){var n=t.right;n.size_left+=t.size_left+(t.piece?t.piece.length:0),n.lf_left+=t.lf_left+(t.piece?t.piece.lineFeedCnt:0),t.right=n.left,n.left!==H&&(n.left.parent=t),n.parent=t.parent,t.parent===H?e.root=n:t.parent.left===t?t.parent.left=n:t.parent.right=n,n.left=t,t.parent=n}function K(e,t){var n=t.left;t.left=n.right,n.right!==H&&(n.right.parent=t),n.parent=t.parent,t.size_left-=n.size_left+(n.piece?n.piece.length:0),t.lf_left-=n.lf_left+(n.piece?n.piece.lineFeedCnt:0),t.parent===H?e.root=n:t===t.parent.right?t.parent.right=n:t.parent.left=n,n.right=t,t.parent=n}function X(e,t){var n,i;if(n=t.left===H?(i=t).right:t.right===H?(i=t).left:(i=G(t.right)).right,i===e.root)return e.root=n,n.color=0,t.detach(),Z(),void(e.root.parent=H);var r=1===i.color;if(i===i.parent.left?i.parent.left=n:i.parent.right=n,i===t?(n.parent=i.parent,ne(e,n)):(i.parent===t?n.parent=i:n.parent=i.parent,ne(e,n),i.left=t.left,i.right=t.right,i.parent=t.parent,i.color=t.color,t===e.root?e.root=i:t===t.parent.left?t.parent.left=i:t.parent.right=i,i.left!==H&&(i.left.parent=i),i.right!==H&&(i.right.parent=i),i.size_left=t.size_left,i.lf_left=t.lf_left,ne(e,i)),t.detach(),n.parent.left===n){var o=$(n),s=J(n);if(o!==n.parent.size_left||s!==n.parent.lf_left){var a=o-n.parent.size_left,u=s-n.parent.lf_left;n.parent.size_left=o,n.parent.lf_left=s,te(e,n.parent,a,u)}}if(ne(e,n.parent),r)Z();else{for(var f;n!==e.root&&0===n.color;)n===n.parent.left?(1===(f=n.parent.right).color&&(f.color=0,n.parent.color=1,Q(e,n.parent),f=n.parent.right),0===f.left.color&&0===f.right.color?(f.color=1,n=n.parent):(0===f.right.color&&(f.left.color=0,f.color=1,K(e,f),f=n.parent.right),f.color=n.parent.color,n.parent.color=0,f.right.color=0,Q(e,n.parent),n=e.root)):(1===(f=n.parent.left).color&&(f.color=0,n.parent.color=1,K(e,n.parent),f=n.parent.left),0===f.left.color&&0===f.right.color?(f.color=1,n=n.parent):(0===f.left.color&&(f.right.color=0,f.color=1,Q(e,f),f=n.parent.left),f.color=n.parent.color,n.parent.color=0,f.left.color=0,K(e,n.parent),n=e.root));n.color=0,Z()}}function ee(e,t){for(ne(e,t);t!==e.root&&1===t.parent.color;){var n;if(t.parent===t.parent.parent.left)1===(n=t.parent.parent.right).color?(t.parent.color=0,n.color=0,t.parent.parent.color=1,t=t.parent.parent):(t===t.parent.right&&Q(e,t=t.parent),t.parent.color=0,t.parent.parent.color=1,K(e,t.parent.parent));else 1===(n=t.parent.parent.left).color?(t.parent.color=0,n.color=0,t.parent.parent.color=1,t=t.parent.parent):(t===t.parent.left&&K(e,t=t.parent),t.parent.color=0,t.parent.parent.color=1,Q(e,t.parent.parent))}e.root.color=0}function te(e,t,n,i){for(;t!==e.root&&t!==H;)t.parent.left===t&&(t.parent.size_left+=n,t.parent.lf_left+=i),t=t.parent}function ne(e,t){var n=0,i=0;if(t!==e.root){if(0===n){for(;t!==e.root&&t===t.parent.right;)t=t.parent;if(t===e.root)return;n=$((t=t.parent).left)-t.size_left,i=J(t.left)-t.lf_left,t.size_left+=n,t.lf_left+=i}for(;t!==e.root&&(0!==n||0!==i);)t.parent.left===t&&(t.parent.size_left+=n,t.parent.lf_left+=i),t=t.parent}}H.parent=H,H.left=H,H.right=H,H.color=0;var ie=n(114);function re(e){var t;return(t=e[e.length-1]<65536?new Uint16Array(e.length):new Uint32Array(e.length)).set(e,0),t}var oe=function(e,t,n,i,r){this.lineStarts=e,this.cr=t,this.lf=n,this.crlf=i,this.isBasicASCII=r};function se(e,t){void 0===t&&(t=!0);for(var n=[0],i=1,r=0,o=e.length;r<o;r++){var s=e.charCodeAt(r);13===s?r+1<o&&10===e.charCodeAt(r+1)?(n[i++]=r+2,r++):n[i++]=r+1:10===s&&(n[i++]=r+1)}return t?re(n):n}var ae=function(e,t,n,i,r){this.bufferIndex=e,this.start=t,this.end=n,this.lineFeedCnt=i,this.length=r},ue=function(e,t){this.buffer=e,this.lineStarts=t},fe=function(){function e(e){this._limit=e,this._cache=[]}return e.prototype.get=function(e){for(var t=this._cache.length-1;t>=0;t--){var n=this._cache[t];if(n.nodeStartOffset<=e&&n.nodeStartOffset+n.node.piece.length>=e)return n}return null},e.prototype.get2=function(e){for(var t=this._cache.length-1;t>=0;t--){var n=this._cache[t];if(n.nodeStartLineNumber&&n.nodeStartLineNumber<e&&n.nodeStartLineNumber+n.node.piece.lineFeedCnt>=e)return n}return null},e.prototype.set=function(e){this._cache.length>=this._limit&&this._cache.shift(),this._cache.push(e)},e.prototype.valdiate=function(e){for(var t=!1,n=this._cache,i=0;i<n.length;i++){var r=n[i];(null===r.node.parent||r.nodeStartOffset>=e)&&(n[i]=null,t=!0)}if(t){for(var o=[],s=0,a=n;s<a.length;s++){var u=a[s];null!==u&&o.push(u)}this._cache=o}},e}(),he=function(){function e(e,t,n){this.create(e,t,n)}return e.prototype.create=function(e,t,n){this._buffers=[new ue("",[0])],this._lastChangeBufferPos={line:0,column:0},this.root=H,this._lineCnt=1,this._length=0,this._EOL=t,this._EOLLength=t.length,this._EOLNormalized=n;for(var i=null,r=0,o=e.length;r<o;r++)if(e[r].buffer.length>0){e[r].lineStarts||(e[r].lineStarts=se(e[r].buffer));var s=new ae(r+1,{line:0,column:0},{line:e[r].lineStarts.length-1,column:e[r].buffer.length-e[r].lineStarts[e[r].lineStarts.length-1]},e[r].lineStarts.length-1,e[r].buffer.length);this._buffers.push(e[r]),i=this.rbInsertRight(i,s)}this._searchCache=new fe(1),this._lastVisitedLine={lineNumber:0,value:""},this.computeBufferMetadata()},e.prototype.normalizeEOL=function(e){var t=this,n=65535-Math.floor(21845),i=2*n,r="",o=0,s=[];if(this.iterate(this.root,(function(a){var u=t.getNodeContent(a),f=u.length;if(o<=n||o+f<i)return r+=u,o+=f,!0;var h=r.replace(/\r\n|\r|\n/g,e);return s.push(new ue(h,se(h))),r=u,o=f,!0})),o>0){var a=r.replace(/\r\n|\r|\n/g,e);s.push(new ue(a,se(a)))}this.create(s,e,!0)},e.prototype.getEOL=function(){return this._EOL},e.prototype.setEOL=function(e){this._EOL=e,this._EOLLength=this._EOL.length,this.normalizeEOL(e)},e.prototype.getOffsetAt=function(e,t){for(var n=0,i=this.root;i!==H;)if(i.left!==H&&i.lf_left+1>=e)i=i.left;else{if(i.lf_left+i.piece.lineFeedCnt+1>=e)return(n+=i.size_left)+(this.getAccumulatedValue(i,e-i.lf_left-2)+t-1);e-=i.lf_left+i.piece.lineFeedCnt,n+=i.size_left+i.piece.length,i=i.right}return n},e.prototype.getPositionAt=function(e){e=Math.floor(e),e=Math.max(0,e);for(var t=this.root,n=0,i=e;t!==H;)if(0!==t.size_left&&t.size_left>=e)t=t.left;else{if(t.size_left+t.piece.length>=e){var r=this.getIndexOf(t,e-t.size_left);if(n+=t.lf_left+r.index,0===r.index){var o=i-this.getOffsetAt(n+1,1);return new f.a(n+1,o+1)}return new f.a(n+1,r.remainder+1)}if(e-=t.size_left+t.piece.length,n+=t.lf_left+t.piece.lineFeedCnt,t.right===H){o=i-e-this.getOffsetAt(n+1,1);return new f.a(n+1,o+1)}t=t.right}return new f.a(1,1)},e.prototype.getValueInRange=function(e,t){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return"";var n=this.nodeAt2(e.startLineNumber,e.startColumn),i=this.nodeAt2(e.endLineNumber,e.endColumn),r=this.getValueInRange2(n,i);return t?t===this._EOL&&this._EOLNormalized&&t===this.getEOL()&&this._EOLNormalized?r:r.replace(/\r\n|\r|\n/g,t):r},e.prototype.getValueInRange2=function(e,t){if(e.node===t.node){var n=e.node,i=this._buffers[n.piece.bufferIndex].buffer,r=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return i.substring(r+e.remainder,r+t.remainder)}var o=e.node,s=this._buffers[o.piece.bufferIndex].buffer,a=this.offsetInBuffer(o.piece.bufferIndex,o.piece.start),u=s.substring(a+e.remainder,a+o.piece.length);for(o=o.next();o!==H;){var f=this._buffers[o.piece.bufferIndex].buffer,h=this.offsetInBuffer(o.piece.bufferIndex,o.piece.start);if(o===t.node){u+=f.substring(h,h+t.remainder);break}u+=f.substr(h,o.piece.length),o=o.next()}return u},e.prototype.getLinesContent=function(){return this.getContentOfSubTree(this.root).split(/\r\n|\r|\n/)},e.prototype.getLength=function(){return this._length},e.prototype.getLineCount=function(){return this._lineCnt},e.prototype.getLineContent=function(e){return this._lastVisitedLine.lineNumber===e?this._lastVisitedLine.value:(this._lastVisitedLine.lineNumber=e,e===this._lineCnt?this._lastVisitedLine.value=this.getLineRawContent(e):this._EOLNormalized?this._lastVisitedLine.value=this.getLineRawContent(e,this._EOLLength):this._lastVisitedLine.value=this.getLineRawContent(e).replace(/(\r\n|\r|\n)$/,""),this._lastVisitedLine.value)},e.prototype.getLineCharCode=function(e,t){var n=this.nodeAt2(e,t+1);if(n.remainder===n.node.piece.length){var i=n.node.next();if(!i)return 0;var r=this._buffers[i.piece.bufferIndex],o=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);return r.buffer.charCodeAt(o)}r=this._buffers[n.node.piece.bufferIndex];var s=(o=this.offsetInBuffer(n.node.piece.bufferIndex,n.node.piece.start))+n.remainder;return r.buffer.charCodeAt(s)},e.prototype.getLineLength=function(e){if(e===this.getLineCount()){var t=this.getOffsetAt(e,1);return this.getLength()-t}return this.getOffsetAt(e+1,1)-this.getOffsetAt(e,1)-this._EOLLength},e.prototype.findMatchesInNode=function(e,t,n,i,r,o,s,a,u,f,l){var c,d,p,g=this._buffers[e.piece.bufferIndex],_=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start),m=this.offsetInBuffer(e.piece.bufferIndex,r),v=this.offsetInBuffer(e.piece.bufferIndex,o),L={line:0,column:0};t._wordSeparators?(d=g.buffer.substring(m,v),p=function(e){return e+m},t.reset(-1)):(d=g.buffer,p=function(e){return e},t.reset(m));do{if(c=t.next(d)){if(p(c.index)>=v)return f;this.positionInBuffer(e,p(c.index)-_,L);var C=this.getLineFeedCnt(e.piece.bufferIndex,r,L),b=L.line===r.line?L.column-r.column+i:L.column+1,I=b+c[0].length;if(l[f++]=Object(ie.d)(new h.a(n+C,b,n+C,I),c,a),p(c.index)+c[0].length>=v)return f;if(f>=u)return f}}while(c);return f},e.prototype.findMatchesLineByLine=function(e,t,n,i){var r=[],o=0,s=new ie.b(t.wordSeparators,t.regex),a=this.nodeAt2(e.startLineNumber,e.startColumn);if(null===a)return[];var u=this.nodeAt2(e.endLineNumber,e.endColumn);if(null===u)return[];var f=this.positionInBuffer(a.node,a.remainder),h=this.positionInBuffer(u.node,u.remainder);if(a.node===u.node)return this.findMatchesInNode(a.node,s,e.startLineNumber,e.startColumn,f,h,t,n,i,o,r),r;for(var l=e.startLineNumber,c=a.node;c!==u.node;){var d=this.getLineFeedCnt(c.piece.bufferIndex,f,c.piece.end);if(d>=1){var p=this._buffers[c.piece.bufferIndex].lineStarts,g=this.offsetInBuffer(c.piece.bufferIndex,c.piece.start),_=p[f.line+d],m=l===e.startLineNumber?e.startColumn:1;if((o=this.findMatchesInNode(c,s,l,m,f,this.positionInBuffer(c,_-g),t,n,i,o,r))>=i)return r;l+=d}var v=l===e.startLineNumber?e.startColumn-1:0;if(l===e.endLineNumber){var L=this.getLineContent(l).substring(v,e.endColumn-1);return o=this._findMatchesInLine(t,s,L,e.endLineNumber,v,o,r,n,i),r}if((o=this._findMatchesInLine(t,s,this.getLineContent(l).substr(v),l,v,o,r,n,i))>=i)return r;l++,c=(a=this.nodeAt2(l,1)).node,f=this.positionInBuffer(a.node,a.remainder)}if(l===e.endLineNumber){var C=l===e.startLineNumber?e.startColumn-1:0;L=this.getLineContent(l).substring(C,e.endColumn-1);return o=this._findMatchesInLine(t,s,L,e.endLineNumber,C,o,r,n,i),r}var b=l===e.startLineNumber?e.startColumn:1;return o=this.findMatchesInNode(u.node,s,l,b,f,h,t,n,i,o,r),r},e.prototype._findMatchesInLine=function(e,t,n,i,r,o,s,a,u){var f,l=e.wordSeparators;if(!a&&e.simpleSearch){for(var d=e.simpleSearch,p=d.length,g=n.length,_=-p;-1!==(_=n.indexOf(d,_+p));)if((!l||Object(ie.e)(l,n,g,_,p))&&(s[o++]=new c.b(new h.a(i,_+1+r,i,_+1+p+r),null),o>=u))return o;return o}t.reset(0);do{if((f=t.next(n))&&(s[o++]=Object(ie.d)(new h.a(i,f.index+1+r,i,f.index+1+f[0].length+r),f,a),o>=u))return o}while(f);return o},e.prototype.insert=function(e,t,n){if(void 0===n&&(n=!1),this._EOLNormalized=this._EOLNormalized&&n,this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",this.root!==H){var i=this.nodeAt(e),r=i.node,o=i.remainder,s=i.nodeStartOffset,a=r.piece,u=a.bufferIndex,f=this.positionInBuffer(r,o);if(0===r.piece.bufferIndex&&a.end.line===this._lastChangeBufferPos.line&&a.end.column===this._lastChangeBufferPos.column&&s+a.length===e&&t.length<65535)return this.appendToNode(r,t),void this.computeBufferMetadata();if(s===e)this.insertContentToNodeLeft(t,r),this._searchCache.valdiate(e);else if(s+r.piece.length>e){var h=[],l=new ae(a.bufferIndex,f,a.end,this.getLineFeedCnt(a.bufferIndex,f,a.end),this.offsetInBuffer(u,a.end)-this.offsetInBuffer(u,f));if(this.shouldCheckCRLF()&&this.endWithCR(t))if(10===this.nodeCharCodeAt(r,o)){var c={line:l.start.line+1,column:0};l=new ae(l.bufferIndex,c,l.end,this.getLineFeedCnt(l.bufferIndex,c,l.end),l.length-1),t+="\n"}if(this.shouldCheckCRLF()&&this.startWithLF(t))if(13===this.nodeCharCodeAt(r,o-1)){var d=this.positionInBuffer(r,o-1);this.deleteNodeTail(r,d),t="\r"+t,0===r.piece.length&&h.push(r)}else this.deleteNodeTail(r,f);else this.deleteNodeTail(r,f);var p=this.createNewPieces(t);l.length>0&&this.rbInsertRight(r,l);for(var g=r,_=0;_<p.length;_++)g=this.rbInsertRight(g,p[_]);this.deleteNodes(h)}else this.insertContentToNodeRight(t,r)}else{var m=this.createNewPieces(t);for(r=this.rbInsertLeft(null,m[0]),_=1;_<m.length;_++)r=this.rbInsertRight(r,m[_])}this.computeBufferMetadata()},e.prototype.delete=function(e,t){if(this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",!(t<=0||this.root===H)){var n=this.nodeAt(e),i=this.nodeAt(e+t),r=n.node,o=i.node;if(r===o){var s=this.positionInBuffer(r,n.remainder),a=this.positionInBuffer(r,i.remainder);if(n.nodeStartOffset===e){if(t===r.piece.length){var u=r.next();return X(this,r),this.validateCRLFWithPrevNode(u),void this.computeBufferMetadata()}return this.deleteNodeHead(r,a),this._searchCache.valdiate(e),this.validateCRLFWithPrevNode(r),void this.computeBufferMetadata()}return n.nodeStartOffset+r.piece.length===e+t?(this.deleteNodeTail(r,s),this.validateCRLFWithNextNode(r),void this.computeBufferMetadata()):(this.shrinkNode(r,s,a),void this.computeBufferMetadata())}var f=[],h=this.positionInBuffer(r,n.remainder);this.deleteNodeTail(r,h),this._searchCache.valdiate(e),0===r.piece.length&&f.push(r);var l=this.positionInBuffer(o,i.remainder);this.deleteNodeHead(o,l),0===o.piece.length&&f.push(o);for(var c=r.next();c!==H&&c!==o;c=c.next())f.push(c);var d=0===r.piece.length?r.prev():r;this.deleteNodes(f),this.validateCRLFWithNextNode(d),this.computeBufferMetadata()}},e.prototype.insertContentToNodeLeft=function(e,t){var n=[];if(this.shouldCheckCRLF()&&this.endWithCR(e)&&this.startWithLF(t)){var i=t.piece,r={line:i.start.line+1,column:0},o=new ae(i.bufferIndex,r,i.end,this.getLineFeedCnt(i.bufferIndex,r,i.end),i.length-1);t.piece=o,e+="\n",te(this,t,-1,-1),0===t.piece.length&&n.push(t)}for(var s=this.createNewPieces(e),a=this.rbInsertLeft(t,s[s.length-1]),u=s.length-2;u>=0;u--)a=this.rbInsertLeft(a,s[u]);this.validateCRLFWithPrevNode(a),this.deleteNodes(n)},e.prototype.insertContentToNodeRight=function(e,t){this.adjustCarriageReturnFromNext(e,t)&&(e+="\n");for(var n=this.createNewPieces(e),i=this.rbInsertRight(t,n[0]),r=i,o=1;o<n.length;o++)r=this.rbInsertRight(r,n[o]);this.validateCRLFWithPrevNode(i)},e.prototype.positionInBuffer=function(e,t,n){for(var i=e.piece,r=e.piece.bufferIndex,o=this._buffers[r].lineStarts,s=o[i.start.line]+i.start.column+t,a=i.start.line,u=i.end.line,f=0,h=0,l=0;a<=u&&(l=o[f=a+(u-a)/2|0],f!==u);)if(h=o[f+1],s<l)u=f-1;else{if(!(s>=h))break;a=f+1}return n?(n.line=f,n.column=s-l,null):{line:f,column:s-l}},e.prototype.getLineFeedCnt=function(e,t,n){if(0===n.column)return n.line-t.line;var i=this._buffers[e].lineStarts;if(n.line===i.length-1)return n.line-t.line;var r=i[n.line+1],o=i[n.line]+n.column;if(r>o+1)return n.line-t.line;var s=o-1;return 13===this._buffers[e].buffer.charCodeAt(s)?n.line-t.line+1:n.line-t.line},e.prototype.offsetInBuffer=function(e,t){return this._buffers[e].lineStarts[t.line]+t.column},e.prototype.deleteNodes=function(e){for(var t=0;t<e.length;t++)X(this,e[t])},e.prototype.createNewPieces=function(e){if(e.length>65535){for(var t=[];e.length>65535;){var n=e.charCodeAt(65534),i=void 0;13===n||n>=55296&&n<=56319?(i=e.substring(0,65534),e=e.substring(65534)):(i=e.substring(0,65535),e=e.substring(65535));var r=se(i);t.push(new ae(this._buffers.length,{line:0,column:0},{line:r.length-1,column:i.length-r[r.length-1]},r.length-1,i.length)),this._buffers.push(new ue(i,r))}var o=se(e);return t.push(new ae(this._buffers.length,{line:0,column:0},{line:o.length-1,column:e.length-o[o.length-1]},o.length-1,e.length)),this._buffers.push(new ue(e,o)),t}var s=this._buffers[0].buffer.length,a=se(e,!1),u=this._lastChangeBufferPos;if(this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-1]===s&&0!==s&&this.startWithLF(e)&&this.endWithCR(this._buffers[0].buffer)){this._lastChangeBufferPos={line:this._lastChangeBufferPos.line,column:this._lastChangeBufferPos.column+1},u=this._lastChangeBufferPos;for(var f=0;f<a.length;f++)a[f]+=s+1;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(a.slice(1)),this._buffers[0].buffer+="_"+e,s+=1}else{if(0!==s)for(f=0;f<a.length;f++)a[f]+=s;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(a.slice(1)),this._buffers[0].buffer+=e}var h=this._buffers[0].buffer.length,l=this._buffers[0].lineStarts.length-1,c={line:l,column:h-this._buffers[0].lineStarts[l]},d=new ae(0,u,c,this.getLineFeedCnt(0,u,c),h-s);return this._lastChangeBufferPos=c,[d]},e.prototype.getLineRawContent=function(e,t){void 0===t&&(t=0);var n=this.root,i="",r=this._searchCache.get2(e);if(r){n=r.node;var o=this.getAccumulatedValue(n,e-r.nodeStartLineNumber-1),s=this._buffers[n.piece.bufferIndex].buffer,a=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);if(r.nodeStartLineNumber+n.piece.lineFeedCnt!==e){var u=this.getAccumulatedValue(n,e-r.nodeStartLineNumber);return s.substring(a+o,a+u-t)}i=s.substring(a+o,a+n.piece.length)}else for(var f=0,h=e;n!==H;)if(n.left!==H&&n.lf_left>=e-1)n=n.left;else{if(n.lf_left+n.piece.lineFeedCnt>e-1){o=this.getAccumulatedValue(n,e-n.lf_left-2),u=this.getAccumulatedValue(n,e-n.lf_left-1),s=this._buffers[n.piece.bufferIndex].buffer,a=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return f+=n.size_left,this._searchCache.set({node:n,nodeStartOffset:f,nodeStartLineNumber:h-(e-1-n.lf_left)}),s.substring(a+o,a+u-t)}if(n.lf_left+n.piece.lineFeedCnt===e-1){o=this.getAccumulatedValue(n,e-n.lf_left-2),s=this._buffers[n.piece.bufferIndex].buffer,a=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);i=s.substring(a+o,a+n.piece.length);break}e-=n.lf_left+n.piece.lineFeedCnt,f+=n.size_left+n.piece.length,n=n.right}for(n=n.next();n!==H;){s=this._buffers[n.piece.bufferIndex].buffer;if(n.piece.lineFeedCnt>0){u=this.getAccumulatedValue(n,0),a=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return i+=s.substring(a,a+u-t)}a=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);i+=s.substr(a,n.piece.length),n=n.next()}return i},e.prototype.computeBufferMetadata=function(){for(var e=this.root,t=1,n=0;e!==H;)t+=e.lf_left+e.piece.lineFeedCnt,n+=e.size_left+e.piece.length,e=e.right;this._lineCnt=t,this._length=n,this._searchCache.valdiate(this._length)},e.prototype.getIndexOf=function(e,t){var n=e.piece,i=this.positionInBuffer(e,t),r=i.line-n.start.line;if(this.offsetInBuffer(n.bufferIndex,n.end)-this.offsetInBuffer(n.bufferIndex,n.start)===t){var o=this.getLineFeedCnt(e.piece.bufferIndex,n.start,i);if(o!==r)return{index:o,remainder:0}}return{index:r,remainder:i.column}},e.prototype.getAccumulatedValue=function(e,t){if(t<0)return 0;var n=e.piece,i=this._buffers[n.bufferIndex].lineStarts,r=n.start.line+t+1;return r>n.end.line?i[n.end.line]+n.end.column-i[n.start.line]-n.start.column:i[r]-i[n.start.line]-n.start.column},e.prototype.deleteNodeTail=function(e,t){var n=e.piece,i=n.lineFeedCnt,r=this.offsetInBuffer(n.bufferIndex,n.end),o=t,s=this.offsetInBuffer(n.bufferIndex,o),a=this.getLineFeedCnt(n.bufferIndex,n.start,o),u=a-i,f=s-r,h=n.length+f;e.piece=new ae(n.bufferIndex,n.start,o,a,h),te(this,e,f,u)},e.prototype.deleteNodeHead=function(e,t){var n=e.piece,i=n.lineFeedCnt,r=this.offsetInBuffer(n.bufferIndex,n.start),o=t,s=this.getLineFeedCnt(n.bufferIndex,o,n.end),a=s-i,u=r-this.offsetInBuffer(n.bufferIndex,o),f=n.length+u;e.piece=new ae(n.bufferIndex,o,n.end,s,f),te(this,e,u,a)},e.prototype.shrinkNode=function(e,t,n){var i=e.piece,r=i.start,o=i.end,s=i.length,a=i.lineFeedCnt,u=t,f=this.getLineFeedCnt(i.bufferIndex,i.start,u),h=this.offsetInBuffer(i.bufferIndex,t)-this.offsetInBuffer(i.bufferIndex,r);e.piece=new ae(i.bufferIndex,i.start,u,f,h),te(this,e,h-s,f-a);var l=new ae(i.bufferIndex,n,o,this.getLineFeedCnt(i.bufferIndex,n,o),this.offsetInBuffer(i.bufferIndex,o)-this.offsetInBuffer(i.bufferIndex,n)),c=this.rbInsertRight(e,l);this.validateCRLFWithPrevNode(c)},e.prototype.appendToNode=function(e,t){this.adjustCarriageReturnFromNext(t,e)&&(t+="\n");var n=this.shouldCheckCRLF()&&this.startWithLF(t)&&this.endWithCR(e),i=this._buffers[0].buffer.length;this._buffers[0].buffer+=t;for(var r=se(t,!1),o=0;o<r.length;o++)r[o]+=i;if(n){var s=this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-2];this._buffers[0].lineStarts.pop(),this._lastChangeBufferPos={line:this._lastChangeBufferPos.line-1,column:i-s}}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(r.slice(1));var a=this._buffers[0].lineStarts.length-1,u={line:a,column:this._buffers[0].buffer.length-this._buffers[0].lineStarts[a]},f=e.piece.length+t.length,h=e.piece.lineFeedCnt,l=this.getLineFeedCnt(0,e.piece.start,u),c=l-h;e.piece=new ae(e.piece.bufferIndex,e.piece.start,u,l,f),this._lastChangeBufferPos=u,te(this,e,t.length,c)},e.prototype.nodeAt=function(e){var t=this.root,n=this._searchCache.get(e);if(n)return{node:n.node,nodeStartOffset:n.nodeStartOffset,remainder:e-n.nodeStartOffset};for(var i=0;t!==H;)if(t.size_left>e)t=t.left;else{if(t.size_left+t.piece.length>=e){i+=t.size_left;var r={node:t,remainder:e-t.size_left,nodeStartOffset:i};return this._searchCache.set(r),r}e-=t.size_left+t.piece.length,i+=t.size_left+t.piece.length,t=t.right}return null},e.prototype.nodeAt2=function(e,t){for(var n=this.root,i=0;n!==H;)if(n.left!==H&&n.lf_left>=e-1)n=n.left;else{if(n.lf_left+n.piece.lineFeedCnt>e-1){var r=this.getAccumulatedValue(n,e-n.lf_left-2),o=this.getAccumulatedValue(n,e-n.lf_left-1);return i+=n.size_left,{node:n,remainder:Math.min(r+t-1,o),nodeStartOffset:i}}if(n.lf_left+n.piece.lineFeedCnt===e-1){if((r=this.getAccumulatedValue(n,e-n.lf_left-2))+t-1<=n.piece.length)return{node:n,remainder:r+t-1,nodeStartOffset:i};t-=n.piece.length-r;break}e-=n.lf_left+n.piece.lineFeedCnt,i+=n.size_left+n.piece.length,n=n.right}for(n=n.next();n!==H;){if(n.piece.lineFeedCnt>0){o=this.getAccumulatedValue(n,0);var s=this.offsetOfNode(n);return{node:n,remainder:Math.min(t-1,o),nodeStartOffset:s}}if(n.piece.length>=t-1)return{node:n,remainder:t-1,nodeStartOffset:this.offsetOfNode(n)};t-=n.piece.length,n=n.next()}return null},e.prototype.nodeCharCodeAt=function(e,t){if(e.piece.lineFeedCnt<1)return-1;var n=this._buffers[e.piece.bufferIndex],i=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start)+t;return n.buffer.charCodeAt(i)},e.prototype.offsetOfNode=function(e){if(!e)return 0;for(var t=e.size_left;e!==this.root;)e.parent.right===e&&(t+=e.parent.size_left+e.parent.piece.length),e=e.parent;return t},e.prototype.shouldCheckCRLF=function(){return!(this._EOLNormalized&&"\n"===this._EOL)},e.prototype.startWithLF=function(e){if("string"===typeof e)return 10===e.charCodeAt(0);if(e===H||0===e.piece.lineFeedCnt)return!1;var t=e.piece,n=this._buffers[t.bufferIndex].lineStarts,i=t.start.line,r=n[i]+t.start.column;return i!==n.length-1&&(!(n[i+1]>r+1)&&10===this._buffers[t.bufferIndex].buffer.charCodeAt(r))},e.prototype.endWithCR=function(e){return"string"===typeof e?13===e.charCodeAt(e.length-1):e!==H&&0!==e.piece.lineFeedCnt&&13===this.nodeCharCodeAt(e,e.piece.length-1)},e.prototype.validateCRLFWithPrevNode=function(e){if(this.shouldCheckCRLF()&&this.startWithLF(e)){var t=e.prev();this.endWithCR(t)&&this.fixCRLF(t,e)}},e.prototype.validateCRLFWithNextNode=function(e){if(this.shouldCheckCRLF()&&this.endWithCR(e)){var t=e.next();this.startWithLF(t)&&this.fixCRLF(e,t)}},e.prototype.fixCRLF=function(e,t){var n,i=[],r=this._buffers[e.piece.bufferIndex].lineStarts;n=0===e.piece.end.column?{line:e.piece.end.line-1,column:r[e.piece.end.line]-r[e.piece.end.line-1]-1}:{line:e.piece.end.line,column:e.piece.end.column-1};var o=e.piece.length-1,s=e.piece.lineFeedCnt-1;e.piece=new ae(e.piece.bufferIndex,e.piece.start,n,s,o),te(this,e,-1,-1),0===e.piece.length&&i.push(e);var a={line:t.piece.start.line+1,column:0},u=t.piece.length-1,f=this.getLineFeedCnt(t.piece.bufferIndex,a,t.piece.end);t.piece=new ae(t.piece.bufferIndex,a,t.piece.end,f,u),te(this,t,-1,-1),0===t.piece.length&&i.push(t);var h=this.createNewPieces("\r\n");this.rbInsertRight(e,h[0]);for(var l=0;l<i.length;l++)X(this,i[l])},e.prototype.adjustCarriageReturnFromNext=function(e,t){if(this.shouldCheckCRLF()&&this.endWithCR(e)){var n=t.next();if(this.startWithLF(n)){if(e+="\n",1===n.piece.length)X(this,n);else{var i=n.piece,r={line:i.start.line+1,column:0},o=i.length-1,s=this.getLineFeedCnt(i.bufferIndex,r,i.end);n.piece=new ae(i.bufferIndex,r,i.end,s,o),te(this,n,-1,-1)}return!0}}return!1},e.prototype.iterate=function(e,t){if(e===H)return t(H);var n=this.iterate(e.left,t);return n?t(e)&&this.iterate(e.right,t):n},e.prototype.getNodeContent=function(e){if(e===H)return"";var t=this._buffers[e.piece.bufferIndex],n=e.piece,i=this.offsetInBuffer(n.bufferIndex,n.start),r=this.offsetInBuffer(n.bufferIndex,n.end);return t.buffer.substring(i,r)},e.prototype.rbInsertRight=function(e,t){var n=new q(t,1);if(n.left=H,n.right=H,n.parent=H,n.size_left=0,n.lf_left=0,this.root===H)this.root=n,n.color=0;else if(e.right===H)e.right=n,n.parent=e;else{var i=G(e.right);i.left=n,n.parent=i}return ee(this,n),n},e.prototype.rbInsertLeft=function(e,t){var n=new q(t,1);if(n.left=H,n.right=H,n.parent=H,n.size_left=0,n.lf_left=0,this.root===H)this.root=n,n.color=0;else if(e.left===H)e.left=n,n.parent=e;else{var i=Y(e.left);i.right=n,n.parent=i}return ee(this,n),n},e.prototype.getContentOfSubTree=function(e){var t=this,n="";return this.iterate(e,(function(e){return n+=t.getNodeContent(e),!0})),n},e}(),le=function(){function e(e,t,n,i,r,o){this._BOM=t,this._mightContainNonBasicASCII=!r,this._mightContainRTL=i,this._pieceTree=new he(e,n,o)}return e.prototype.mightContainRTL=function(){return this._mightContainRTL},e.prototype.mightContainNonBasicASCII=function(){return this._mightContainNonBasicASCII},e.prototype.getBOM=function(){return this._BOM},e.prototype.getEOL=function(){return this._pieceTree.getEOL()},e.prototype.getOffsetAt=function(e,t){return this._pieceTree.getOffsetAt(e,t)},e.prototype.getPositionAt=function(e){return this._pieceTree.getPositionAt(e)},e.prototype.getRangeAt=function(e,t){var n=e+t,i=this.getPositionAt(e),r=this.getPositionAt(n);return new h.a(i.lineNumber,i.column,r.lineNumber,r.column)},e.prototype.getValueInRange=function(e,t){if(void 0===t&&(t=0),e.isEmpty())return"";var n=this._getEndOfLine(t);return this._pieceTree.getValueInRange(e,n)},e.prototype.getValueLengthInRange=function(e,t){if(void 0===t&&(t=0),e.isEmpty())return 0;if(e.startLineNumber===e.endLineNumber)return e.endColumn-e.startColumn;var n=this.getOffsetAt(e.startLineNumber,e.startColumn);return this.getOffsetAt(e.endLineNumber,e.endColumn)-n},e.prototype.getCharacterCountInRange=function(e,t){if(void 0===t&&(t=0),this._mightContainNonBasicASCII){for(var n=0,i=e.startLineNumber,r=e.endLineNumber,o=i;o<=r;o++)for(var a=this.getLineContent(o),u=o===i?e.startColumn-1:0,f=o===r?e.endColumn-1:a.length,h=u;h<f;h++)s.A(a.charCodeAt(h))?(n+=1,h+=1):n+=1;return n+=this._getEndOfLine(t).length*(r-i)}return this.getValueLengthInRange(e,t)},e.prototype.getLength=function(){return this._pieceTree.getLength()},e.prototype.getLineCount=function(){return this._pieceTree.getLineCount()},e.prototype.getLinesContent=function(){return this._pieceTree.getLinesContent()},e.prototype.getLineContent=function(e){return this._pieceTree.getLineContent(e)},e.prototype.getLineCharCode=function(e,t){return this._pieceTree.getLineCharCode(e,t)},e.prototype.getLineLength=function(e){return this._pieceTree.getLineLength(e)},e.prototype.getLineFirstNonWhitespaceColumn=function(e){var t=s.q(this.getLineContent(e));return-1===t?0:t+1},e.prototype.getLineLastNonWhitespaceColumn=function(e){var t=s.E(this.getLineContent(e));return-1===t?0:t+2},e.prototype._getEndOfLine=function(e){switch(e){case 1:return"\n";case 2:return"\r\n";case 0:return this.getEOL()}throw new Error("Unknown EOL preference")},e.prototype.setEOL=function(e){this._pieceTree.setEOL(e)},e.prototype.applyEdits=function(t,n){for(var i=this._mightContainRTL,r=this._mightContainNonBasicASCII,o=!0,a=[],u=0;u<t.length;u++){var f=t[u];o&&f._isTracked&&(o=!1);var h=f.range;!i&&f.text&&(i=s.i(f.text)),!r&&f.text&&(r=!s.w(f.text)),a[u]={sortIndex:u,identifier:f.identifier||null,range:h,rangeOffset:this.getOffsetAt(h.startLineNumber,h.startColumn),rangeLength:this.getValueLengthInRange(h),lines:f.text?f.text.split(/\r\n|\r|\n/):null,forceMoveMarkers:Boolean(f.forceMoveMarkers),isAutoWhitespaceEdit:f.isAutoWhitespaceEdit||!1}}a.sort(e._sortOpsAscending);for(var l=!1,d=(u=0,a.length-1);u<d;u++){var p=a[u].range.getEndPosition(),g=a[u+1].range.getStartPosition();if(g.isBeforeOrEqual(p)){if(g.isBefore(p))throw new Error("Overlapping ranges are not allowed!");l=!0}}o&&(a=this._reduceOperations(a));var _=e._getInverseEditRanges(a),m=[];for(u=0;u<a.length;u++){f=a[u];var v=_[u];if(n&&f.isAutoWhitespaceEdit&&f.range.isEmpty())for(var L=v.startLineNumber;L<=v.endLineNumber;L++){var C="";L===v.startLineNumber&&(C=this.getLineContent(f.range.startLineNumber),-1!==s.q(C))||m.push({lineNumber:L,oldContent:C})}}var b=[];for(u=0;u<a.length;u++){f=a[u],v=_[u];b[u]={sortIndex:f.sortIndex,identifier:f.identifier,range:v,text:this.getValueInRange(f.range),forceMoveMarkers:f.forceMoveMarkers}}l||b.sort((function(e,t){return e.sortIndex-t.sortIndex})),this._mightContainRTL=i,this._mightContainNonBasicASCII=r;var I=this._doApplyEdits(a),y=null;if(n&&m.length>0){m.sort((function(e,t){return t.lineNumber-e.lineNumber})),y=[];u=0;for(var N=m.length;u<N;u++){L=m[u].lineNumber;if(!(u>0&&m[u-1].lineNumber===L)){var k=m[u].oldContent,S=this.getLineContent(L);0!==S.length&&S!==k&&-1===s.q(S)&&y.push(L)}}}return new c.a(b,I,y)},e.prototype._reduceOperations=function(e){return e.length<1e3?e:[this._toSingleEditOperation(e)]},e.prototype._toSingleEditOperation=function(e){for(var t=!1,n=e[0].range,i=e[e.length-1].range,r=new h.a(n.startLineNumber,n.startColumn,i.endLineNumber,i.endColumn),o=n.startLineNumber,s=n.startColumn,a=[],u=0,f=e.length;u<f;u++){var l=e[u],c=l.range;t=t||l.forceMoveMarkers;for(var d=o;d<c.startLineNumber;d++)d===o?a.push(this.getLineContent(d).substring(s-1)):(a.push("\n"),a.push(this.getLineContent(d)));if(c.startLineNumber===o?a.push(this.getLineContent(c.startLineNumber).substring(s-1,c.startColumn-1)):(a.push("\n"),a.push(this.getLineContent(c.startLineNumber).substring(0,c.startColumn-1))),l.lines)for(var p=0,g=l.lines.length;p<g;p++)0!==p&&a.push("\n"),a.push(l.lines[p]);o=l.range.endLineNumber,s=l.range.endColumn}return{sortIndex:0,identifier:e[0].identifier,range:r,rangeOffset:this.getOffsetAt(r.startLineNumber,r.startColumn),rangeLength:this.getValueLengthInRange(r,0),lines:a.join("").split("\n"),forceMoveMarkers:t,isAutoWhitespaceEdit:!1}},e.prototype._doApplyEdits=function(t){t.sort(e._sortOpsDescending);for(var n=[],i=0;i<t.length;i++){var r=t[i],o=r.range.startLineNumber,s=r.range.startColumn,a=r.range.endLineNumber,u=r.range.endColumn;if(o!==a||s!==u||r.lines&&0!==r.lines.length){var f=a-o,l=r.lines?r.lines.length-1:0,c=Math.min(f,l),d=r.lines?r.lines.join(this.getEOL()):"";if(d?(this._pieceTree.delete(r.rangeOffset,r.rangeLength),this._pieceTree.insert(r.rangeOffset,d,!0)):this._pieceTree.delete(r.rangeOffset,r.rangeLength),c<l){for(var p=[],g=c+1;g<=l;g++)p.push(r.lines[g]);p[p.length-1]=this.getLineContent(o+l-1)}var _=new h.a(o,s,a,u);n.push({range:_,rangeLength:r.rangeLength,text:d,rangeOffset:r.rangeOffset,forceMoveMarkers:r.forceMoveMarkers})}}return n},e.prototype.findMatchesLineByLine=function(e,t,n,i){return this._pieceTree.findMatchesLineByLine(e,t,n,i)},e._getInverseEditRanges=function(e){for(var t=[],n=0,i=0,r=null,o=0,s=e.length;o<s;o++){var a=e[o],u=void 0,f=void 0;r?r.range.endLineNumber===a.range.startLineNumber?(u=n,f=i+(a.range.startColumn-r.range.endColumn)):(u=n+(a.range.startLineNumber-r.range.endLineNumber),f=a.range.startColumn):(u=a.range.startLineNumber,f=a.range.startColumn);var l=void 0;if(a.lines&&a.lines.length>0){var c=a.lines.length,d=a.lines[0],p=a.lines[c-1];l=1===c?new h.a(u,f,u,f+d.length):new h.a(u,f,u+c-1,p.length+1)}else l=new h.a(u,f,u,f);n=l.endLineNumber,i=l.endColumn,t.push(l),r=a}return t},e._sortOpsAscending=function(e,t){var n=h.a.compareRangesUsingEnds(e.range,t.range);return 0===n?e.sortIndex-t.sortIndex:n},e._sortOpsDescending=function(e,t){var n=h.a.compareRangesUsingEnds(e.range,t.range);return 0===n?t.sortIndex-e.sortIndex:-n},e}(),ce=function(){function e(e,t,n,i,r,o,s,a){this._chunks=e,this._bom=t,this._cr=n,this._lf=i,this._crlf=r,this._containsRTL=o,this._isBasicASCII=s,this._normalizeEOL=a}return e.prototype._getEOL=function(e){var t=this._cr+this._lf+this._crlf,n=this._cr+this._crlf;return 0===t?1===e?"\n":"\r\n":n>t/2?"\r\n":"\n"},e.prototype.create=function(e){var t=this._getEOL(e),n=this._chunks;if(this._normalizeEOL&&("\r\n"===t&&(this._cr>0||this._lf>0)||"\n"===t&&(this._cr>0||this._crlf>0)))for(var i=0,r=n.length;i<r;i++){var o=n[i].buffer.replace(/\r\n|\r|\n/g,t),s=se(o);n[i]=new ue(o,s)}return new le(n,this._bom,t,this._containsRTL,this._isBasicASCII,this._normalizeEOL)},e}(),de=function(){function e(){this.chunks=[],this.BOM="",this._hasPreviousChar=!1,this._previousChar=0,this._tmpLineStarts=[],this.cr=0,this.lf=0,this.crlf=0,this.containsRTL=!1,this.isBasicASCII=!0}return e.prototype.acceptChunk=function(e){if(0!==e.length){0===this.chunks.length&&s.Q(e)&&(this.BOM=s.a,e=e.substr(1));var t=e.charCodeAt(e.length-1);13===t||t>=55296&&t<=56319?(this._acceptChunk1(e.substr(0,e.length-1),!1),this._hasPreviousChar=!0,this._previousChar=t):(this._acceptChunk1(e,!1),this._hasPreviousChar=!1,this._previousChar=t)}},e.prototype._acceptChunk1=function(e,t){(t||0!==e.length)&&(this._hasPreviousChar?this._acceptChunk2(String.fromCharCode(this._previousChar)+e):this._acceptChunk2(e))},e.prototype._acceptChunk2=function(e){var t=function(e,t){e.length=0,e[0]=0;for(var n=1,i=0,r=0,o=0,s=!0,a=0,u=t.length;a<u;a++){var f=t.charCodeAt(a);13===f?a+1<u&&10===t.charCodeAt(a+1)?(o++,e[n++]=a+2,a++):(i++,e[n++]=a+1):10===f?(r++,e[n++]=a+1):s&&9!==f&&(f<32||f>126)&&(s=!1)}var h=new oe(re(e),i,r,o,s);return e.length=0,h}(this._tmpLineStarts,e);this.chunks.push(new ue(e,t.lineStarts)),this.cr+=t.cr,this.lf+=t.lf,this.crlf+=t.crlf,this.isBasicASCII&&(this.isBasicASCII=t.isBasicASCII),this.isBasicASCII||this.containsRTL||(this.containsRTL=s.i(e))},e.prototype.finish=function(e){return void 0===e&&(e=!0),this._finish(),new ce(this.chunks,this.BOM,this.cr,this.lf,this.crlf,this.containsRTL,this.isBasicASCII,e)},e.prototype._finish=function(){if(0===this.chunks.length&&this._acceptChunk1("",!0),this._hasPreviousChar){this._hasPreviousChar=!1;var e=this.chunks[this.chunks.length-1];e.buffer+=String.fromCharCode(this._previousChar);var t=se(e.buffer);e.lineStarts=t,13===this._previousChar&&this.cr++}},e}(),pe=function(){this.changeType=1},ge=function(e,t){this.changeType=2,this.lineNumber=e,this.detail=t},_e=function(e,t){this.changeType=3,this.fromLineNumber=e,this.toLineNumber=t},me=function(e,t,n){this.changeType=4,this.fromLineNumber=e,this.toLineNumber=t,this.detail=n},ve=function(){this.changeType=5},Le=function(){function e(e,t,n,i){this.changes=e,this.versionId=t,this.isUndoing=n,this.isRedoing=i}return e.prototype.containsEvent=function(e){for(var t=0,n=this.changes.length;t<n;t++){if(this.changes[t].changeType===e)return!0}return!1},e.merge=function(t,n){return new e([].concat(t.changes).concat(n.changes),n.versionId,t.isUndoing||n.isUndoing,t.isRedoing||n.isRedoing)},e}(),Ce=function(){function e(e,t){this.rawContentChangedEvent=e,this.contentChangedEvent=t}return e.prototype.merge=function(t){var n=Le.merge(this.rawContentChangedEvent,t.rawContentChangedEvent),i=e._mergeChangeEvents(this.contentChangedEvent,t.contentChangedEvent);return new e(n,i)},e._mergeChangeEvents=function(e,t){return{changes:[].concat(e.changes).concat(t.changes),eol:t.eol,versionId:t.versionId,isUndoing:e.isUndoing||t.isUndoing,isRedoing:e.isRedoing||t.isRedoing,isFlush:e.isFlush||t.isFlush}},e}(),be=n(17),Ie=n(115),ye=n(12),Ne=n(90),ke=n(232),Se=n(154),xe=n(15),we=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Ee=function(){function e(){this._beginState=[],this._valid=[],this._len=0,this._invalidLineStartIndex=0}return e.prototype._reset=function(e){this._beginState=[],this._valid=[],this._len=0,this._invalidLineStartIndex=0,e&&this._setBeginState(0,e)},e.prototype.flush=function(e){this._reset(e)},Object.defineProperty(e.prototype,"invalidLineStartIndex",{get:function(){return this._invalidLineStartIndex},enumerable:!0,configurable:!0}),e.prototype._invalidateLine=function(e){e<this._len&&(this._valid[e]=!1),e<this._invalidLineStartIndex&&(this._invalidLineStartIndex=e)},e.prototype._isValid=function(e){return e<this._len&&this._valid[e]},e.prototype.getBeginState=function(e){return e<this._len?this._beginState[e]:null},e.prototype._ensureLine=function(e){for(;e>=this._len;)this._beginState[this._len]=null,this._valid[this._len]=!1,this._len++},e.prototype._deleteLines=function(e,t){0!==t&&(e+t>this._len&&(t=this._len-e),this._beginState.splice(e,t),this._valid.splice(e,t),this._len-=t)},e.prototype._insertLines=function(e,t){if(0!==t){for(var n=[],i=[],r=0;r<t;r++)n[r]=null,i[r]=!1;this._beginState=be.a(this._beginState,e,n),this._valid=be.a(this._valid,e,i),this._len+=t}},e.prototype._setValid=function(e,t){this._ensureLine(e),this._valid[e]=t},e.prototype._setBeginState=function(e,t){this._ensureLine(e),this._beginState[e]=t},e.prototype.setEndState=function(e,t,n){if(this._setValid(t,!0),this._invalidLineStartIndex=t+1,t!==e-1){var i=this.getBeginState(t+1);if(null===i||!n.equals(i))return this._setBeginState(t+1,n),void this._invalidateLine(t+1);for(var r=t+1;r<e&&this._isValid(r);)r++;this._invalidLineStartIndex=r}},e.prototype.setFakeTokens=function(e){this._setValid(e,!1)},e.prototype.applyEdits=function(e,t){for(var n=e.endLineNumber-e.startLineNumber,i=t,r=Math.min(n,i);r>=0;r--)this._invalidateLine(e.startLineNumber+r-1);this._acceptDeleteRange(e),this._acceptInsertText(new f.a(e.startLineNumber,e.startColumn),t)},e.prototype._acceptDeleteRange=function(e){e.startLineNumber-1>=this._len||this._deleteLines(e.startLineNumber,e.endLineNumber-e.startLineNumber)},e.prototype._acceptInsertText=function(e,t){e.lineNumber-1>=this._len||this._insertLines(e.lineNumber,t)},e}(),Oe=function(e){function t(t){var n=e.call(this)||this;return n._isDisposed=!1,n._textModel=t,n._tokenizationStateStore=new Ee,n._tokenizationSupport=null,n._register(ye.A.onDidChange((function(e){var t=n._textModel.getLanguageIdentifier();-1!==e.changedLanguages.indexOf(t.language)&&(n._resetTokenizationState(),n._textModel.clearTokens())}))),n._register(n._textModel.onDidChangeRawContentFast((function(e){e.containsEvent(1)&&n._resetTokenizationState()}))),n._register(n._textModel.onDidChangeContentFast((function(e){for(var t=0,i=e.changes.length;t<i;t++){var r=e.changes[t],o=Object(Se.f)(r.text)[0];n._tokenizationStateStore.applyEdits(r.range,o)}n._beginBackgroundTokenization()}))),n._register(n._textModel.onDidChangeAttached((function(){n._beginBackgroundTokenization()}))),n._register(n._textModel.onDidChangeLanguage((function(){n._resetTokenizationState(),n._textModel.clearTokens()}))),n._resetTokenizationState(),n}return we(t,e),t.prototype.dispose=function(){this._isDisposed=!0,e.prototype.dispose.call(this)},t.prototype._resetTokenizationState=function(){var e=function(e){var t=e.getLanguageIdentifier(),n=e.isTooLargeForTokenization()?null:ye.A.get(t.language),r=null;if(n)try{r=n.getInitialState()}catch(o){Object(i.e)(o),n=null}return[n,r]}(this._textModel),t=e[0],n=e[1];this._tokenizationSupport=t,this._tokenizationStateStore.flush(n),this._beginBackgroundTokenization()},t.prototype._beginBackgroundTokenization=function(){var e=this;this._textModel.isAttachedToEditor()&&this._hasLinesToTokenize()&&xe.i((function(){e._isDisposed||e._revalidateTokensNow()}))},t.prototype._revalidateTokensNow=function(e){void 0===e&&(e=this._textModel.getLineCount());for(var t=new Se.b,n=ke.a.create(!1);this._hasLinesToTokenize()&&!(n.elapsed()>1);){if(this._tokenizeOneInvalidLine(t)>=e)break}this._beginBackgroundTokenization(),this._textModel.setTokens(t.tokens)},t.prototype.tokenizeViewport=function(e,t){var n=new Se.b;this._tokenizeViewport(n,e,t),this._textModel.setTokens(n.tokens)},t.prototype.reset=function(){this._resetTokenizationState(),this._textModel.clearTokens()},t.prototype.forceTokenization=function(e){var t=new Se.b;this._updateTokensUntilLine(t,e),this._textModel.setTokens(t.tokens)},t.prototype.isCheapToTokenize=function(e){if(!this._tokenizationSupport)return!0;var t=this._tokenizationStateStore.invalidLineStartIndex+1;return!(e>t)&&(e<t||this._textModel.getLineLength(e)<2048)},t.prototype._hasLinesToTokenize=function(){return!!this._tokenizationSupport&&this._tokenizationStateStore.invalidLineStartIndex<this._textModel.getLineCount()},t.prototype._tokenizeOneInvalidLine=function(e){if(!this._hasLinesToTokenize())return this._textModel.getLineCount()+1;var t=this._tokenizationStateStore.invalidLineStartIndex+1;return this._updateTokensUntilLine(e,t),t},t.prototype._updateTokensUntilLine=function(e,t){if(this._tokenizationSupport)for(var n=this._textModel.getLanguageIdentifier(),i=this._textModel.getLineCount(),r=t-1,o=this._tokenizationStateStore.invalidLineStartIndex;o<=r;o++){var s=this._textModel.getLineContent(o+1),a=this._tokenizationStateStore.getBeginState(o),u=Te(n,this._tokenizationSupport,s,a);e.add(o+1,u.tokens),this._tokenizationStateStore.setEndState(i,o,u.endState),o=this._tokenizationStateStore.invalidLineStartIndex-1}},t.prototype._tokenizeViewport=function(e,t,n){if(this._tokenizationSupport&&!(n<=this._tokenizationStateStore.invalidLineStartIndex))if(t<=this._tokenizationStateStore.invalidLineStartIndex)this._updateTokensUntilLine(e,n);else{for(var i=this._textModel.getLineFirstNonWhitespaceColumn(t),r=[],o=null,s=t-1;i>0&&s>=1;s--){var a=this._textModel.getLineFirstNonWhitespaceColumn(s);if(0!==a&&a<i){if(o=this._tokenizationStateStore.getBeginState(s-1))break;r.push(this._textModel.getLineContent(s)),i=a}}o||(o=this._tokenizationSupport.getInitialState());var u=this._textModel.getLanguageIdentifier(),f=o;for(s=r.length-1;s>=0;s--){f=(c=Te(u,this._tokenizationSupport,r[s],f)).endState}for(var h=t;h<=n;h++){var l=this._textModel.getLineContent(h),c=Te(u,this._tokenizationSupport,l,f);e.add(h,c.tokens),this._tokenizationStateStore.setFakeTokens(h-1),f=c.endState}}},t}(o.a);function Te(e,t,n,r){var o=null;if(t)try{o=t.tokenize2(n,r.clone(),0)}catch(s){Object(i.e)(s)}return o||(o=Object(Ne.e)(e.id,n,r,0)),Ie.a.convertToEndOffset(o.tokens,n.length),o}var De=n(152),Me=n(35),Ae=n(129),Re=n(121),ze=n(23),Be=n(14);n.d(t,"b",(function(){return je})),n.d(t,"a",(function(){return Je}));var Fe=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();function Ve(e){var t=new de;return t.acceptChunk(e),t.finish()}function Pe(e,t){return("string"===typeof e?Ve(e):e).create(t)}var We=0,Ue=function(){throw new Error("Invalid change accessor")},je=function(e){function t(n,i,o,u){void 0===u&&(u=null);var f=e.call(this)||this;f._onWillDispose=f._register(new r.a),f.onWillDispose=f._onWillDispose.event,f._onDidChangeDecorations=f._register(new Ke),f.onDidChangeDecorations=f._onDidChangeDecorations.event,f._onDidChangeLanguage=f._register(new r.a),f.onDidChangeLanguage=f._onDidChangeLanguage.event,f._onDidChangeLanguageConfiguration=f._register(new r.a),f.onDidChangeLanguageConfiguration=f._onDidChangeLanguageConfiguration.event,f._onDidChangeTokens=f._register(new r.a),f.onDidChangeTokens=f._onDidChangeTokens.event,f._onDidChangeOptions=f._register(new r.a),f.onDidChangeOptions=f._onDidChangeOptions.event,f._onDidChangeAttached=f._register(new r.a),f.onDidChangeAttached=f._onDidChangeAttached.event,f._eventEmitter=f._register(new Xe),We++,f.id="$model"+We,f.isForSimpleWidget=i.isForSimpleWidget,f._associatedResource="undefined"===typeof u||null===u?a.a.parse("inmemory://model/"+We):u,f._attachedEditorCount=0,f._buffer=Pe(n,i.defaultEOL),f._options=t.resolveOptions(f._buffer,i);var l=f._buffer.getLineCount(),c=f._buffer.getValueLengthInRange(new h.a(1,1,l,f._buffer.getLineLength(l)+1),0);return i.largeFileOptimizations?f._isTooLargeForTokenization=c>t.LARGE_FILE_SIZE_THRESHOLD||l>t.LARGE_FILE_LINE_COUNT_THRESHOLD:f._isTooLargeForTokenization=!1,f._isTooLargeForSyncing=c>t.MODEL_SYNC_LIMIT,f._versionId=1,f._alternativeVersionId=1,f._isDisposed=!1,f._isDisposing=!1,f._languageIdentifier=o||Ne.a,f._languageRegistryListener=Me.a.onDidChange((function(e){e.languageIdentifier.id===f._languageIdentifier.id&&f._onDidChangeLanguageConfiguration.fire({})})),f._instanceId=s.N(We),f._lastDecorationId=0,f._decorations=Object.create(null),f._decorationsTree=new qe,f._commandManager=new _(f),f._isUndoing=!1,f._isRedoing=!1,f._trimAutoWhitespaceLines=null,f._tokens=new Se.d,f._tokens2=new Se.e,f._tokenization=new Oe(f),f}return Fe(t,e),t.createFromString=function(e,n,i,r){return void 0===n&&(n=t.DEFAULT_CREATION_OPTIONS),void 0===i&&(i=null),void 0===r&&(r=null),new t(e,n,i,r)},t.resolveOptions=function(e,t){if(t.detectIndentation){var n=L(e,t.tabSize,t.insertSpaces);return new c.e({tabSize:n.tabSize,indentSize:n.tabSize,insertSpaces:n.insertSpaces,trimAutoWhitespace:t.trimAutoWhitespace,defaultEOL:t.defaultEOL})}return new c.e({tabSize:t.tabSize,indentSize:t.indentSize,insertSpaces:t.insertSpaces,trimAutoWhitespace:t.trimAutoWhitespace,defaultEOL:t.defaultEOL})},t.prototype.onDidChangeRawContentFast=function(e){return this._eventEmitter.fastEvent((function(t){return e(t.rawContentChangedEvent)}))},t.prototype.onDidChangeRawContent=function(e){return this._eventEmitter.slowEvent((function(t){return e(t.rawContentChangedEvent)}))},t.prototype.onDidChangeContentFast=function(e){return this._eventEmitter.fastEvent((function(t){return e(t.contentChangedEvent)}))},t.prototype.onDidChangeContent=function(e){return this._eventEmitter.slowEvent((function(t){return e(t.contentChangedEvent)}))},t.prototype.dispose=function(){this._isDisposing=!0,this._onWillDispose.fire(),this._languageRegistryListener.dispose(),this._tokenization.dispose(),this._isDisposed=!0,e.prototype.dispose.call(this),this._isDisposing=!1},t.prototype._assertNotDisposed=function(){if(this._isDisposed)throw new Error("Model is disposed!")},t.prototype._emitContentChangedEvent=function(e,t){this._isDisposing||this._eventEmitter.fire(new Ce(e,t))},t.prototype.setValue=function(e){if(this._assertNotDisposed(),null!==e){var t=Pe(e,this._options.defaultEOL);this.setValueFromTextBuffer(t)}},t.prototype._createContentChanged2=function(e,t,n,i,r,o,s){return{changes:[{range:e,rangeOffset:t,rangeLength:n,text:i}],eol:this._buffer.getEOL(),versionId:this.getVersionId(),isUndoing:r,isRedoing:o,isFlush:s}},t.prototype.setValueFromTextBuffer=function(e){if(this._assertNotDisposed(),null!==e){var t=this.getFullModelRange(),n=this.getValueLengthInRange(t),i=this.getLineCount(),r=this.getLineMaxColumn(i);this._buffer=e,this._increaseVersionId(),this._tokens.flush(),this._tokens2.flush(),this._decorations=Object.create(null),this._decorationsTree=new qe,this._commandManager=new _(this),this._trimAutoWhitespaceLines=null,this._emitContentChangedEvent(new Le([new pe],this._versionId,!1,!1),this._createContentChanged2(new h.a(1,1,i,r),0,n,this.getValue(),!1,!1,!0))}},t.prototype.setEOL=function(e){this._assertNotDisposed();var t=1===e?"\r\n":"\n";if(this._buffer.getEOL()!==t){var n=this.getFullModelRange(),i=this.getValueLengthInRange(n),r=this.getLineCount(),o=this.getLineMaxColumn(r);this._onBeforeEOLChange(),this._buffer.setEOL(t),this._increaseVersionId(),this._onAfterEOLChange(),this._emitContentChangedEvent(new Le([new ve],this._versionId,!1,!1),this._createContentChanged2(new h.a(1,1,r,o),0,i,this.getValue(),!1,!1,!1))}},t.prototype._onBeforeEOLChange=function(){var e=this.getVersionId(),t=this._decorationsTree.search(0,!1,!1,e);this._ensureNodesHaveRanges(t)},t.prototype._onAfterEOLChange=function(){for(var e=this.getVersionId(),t=this._decorationsTree.collectNodesPostOrder(),n=0,i=t.length;n<i;n++){var r=t[n],o=r.cachedAbsoluteStart-r.start,s=this._buffer.getOffsetAt(r.range.startLineNumber,r.range.startColumn),a=this._buffer.getOffsetAt(r.range.endLineNumber,r.range.endColumn);r.cachedAbsoluteStart=s,r.cachedAbsoluteEnd=a,r.cachedVersionId=e,r.start=s-o,r.end=a-o,W(r)}},t.prototype.onBeforeAttached=function(){this._attachedEditorCount++,1===this._attachedEditorCount&&this._onDidChangeAttached.fire(void 0)},t.prototype.onBeforeDetached=function(){this._attachedEditorCount--,0===this._attachedEditorCount&&this._onDidChangeAttached.fire(void 0)},t.prototype.isAttachedToEditor=function(){return this._attachedEditorCount>0},t.prototype.getAttachedEditorCount=function(){return this._attachedEditorCount},t.prototype.isTooLargeForSyncing=function(){return this._isTooLargeForSyncing},t.prototype.isTooLargeForTokenization=function(){return this._isTooLargeForTokenization},t.prototype.isDisposed=function(){return this._isDisposed},t.prototype.isDominatedByLongLines=function(){if(this._assertNotDisposed(),this.isTooLargeForTokenization())return!1;for(var e=0,t=0,n=this._buffer.getLineCount(),i=1;i<=n;i++){var r=this._buffer.getLineLength(i);r>=1e4?t+=r:e+=r}return t>e},Object.defineProperty(t.prototype,"uri",{get:function(){return this._associatedResource},enumerable:!0,configurable:!0}),t.prototype.getOptions=function(){return this._assertNotDisposed(),this._options},t.prototype.getFormattingOptions=function(){return{tabSize:this._options.indentSize,insertSpaces:this._options.insertSpaces}},t.prototype.updateOptions=function(e){this._assertNotDisposed();var t="undefined"!==typeof e.tabSize?e.tabSize:this._options.tabSize,n="undefined"!==typeof e.indentSize?e.indentSize:this._options.indentSize,i="undefined"!==typeof e.insertSpaces?e.insertSpaces:this._options.insertSpaces,r="undefined"!==typeof e.trimAutoWhitespace?e.trimAutoWhitespace:this._options.trimAutoWhitespace,o=new c.e({tabSize:t,indentSize:n,insertSpaces:i,defaultEOL:this._options.defaultEOL,trimAutoWhitespace:r});if(!this._options.equals(o)){var s=this._options.createChangeEvent(o);this._options=o,this._onDidChangeOptions.fire(s)}},t.prototype.detectIndentation=function(e,t){this._assertNotDisposed();var n=L(this._buffer,t,e);this.updateOptions({insertSpaces:n.insertSpaces,tabSize:n.tabSize,indentSize:n.tabSize})},t._normalizeIndentationFromWhitespace=function(e,t,n){for(var i=0,r=0;r<e.length;r++)"\t"===e.charAt(r)?i+=t:i++;var o="";if(!n){var s=Math.floor(i/t);i%=t;for(r=0;r<s;r++)o+="\t"}for(r=0;r<i;r++)o+=" ";return o},t.normalizeIndentation=function(e,n,i){var r=s.q(e);return-1===r&&(r=e.length),t._normalizeIndentationFromWhitespace(e.substring(0,r),n,i)+e.substring(r)},t.prototype.normalizeIndentation=function(e){return this._assertNotDisposed(),t.normalizeIndentation(e,this._options.indentSize,this._options.insertSpaces)},t.prototype.getVersionId=function(){return this._assertNotDisposed(),this._versionId},t.prototype.mightContainRTL=function(){return this._buffer.mightContainRTL()},t.prototype.mightContainNonBasicASCII=function(){return this._buffer.mightContainNonBasicASCII()},t.prototype.getAlternativeVersionId=function(){return this._assertNotDisposed(),this._alternativeVersionId},t.prototype.getOffsetAt=function(e){this._assertNotDisposed();var t=this._validatePosition(e.lineNumber,e.column,!1);return this._buffer.getOffsetAt(t.lineNumber,t.column)},t.prototype.getPositionAt=function(e){this._assertNotDisposed();var t=Math.min(this._buffer.getLength(),Math.max(0,e));return this._buffer.getPositionAt(t)},t.prototype._increaseVersionId=function(){this._versionId=this._versionId+1,this._alternativeVersionId=this._versionId},t.prototype._overwriteAlternativeVersionId=function(e){this._alternativeVersionId=e},t.prototype.getValue=function(e,t){void 0===t&&(t=!1),this._assertNotDisposed();var n=this.getFullModelRange(),i=this.getValueInRange(n,e);return t?this._buffer.getBOM()+i:i},t.prototype.getValueLength=function(e,t){void 0===t&&(t=!1),this._assertNotDisposed();var n=this.getFullModelRange(),i=this.getValueLengthInRange(n,e);return t?this._buffer.getBOM().length+i:i},t.prototype.getValueInRange=function(e,t){return void 0===t&&(t=0),this._assertNotDisposed(),this._buffer.getValueInRange(this.validateRange(e),t)},t.prototype.getValueLengthInRange=function(e,t){return void 0===t&&(t=0),this._assertNotDisposed(),this._buffer.getValueLengthInRange(this.validateRange(e),t)},t.prototype.getCharacterCountInRange=function(e,t){return void 0===t&&(t=0),this._assertNotDisposed(),this._buffer.getCharacterCountInRange(this.validateRange(e),t)},t.prototype.getLineCount=function(){return this._assertNotDisposed(),this._buffer.getLineCount()},t.prototype.getLineContent=function(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineContent(e)},t.prototype.getLineLength=function(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLength(e)},t.prototype.getLinesContent=function(){return this._assertNotDisposed(),this._buffer.getLinesContent()},t.prototype.getEOL=function(){return this._assertNotDisposed(),this._buffer.getEOL()},t.prototype.getLineMinColumn=function(e){return this._assertNotDisposed(),1},t.prototype.getLineMaxColumn=function(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLength(e)+1},t.prototype.getLineFirstNonWhitespaceColumn=function(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineFirstNonWhitespaceColumn(e)},t.prototype.getLineLastNonWhitespaceColumn=function(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLastNonWhitespaceColumn(e)},t.prototype._validateRangeRelaxedNoAllocations=function(e){var t,n,i=this._buffer.getLineCount(),r=e.startLineNumber,o=e.startColumn;if(r<1)t=1,n=1;else if(r>i)t=i,n=this.getLineMaxColumn(t);else{if(t=0|r,o<=1)n=1;else n=o>=(c=this.getLineMaxColumn(t))?c:0|o}var s,a,u=e.endLineNumber,f=e.endColumn;if(u<1)s=1,a=1;else if(u>i)s=i,a=this.getLineMaxColumn(s);else{var c;if(s=0|u,f<=1)a=1;else a=f>=(c=this.getLineMaxColumn(s))?c:0|f}return r===t&&o===n&&u===s&&f===a&&e instanceof h.a&&!(e instanceof l.a)?e:new h.a(t,n,s,a)},t.prototype._isValidPosition=function(e,t,n){if("number"!==typeof e||"number"!==typeof t)return!1;if(isNaN(e)||isNaN(t))return!1;if(e<1||t<1)return!1;if((0|e)!==e||(0|t)!==t)return!1;if(e>this._buffer.getLineCount())return!1;if(t>this.getLineMaxColumn(e))return!1;if(n&&t!==s.s(this._buffer.getLineContent(e),t-1)[0]+1)return!1;return!0},t.prototype._validatePosition=function(e,t,n){var i=Math.floor("number"!==typeof e||isNaN(e)?1:e),r=Math.floor("number"!==typeof t||isNaN(t)?1:t),o=this._buffer.getLineCount();if(i<1)return new f.a(1,1);if(i>o)return new f.a(o,this.getLineMaxColumn(o));if(r<=1)return new f.a(i,1);var a=this.getLineMaxColumn(i);if(r>=a)return new f.a(i,a);if(n){var u=s.s(this._buffer.getLineContent(i),r-1)[0];if(r!==u+1)return new f.a(i,u+1)}return new f.a(i,r)},t.prototype.validatePosition=function(e){return this._assertNotDisposed(),e instanceof f.a&&this._isValidPosition(e.lineNumber,e.column,!0)?e:this._validatePosition(e.lineNumber,e.column,!0)},t.prototype._isValidRange=function(e,t){var n=e.startLineNumber,i=e.startColumn,r=e.endLineNumber,o=e.endColumn;if(!this._isValidPosition(n,i,!1))return!1;if(!this._isValidPosition(r,o,!1))return!1;if(t){var a=this._buffer.getLineContent(n);if(i<a.length+1)if(i!==s.s(a,i-1)[0]+1)return!1;if(o>=2){var u=r===n?a:this._buffer.getLineContent(r);if(o!==s.s(u,o-2)[1]+1)return!1}return!0}return!0},t.prototype.validateRange=function(e){if(this._assertNotDisposed(),e instanceof h.a&&!(e instanceof l.a)&&this._isValidRange(e,!0))return e;var t=this._validatePosition(e.startLineNumber,e.startColumn,!1),n=this._validatePosition(e.endLineNumber,e.endColumn,!1),i=t.lineNumber,r=t.column,o=n.lineNumber,a=n.column,u=i===o&&r===a,f=this._buffer.getLineContent(i);if(r<f.length+1){var c=s.s(f,r-1)[0];if(r!==c+1){if(u)return new h.a(i,c+1,i,c+1);r=c+1}}if(a>=2){var d=o===i?f:this._buffer.getLineContent(o),p=s.s(d,a-2)[1];a!==p+1&&(a=p+1)}return new h.a(i,r,o,a)},t.prototype.modifyPosition=function(e,t){this._assertNotDisposed();var n=this.getOffsetAt(e)+t;return this.getPositionAt(Math.min(this._buffer.getLength(),Math.max(0,n)))},t.prototype.getFullModelRange=function(){this._assertNotDisposed();var e=this.getLineCount();return new h.a(1,1,e,this.getLineMaxColumn(e))},t.prototype.findMatchesLineByLine=function(e,t,n,i){return this._buffer.findMatchesLineByLine(e,t,n,i)},t.prototype.findMatches=function(e,t,n,i,r,o,s){var a;if(void 0===s&&(s=999),this._assertNotDisposed(),a=h.a.isIRange(t)?this.validateRange(t):this.getFullModelRange(),!n&&e.indexOf("\n")<0){var u=new ie.a(e,n,i,r).parseSearchRequest();return u?this.findMatchesLineByLine(a,u,o,s):[]}return ie.c.findMatches(this,new ie.a(e,n,i,r),a,o,s)},t.prototype.findNextMatch=function(e,t,n,i,r,o){this._assertNotDisposed();var s=this.validatePosition(t);if(!n&&e.indexOf("\n")<0){var a=new ie.a(e,n,i,r).parseSearchRequest();if(!a)return null;var u=this.getLineCount(),f=new h.a(s.lineNumber,s.column,u,this.getLineMaxColumn(u)),l=this.findMatchesLineByLine(f,a,o,1);return ie.c.findNextMatch(this,new ie.a(e,n,i,r),s,o),l.length>0?l[0]:(f=new h.a(1,1,s.lineNumber,this.getLineMaxColumn(s.lineNumber)),(l=this.findMatchesLineByLine(f,a,o,1)).length>0?l[0]:null)}return ie.c.findNextMatch(this,new ie.a(e,n,i,r),s,o)},t.prototype.findPreviousMatch=function(e,t,n,i,r,o){this._assertNotDisposed();var s=this.validatePosition(t);return ie.c.findPreviousMatch(this,new ie.a(e,n,i,r),s,o)},t.prototype.pushStackElement=function(){this._commandManager.pushStackElement()},t.prototype.pushEOL=function(e){if(("\n"===this.getEOL()?0:1)!==e)try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._commandManager.pushEOL(e)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}},t.prototype.pushEditOperations=function(e,t,n){try{return this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._pushEditOperations(e,t,n)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}},t.prototype._pushEditOperations=function(e,t,n){var i=this;if(this._options.trimAutoWhitespace&&this._trimAutoWhitespaceLines){for(var r=t.map((function(e){return{range:i.validateRange(e.range),text:e.text}})),o=!0,s=0,a=e.length;s<a;s++){for(var u=e[s],f=!1,l=0,c=r.length;l<c;l++){var d=(v=r[l].range).startLineNumber>u.endLineNumber,p=u.startLineNumber>v.endLineNumber;if(!d&&!p){f=!0;break}}if(!f){o=!1;break}}if(o)for(s=0,a=this._trimAutoWhitespaceLines.length;s<a;s++){var g=this._trimAutoWhitespaceLines[s],_=this.getLineMaxColumn(g),m=!0;for(l=0,c=r.length;l<c;l++){var v=r[l].range,L=r[l].text;if(!(g<v.startLineNumber||g>v.endLineNumber)&&(!(g===v.startLineNumber&&v.startColumn===_&&v.isEmpty()&&L&&L.length>0&&"\n"===L.charAt(0))&&!(g===v.startLineNumber&&1===v.startColumn&&v.isEmpty()&&L&&L.length>0&&"\n"===L.charAt(L.length-1)))){m=!1;break}}m&&t.push({range:new h.a(g,1,g,_),text:null})}this._trimAutoWhitespaceLines=null}return this._commandManager.pushEditOperation(e,t,n)},t.prototype.applyEdits=function(e){try{return this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._applyEdits(e)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}},t.prototype._applyEdits=function(e){for(var t=0,n=e.length;t<n;t++)e[t].range=this.validateRange(e[t].range);var i=this._buffer.getLineCount(),r=this._buffer.applyEdits(e,this._options.trimAutoWhitespace),o=this._buffer.getLineCount(),s=r.changes;if(this._trimAutoWhitespaceLines=r.trimAutoWhitespaceLineNumbers,0!==s.length){var a=[],u=i;for(t=0,n=s.length;t<n;t++){var f=s[t],h=Object(Se.f)(f.text),l=h[0],c=h[1],d=h[2];this._tokens.acceptEdit(f.range,l,c),this._tokens2.acceptEdit(f.range,l,c,d,f.text.length>0?f.text.charCodeAt(0):0),this._onDidChangeDecorations.fire(),this._decorationsTree.acceptReplace(f.rangeOffset,f.rangeLength,f.text.length,f.forceMoveMarkers);for(var p=f.range.startLineNumber,g=f.range.endLineNumber,_=g-p,m=l,v=Math.min(_,m),L=m-_,C=v;C>=0;C--){var b=p+C,I=o-u-L+b;a.push(new ge(b,this.getLineContent(I)))}if(v<_){var y=p+v;a.push(new _e(y+1,g))}if(v<m){for(var N=p+v,k=m-v,S=o-u-k+N+1,x=[],w=0;w<k;w++){var E=S+w;x[E-S]=this.getLineContent(E)}a.push(new me(N+1,p+m,x))}u+=L}this._increaseVersionId(),this._emitContentChangedEvent(new Le(a,this.getVersionId(),this._isUndoing,this._isRedoing),{changes:s,eol:this._buffer.getEOL(),versionId:this.getVersionId(),isUndoing:this._isUndoing,isRedoing:this._isRedoing,isFlush:!1})}return r.reverseEdits},t.prototype._undo=function(){this._isUndoing=!0;var e=this._commandManager.undo();return this._isUndoing=!1,e?(this._overwriteAlternativeVersionId(e.recordedVersionId),e.selections):null},t.prototype.undo=function(){try{return this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._undo()}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}},t.prototype.canUndo=function(){return this._commandManager.canUndo()},t.prototype._redo=function(){this._isRedoing=!0;var e=this._commandManager.redo();return this._isRedoing=!1,e?(this._overwriteAlternativeVersionId(e.recordedVersionId),e.selections):null},t.prototype.redo=function(){try{return this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._redo()}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}},t.prototype.canRedo=function(){return this._commandManager.canRedo()},t.prototype.changeDecorations=function(e,t){void 0===t&&(t=0),this._assertNotDisposed();try{return this._onDidChangeDecorations.beginDeferredEmit(),this._changeDecorations(t,e)}finally{this._onDidChangeDecorations.endDeferredEmit()}},t.prototype._changeDecorations=function(e,t){var n=this,r={addDecoration:function(t,i){return n._onDidChangeDecorations.fire(),n._deltaDecorationsImpl(e,[],[{range:t,options:i}])[0]},changeDecoration:function(e,t){n._onDidChangeDecorations.fire(),n._changeDecorationImpl(e,t)},changeDecorationOptions:function(e,t){n._onDidChangeDecorations.fire(),n._changeDecorationOptionsImpl(e,Qe(t))},removeDecoration:function(t){n._onDidChangeDecorations.fire(),n._deltaDecorationsImpl(e,[t],[])},deltaDecorations:function(t,i){return 0===t.length&&0===i.length?[]:(n._onDidChangeDecorations.fire(),n._deltaDecorationsImpl(e,t,i))}},o=null;try{o=t(r)}catch(s){Object(i.e)(s)}return r.addDecoration=Ue,r.changeDecoration=Ue,r.changeDecorationOptions=Ue,r.removeDecoration=Ue,r.deltaDecorations=Ue,o},t.prototype.deltaDecorations=function(e,t,n){if(void 0===n&&(n=0),this._assertNotDisposed(),e||(e=[]),0===e.length&&0===t.length)return[];try{return this._onDidChangeDecorations.beginDeferredEmit(),this._onDidChangeDecorations.fire(),this._deltaDecorationsImpl(n,e,t)}finally{this._onDidChangeDecorations.endDeferredEmit()}},t.prototype._getTrackedRange=function(e){return this.getDecorationRange(e)},t.prototype._setTrackedRange=function(e,t,n){var i=e?this._decorations[e]:null;if(!i)return t?this._deltaDecorationsImpl(0,[],[{range:t,options:Ze[n]}])[0]:null;if(!t)return this._decorationsTree.delete(i),delete this._decorations[i.id],null;var r=this._validateRangeRelaxedNoAllocations(t),o=this._buffer.getOffsetAt(r.startLineNumber,r.startColumn),s=this._buffer.getOffsetAt(r.endLineNumber,r.endColumn);return this._decorationsTree.delete(i),i.reset(this.getVersionId(),o,s,r),i.setOptions(Ze[n]),this._decorationsTree.insert(i),i.id},t.prototype.removeAllDecorationsWithOwnerId=function(e){if(!this._isDisposed)for(var t=this._decorationsTree.collectNodesFromOwner(e),n=0,i=t.length;n<i;n++){var r=t[n];this._decorationsTree.delete(r),delete this._decorations[r.id]}},t.prototype.getDecorationOptions=function(e){var t=this._decorations[e];return t?t.options:null},t.prototype.getDecorationRange=function(e){var t=this._decorations[e];if(!t)return null;var n=this.getVersionId();return t.cachedVersionId!==n&&this._decorationsTree.resolveNode(t,n),null===t.range&&(t.range=this._getRangeAt(t.cachedAbsoluteStart,t.cachedAbsoluteEnd)),t.range},t.prototype.getLineDecorations=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=!1),e<1||e>this.getLineCount()?[]:this.getLinesDecorations(e,e,t,n)},t.prototype.getLinesDecorations=function(e,t,n,i){void 0===n&&(n=0),void 0===i&&(i=!1);var r=this.getLineCount(),o=Math.min(r,Math.max(1,e)),s=Math.min(r,Math.max(1,t)),a=this.getLineMaxColumn(s);return this._getDecorationsInRange(new h.a(o,1,s,a),n,i)},t.prototype.getDecorationsInRange=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=!1);var i=this.validateRange(e);return this._getDecorationsInRange(i,t,n)},t.prototype.getOverviewRulerDecorations=function(e,t){void 0===e&&(e=0),void 0===t&&(t=!1);var n=this.getVersionId(),i=this._decorationsTree.search(e,t,!0,n);return this._ensureNodesHaveRanges(i)},t.prototype.getAllDecorations=function(e,t){void 0===e&&(e=0),void 0===t&&(t=!1);var n=this.getVersionId(),i=this._decorationsTree.search(e,t,!1,n);return this._ensureNodesHaveRanges(i)},t.prototype._getDecorationsInRange=function(e,t,n){var i=this._buffer.getOffsetAt(e.startLineNumber,e.startColumn),r=this._buffer.getOffsetAt(e.endLineNumber,e.endColumn),o=this.getVersionId(),s=this._decorationsTree.intervalSearch(i,r,t,n,o);return this._ensureNodesHaveRanges(s)},t.prototype._ensureNodesHaveRanges=function(e){for(var t=0,n=e.length;t<n;t++){var i=e[t];null===i.range&&(i.range=this._getRangeAt(i.cachedAbsoluteStart,i.cachedAbsoluteEnd))}return e},t.prototype._getRangeAt=function(e,t){return this._buffer.getRangeAt(e,t-e)},t.prototype._changeDecorationImpl=function(e,t){var n=this._decorations[e];if(n){var i=this._validateRangeRelaxedNoAllocations(t),r=this._buffer.getOffsetAt(i.startLineNumber,i.startColumn),o=this._buffer.getOffsetAt(i.endLineNumber,i.endColumn);this._decorationsTree.delete(n),n.reset(this.getVersionId(),r,o,i),this._decorationsTree.insert(n)}},t.prototype._changeDecorationOptionsImpl=function(e,t){var n=this._decorations[e];n&&(!(!n.options.overviewRuler||!n.options.overviewRuler.color)!==!(!t.overviewRuler||!t.overviewRuler.color)?(this._decorationsTree.delete(n),n.setOptions(t),this._decorationsTree.insert(n)):n.setOptions(t))},t.prototype._deltaDecorationsImpl=function(e,t,n){for(var i=this.getVersionId(),r=t.length,o=0,s=n.length,a=0,u=new Array(s);o<r||a<s;){var f=null;if(o<r){do{f=this._decorations[t[o++]]}while(!f&&o<r);f&&this._decorationsTree.delete(f)}if(a<s){if(!f){var h=++this._lastDecorationId,l=this._instanceId+";"+h;f=new O(l,0,0),this._decorations[l]=f}var c=n[a],d=this._validateRangeRelaxedNoAllocations(c.range),p=Qe(c.options),g=this._buffer.getOffsetAt(d.startLineNumber,d.startColumn),_=this._buffer.getOffsetAt(d.endLineNumber,d.endColumn);f.ownerId=e,f.reset(i,g,_,d),f.setOptions(p),this._decorationsTree.insert(f),u[a]=f.id,a++}else f&&delete this._decorations[f.id]}return u},t.prototype.setLineTokens=function(e,t){if(e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");this._tokens.setTokens(this._languageIdentifier.id,e-1,this._buffer.getLineLength(e),t)},t.prototype.setTokens=function(e){if(0!==e.length){for(var t=[],n=0,i=e.length;n<i;n++){var r=e[n];t.push({fromLineNumber:r.startLineNumber,toLineNumber:r.startLineNumber+r.tokens.length-1});for(var o=0,s=r.tokens.length;o<s;o++)this.setLineTokens(r.startLineNumber+o,r.tokens[o])}this._emitModelTokensChangedEvent({tokenizationSupportChanged:!1,ranges:t})}},t.prototype.setSemanticTokens=function(e){this._tokens2.set(e),this._emitModelTokensChangedEvent({tokenizationSupportChanged:!1,ranges:[{fromLineNumber:1,toLineNumber:this.getLineCount()}]})},t.prototype.tokenizeViewport=function(e,t){e=Math.max(1,e),t=Math.min(this._buffer.getLineCount(),t),this._tokenization.tokenizeViewport(e,t)},t.prototype.clearTokens=function(){this._tokens.flush(),this._emitModelTokensChangedEvent({tokenizationSupportChanged:!0,ranges:[{fromLineNumber:1,toLineNumber:this._buffer.getLineCount()}]})},t.prototype._emitModelTokensChangedEvent=function(e){this._isDisposing||this._onDidChangeTokens.fire(e)},t.prototype.resetTokenization=function(){this._tokenization.reset()},t.prototype.forceTokenization=function(e){if(e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");this._tokenization.forceTokenization(e)},t.prototype.isCheapToTokenize=function(e){return this._tokenization.isCheapToTokenize(e)},t.prototype.tokenizeIfCheap=function(e){this.isCheapToTokenize(e)&&this.forceTokenization(e)},t.prototype.getLineTokens=function(e){if(e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._getLineTokens(e)},t.prototype._getLineTokens=function(e){var t=this.getLineContent(e),n=this._tokens.getTokens(this._languageIdentifier.id,e-1,t);return this._tokens2.addSemanticTokens(e,n)},t.prototype.getLanguageIdentifier=function(){return this._languageIdentifier},t.prototype.getModeId=function(){return this._languageIdentifier.language},t.prototype.setMode=function(e){if(this._languageIdentifier.id!==e.id){var t={oldLanguage:this._languageIdentifier.language,newLanguage:e.language};this._languageIdentifier=e,this._onDidChangeLanguage.fire(t),this._onDidChangeLanguageConfiguration.fire({})}},t.prototype.getLanguageIdAtPosition=function(e,t){var n=this.validatePosition(new f.a(e,t)),i=this.getLineTokens(n.lineNumber);return i.getLanguageId(i.findTokenIndexAtOffset(n.column-1))},t.prototype.getWordAtPosition=function(e){this._assertNotDisposed();var n=this.validatePosition(e),i=this.getLineContent(n.lineNumber),r=this._getLineTokens(n.lineNumber),o=r.findTokenIndexAtOffset(n.column-1),s=t._findLanguageBoundaries(r,o),a=s[0],u=s[1],f=Object(De.d)(n.column,Me.a.getWordDefinition(r.getLanguageId(o)),i.substring(a,u),a);if(f&&f.startColumn<=e.column&&e.column<=f.endColumn)return f;if(o>0&&a===n.column-1){var h=t._findLanguageBoundaries(r,o-1),l=h[0],c=h[1],d=Object(De.d)(n.column,Me.a.getWordDefinition(r.getLanguageId(o-1)),i.substring(l,c),l);if(d&&d.startColumn<=e.column&&e.column<=d.endColumn)return d}return null},t._findLanguageBoundaries=function(e,t){for(var n=e.getLanguageId(t),i=0,r=t;r>=0&&e.getLanguageId(r)===n;r--)i=e.getStartOffset(r);for(var o=e.getLineContent().length,s=(r=t,e.getCount());r<s&&e.getLanguageId(r)===n;r++)o=e.getEndOffset(r);return[i,o]},t.prototype.getWordUntilPosition=function(e){var t=this.getWordAtPosition(e);return t?{word:t.word.substr(0,e.column-t.startColumn),startColumn:t.startColumn,endColumn:e.column}:{word:"",startColumn:e.column,endColumn:e.column}},t.prototype.findMatchingBracketUp=function(e,t){var n=e.toLowerCase(),i=this.validatePosition(t),r=this._getLineTokens(i.lineNumber),o=r.getLanguageId(r.findTokenIndexAtOffset(i.column-1)),s=Me.a.getBracketsSupport(o);if(!s)return null;var a=s.textIsBracket[n];return a?this._findMatchingBracketUp(a,i):null},t.prototype.matchBracket=function(e){return this._matchBracket(this.validatePosition(e))},t.prototype._matchBracket=function(e){var t=e.lineNumber,n=this._getLineTokens(t),i=this._buffer.getLineContent(t),r=n.findTokenIndexAtOffset(e.column-1);if(r<0)return null;var o=Me.a.getBracketsSupport(n.getLanguageId(r));if(o&&!Object(Ae.b)(n.getStandardTokenType(r))){for(var s=Math.max(0,e.column-1-o.maxBracketLength),a=Math.min(i.length,e.column-1+o.maxBracketLength),u=null;;){if(!(c=Re.a.findNextBracketInRange(o.forwardRegex,t,i,s,a)))break;if(c.startColumn<=e.column&&e.column<=c.endColumn){var f=i.substring(c.startColumn-1,c.endColumn-1).toLowerCase();(d=this._matchFoundBracket(c,o.textIsBracket[f],o.textIsOpenBracket[f]))&&(u=d)}s=c.endColumn-1}if(u)return u}if(r>0&&n.getStartOffset(r)===e.column-1){var h=r-1,l=Me.a.getBracketsSupport(n.getLanguageId(h));if(l&&!Object(Ae.b)(n.getStandardTokenType(h))){var c;s=Math.max(0,e.column-1-l.maxBracketLength),a=Math.min(i.length,e.column-1+l.maxBracketLength);if((c=Re.a.findPrevBracketInRange(l.reversedRegex,t,i,s,a))&&c.startColumn<=e.column&&e.column<=c.endColumn){var d;f=i.substring(c.startColumn-1,c.endColumn-1).toLowerCase();if(d=this._matchFoundBracket(c,l.textIsBracket[f],l.textIsOpenBracket[f]))return d}}}return null},t.prototype._matchFoundBracket=function(e,t,n){if(!t)return null;var i;if(n){if(i=this._findMatchingBracketDown(t,e.getEndPosition()))return[e,i]}else if(i=this._findMatchingBracketUp(t,e.getStartPosition()))return[e,i];return null},t.prototype._findMatchingBracketUp=function(e,t){for(var n=e.languageIdentifier.id,i=e.reversedRegex,r=-1,o=function(t,n,o,s){for(;;){var a=Re.a.findPrevBracketInRange(i,t,n,o,s);if(!a)break;var u=n.substring(a.startColumn-1,a.endColumn-1).toLowerCase();if(e.isOpen(u)?r++:e.isClose(u)&&r--,0===r)return a;s=a.startColumn-1}return null},s=t.lineNumber;s>=1;s--){var a=this._getLineTokens(s),u=a.getCount(),f=this._buffer.getLineContent(s),h=u-1,l=f.length,c=f.length;s===t.lineNumber&&(h=a.findTokenIndexAtOffset(t.column-1),l=t.column-1,c=t.column-1);for(var d=!0;h>=0;h--){var p,g=a.getLanguageId(h)===n&&!Object(Ae.b)(a.getStandardTokenType(h));if(g)d?l=a.getStartOffset(h):(l=a.getStartOffset(h),c=a.getEndOffset(h));else if(d&&l!==c)if(p=o(s,f,l,c))return p;d=g}if(d&&l!==c)if(p=o(s,f,l,c))return p}return null},t.prototype._findMatchingBracketDown=function(e,t){for(var n=e.languageIdentifier.id,i=e.forwardRegex,r=1,o=function(t,n,o,s){for(;;){var a=Re.a.findNextBracketInRange(i,t,n,o,s);if(!a)break;var u=n.substring(a.startColumn-1,a.endColumn-1).toLowerCase();if(e.isOpen(u)?r++:e.isClose(u)&&r--,0===r)return a;o=a.endColumn-1}return null},s=this.getLineCount(),a=t.lineNumber;a<=s;a++){var u=this._getLineTokens(a),f=u.getCount(),h=this._buffer.getLineContent(a),l=0,c=0,d=0;a===t.lineNumber&&(l=u.findTokenIndexAtOffset(t.column-1),c=t.column-1,d=t.column-1);for(var p=!0;l<f;l++){var g,_=u.getLanguageId(l)===n&&!Object(Ae.b)(u.getStandardTokenType(l));if(_)p?d=u.getEndOffset(l):(c=u.getStartOffset(l),d=u.getEndOffset(l));else if(p&&c!==d)if(g=o(a,h,c,d))return g;p=_}if(p&&c!==d)if(g=o(a,h,c,d))return g}return null},t.prototype.findPrevBracket=function(e){for(var t=this.validatePosition(e),n=-1,i=null,r=t.lineNumber;r>=1;r--){var o=this._getLineTokens(r),s=o.getCount(),a=this._buffer.getLineContent(r),u=s-1,f=a.length,h=a.length;if(r===t.lineNumber)u=o.findTokenIndexAtOffset(t.column-1),f=t.column-1,h=t.column-1,n!==(c=o.getLanguageId(u))&&(n=c,i=Me.a.getBracketsSupport(n));for(var l=!0;u>=0;u--){var c;if(n!==(c=o.getLanguageId(u))){if(i&&l&&f!==h){if(d=Re.a.findPrevBracketInRange(i.reversedRegex,r,a,f,h))return this._toFoundBracket(i,d);l=!1}n=c,i=Me.a.getBracketsSupport(n)}var d,p=!!i&&!Object(Ae.b)(o.getStandardTokenType(u));if(p)l?f=o.getStartOffset(u):(f=o.getStartOffset(u),h=o.getEndOffset(u));else if(i&&l&&f!==h)if(d=Re.a.findPrevBracketInRange(i.reversedRegex,r,a,f,h))return this._toFoundBracket(i,d);l=p}if(i&&l&&f!==h)if(d=Re.a.findPrevBracketInRange(i.reversedRegex,r,a,f,h))return this._toFoundBracket(i,d)}return null},t.prototype.findNextBracket=function(e){for(var t=this.validatePosition(e),n=this.getLineCount(),i=-1,r=null,o=t.lineNumber;o<=n;o++){var s=this._getLineTokens(o),a=s.getCount(),u=this._buffer.getLineContent(o),f=0,h=0,l=0;if(o===t.lineNumber)f=s.findTokenIndexAtOffset(t.column-1),h=t.column-1,l=t.column-1,i!==(d=s.getLanguageId(f))&&(i=d,r=Me.a.getBracketsSupport(i));for(var c=!0;f<a;f++){var d;if(i!==(d=s.getLanguageId(f))){if(r&&c&&h!==l){if(p=Re.a.findNextBracketInRange(r.forwardRegex,o,u,h,l))return this._toFoundBracket(r,p);c=!1}i=d,r=Me.a.getBracketsSupport(i)}var p,g=!!r&&!Object(Ae.b)(s.getStandardTokenType(f));if(g)c?l=s.getEndOffset(f):(h=s.getStartOffset(f),l=s.getEndOffset(f));else if(r&&c&&h!==l)if(p=Re.a.findNextBracketInRange(r.forwardRegex,o,u,h,l))return this._toFoundBracket(r,p);c=g}if(r&&c&&h!==l)if(p=Re.a.findNextBracketInRange(r.forwardRegex,o,u,h,l))return this._toFoundBracket(r,p)}return null},t.prototype.findEnclosingBrackets=function(e,t){var n=this;void 0===t&&(t=1073741824);for(var i=this.validatePosition(e),r=this.getLineCount(),o=new Map,s=[],a=function(e,t){if(!o.has(e)){for(var n=[],i=0,r=t?t.brackets.length:0;i<r;i++)n[i]=0;o.set(e,n)}s=o.get(e)},u=function(e,t,i,r,o){for(;;){var a=Re.a.findNextBracketInRange(e.forwardRegex,t,i,r,o);if(!a)break;var u=i.substring(a.startColumn-1,a.endColumn-1).toLowerCase(),f=e.textIsBracket[u];if(f&&(f.isOpen(u)?s[f.index]++:f.isClose(u)&&s[f.index]--,-1===s[f.index]))return n._matchFoundBracket(a,f,!1);r=a.endColumn-1}return null},f=-1,h=null,l=Date.now(),c=i.lineNumber;c<=r;c++){if(Date.now()-l>t)return null;var d=this._getLineTokens(c),p=d.getCount(),g=this._buffer.getLineContent(c),_=0,m=0,v=0;if(c===i.lineNumber)_=d.findTokenIndexAtOffset(i.column-1),m=i.column-1,v=i.column-1,f!==(C=d.getLanguageId(_))&&a(f=C,h=Me.a.getBracketsSupport(f));for(var L=!0;_<p;_++){var C;if(f!==(C=d.getLanguageId(_))){if(h&&L&&m!==v){if(b=u(h,c,g,m,v))return b;L=!1}a(f=C,h=Me.a.getBracketsSupport(f))}var b,I=!!h&&!Object(Ae.b)(d.getStandardTokenType(_));if(I)L?v=d.getEndOffset(_):(m=d.getStartOffset(_),v=d.getEndOffset(_));else if(h&&L&&m!==v)if(b=u(h,c,g,m,v))return b;L=I}if(h&&L&&m!==v)if(b=u(h,c,g,m,v))return b}return null},t.prototype._toFoundBracket=function(e,t){if(!t)return null;var n=this.getValueInRange(t);n=n.toLowerCase();var i=e.textIsBracket[n];return i?{range:t,open:i.open,close:i.close,isOpen:e.textIsOpenBracket[n]}:null},t.computeIndentLevel=function(e,t){for(var n=0,i=0,r=e.length;i<r;){var o=e.charCodeAt(i);if(32===o)n++;else{if(9!==o)break;n=n-n%t+t}i++}return i===r?-1:n},t.prototype._computeIndentLevel=function(e){return t.computeIndentLevel(this._buffer.getLineContent(e+1),this._options.tabSize)},t.prototype.getActiveIndentGuide=function(e,t,n){var i=this;this._assertNotDisposed();var r=this.getLineCount();if(e<1||e>r)throw new Error("Illegal value for lineNumber");for(var o=Me.a.getFoldingRules(this._languageIdentifier.id),s=Boolean(o&&o.offSide),a=-2,u=-1,f=-2,h=-1,l=function(e){if(-1!==a&&(-2===a||a>e-1)){a=-1,u=-1;for(var t=e-2;t>=0;t--){var n=i._computeIndentLevel(t);if(n>=0){a=t,u=n;break}}}if(-2===f){f=-1,h=-1;for(t=e;t<r;t++){var o=i._computeIndentLevel(t);if(o>=0){f=t,h=o;break}}}},c=-2,d=-1,p=-2,g=-1,_=function(e){if(-2===c){c=-1,d=-1;for(var t=e-2;t>=0;t--){var n=i._computeIndentLevel(t);if(n>=0){c=t,d=n;break}}}if(-1!==p&&(-2===p||p<e-1)){p=-1,g=-1;for(t=e;t<r;t++){var o=i._computeIndentLevel(t);if(o>=0){p=t,g=o;break}}}},m=0,v=!0,L=0,C=!0,b=0,I=0;v||C;I++){var y=e-I,N=e+I;if(0!==I&&(y<1||y<t)&&(v=!1),0!==I&&(N>r||N>n)&&(C=!1),I>5e4&&(v=!1,C=!1),v){var k=void 0;if((S=this._computeIndentLevel(y-1))>=0?(f=y-1,h=S,k=Math.ceil(S/this._options.indentSize)):(l(y),k=this._getIndentLevelForWhitespaceLine(s,u,h)),0===I){if(m=y,L=N,0===(b=k))return{startLineNumber:m,endLineNumber:L,indent:b};continue}k>=b?m=y:v=!1}if(C){var S,x=void 0;(S=this._computeIndentLevel(N-1))>=0?(c=N-1,d=S,x=Math.ceil(S/this._options.indentSize)):(_(N),x=this._getIndentLevelForWhitespaceLine(s,d,g)),x>=b?L=N:C=!1}}return{startLineNumber:m,endLineNumber:L,indent:b}},t.prototype.getLinesIndentGuides=function(e,t){this._assertNotDisposed();var n=this.getLineCount();if(e<1||e>n)throw new Error("Illegal value for startLineNumber");if(t<1||t>n)throw new Error("Illegal value for endLineNumber");for(var i=Me.a.getFoldingRules(this._languageIdentifier.id),r=Boolean(i&&i.offSide),o=new Array(t-e+1),s=-2,a=-1,u=-2,f=-1,h=e;h<=t;h++){var l=h-e,c=this._computeIndentLevel(h-1);if(c>=0)s=h-1,a=c,o[l]=Math.ceil(c/this._options.indentSize);else{if(-2===s){s=-1,a=-1;for(var d=h-2;d>=0;d--){if((p=this._computeIndentLevel(d))>=0){s=d,a=p;break}}}if(-1!==u&&(-2===u||u<h-1)){u=-1,f=-1;for(d=h;d<n;d++){var p;if((p=this._computeIndentLevel(d))>=0){u=d,f=p;break}}}o[l]=this._getIndentLevelForWhitespaceLine(r,a,f)}}return o},t.prototype._getIndentLevelForWhitespaceLine=function(e,t,n){return-1===t||-1===n?0:t<n?1+Math.floor(t/this._options.indentSize):t===n?Math.ceil(n/this._options.indentSize):e?Math.ceil(n/this._options.indentSize):1+Math.floor(n/this._options.indentSize)},t.MODEL_SYNC_LIMIT=52428800,t.LARGE_FILE_SIZE_THRESHOLD=20971520,t.LARGE_FILE_LINE_COUNT_THRESHOLD=3e5,t.DEFAULT_CREATION_OPTIONS={isForSimpleWidget:!1,tabSize:u.c.tabSize,indentSize:u.c.indentSize,insertSpaces:u.c.insertSpaces,detectIndentation:!1,defaultEOL:1,trimAutoWhitespace:u.c.trimAutoWhitespace,largeFileOptimizations:u.c.largeFileOptimizations},t}(o.a),qe=function(){function e(){this._decorationsTree0=new D,this._decorationsTree1=new D}return e.prototype.intervalSearch=function(e,t,n,i,r){var o=this._decorationsTree0.intervalSearch(e,t,n,i,r),s=this._decorationsTree1.intervalSearch(e,t,n,i,r);return o.concat(s)},e.prototype.search=function(e,t,n,i){if(n)return this._decorationsTree1.search(e,t,i);var r=this._decorationsTree0.search(e,t,i),o=this._decorationsTree1.search(e,t,i);return r.concat(o)},e.prototype.collectNodesFromOwner=function(e){var t=this._decorationsTree0.collectNodesFromOwner(e),n=this._decorationsTree1.collectNodesFromOwner(e);return t.concat(n)},e.prototype.collectNodesPostOrder=function(){var e=this._decorationsTree0.collectNodesPostOrder(),t=this._decorationsTree1.collectNodesPostOrder();return e.concat(t)},e.prototype.insert=function(e){S(e)?this._decorationsTree1.insert(e):this._decorationsTree0.insert(e)},e.prototype.delete=function(e){S(e)?this._decorationsTree1.delete(e):this._decorationsTree0.delete(e)},e.prototype.resolveNode=function(e,t){S(e)?this._decorationsTree1.resolveNode(e,t):this._decorationsTree0.resolveNode(e,t)},e.prototype.acceptReplace=function(e,t,n,i){this._decorationsTree0.acceptReplace(e,t,n,i),this._decorationsTree1.acceptReplace(e,t,n,i)},e}();function He(e){return e.replace(/[^a-z0-9\-_]/gi," ")}var Ge=function(e){this.color=e.color||"",this.darkColor=e.darkColor||""},Ye=function(e){function t(t){var n=e.call(this,t)||this;return n._resolvedColor=null,n.position="number"===typeof t.position?t.position:c.d.Center,n}return Fe(t,e),t.prototype.getColor=function(e){return this._resolvedColor||("light"!==e.type&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor},t.prototype.invalidateCachedColor=function(){this._resolvedColor=null},t.prototype._resolveColor=function(e,t){if("string"===typeof e)return e;var n=e?t.getColor(e.id):null;return n?n.toString():""},t}(Ge),$e=function(e){function t(t){var n=e.call(this,t)||this;return n.position=t.position,n}return Fe(t,e),t.prototype.getColor=function(e){return this._resolvedColor||("light"!==e.type&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor},t.prototype.invalidateCachedColor=function(){this._resolvedColor=void 0},t.prototype._resolveColor=function(e,t){return"string"===typeof e?Be.a.fromHex(e):t.getColor(e.id)},t}(Ge),Je=function(){function e(e){this.stickiness=e.stickiness||0,this.zIndex=e.zIndex||0,this.className=e.className?He(e.className):null,this.hoverMessage=Object(ze.o)(e.hoverMessage),this.glyphMarginHoverMessage=Object(ze.o)(e.glyphMarginHoverMessage),this.isWholeLine=e.isWholeLine||!1,this.showIfCollapsed=e.showIfCollapsed||!1,this.collapseOnReplaceEdit=e.collapseOnReplaceEdit||!1,this.overviewRuler=e.overviewRuler?new Ye(e.overviewRuler):null,this.minimap=e.minimap?new $e(e.minimap):null,this.glyphMarginClassName=e.glyphMarginClassName?He(e.glyphMarginClassName):null,this.linesDecorationsClassName=e.linesDecorationsClassName?He(e.linesDecorationsClassName):null,this.marginClassName=e.marginClassName?He(e.marginClassName):null,this.inlineClassName=e.inlineClassName?He(e.inlineClassName):null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.beforeContentClassName=e.beforeContentClassName?He(e.beforeContentClassName):null,this.afterContentClassName=e.afterContentClassName?He(e.afterContentClassName):null}return e.register=function(t){return new e(t)},e.createDynamic=function(t){return new e(t)},e}();Je.EMPTY=Je.register({});var Ze=[Je.register({stickiness:0}),Je.register({stickiness:1}),Je.register({stickiness:2}),Je.register({stickiness:3})];function Qe(e){return e instanceof Je?e:Je.createDynamic(e)}var Ke=function(e){function t(){var t=e.call(this)||this;return t._actual=t._register(new r.a),t.event=t._actual.event,t._deferredCnt=0,t._shouldFire=!1,t}return Fe(t,e),t.prototype.beginDeferredEmit=function(){this._deferredCnt++},t.prototype.endDeferredEmit=function(){this._deferredCnt--,0===this._deferredCnt&&this._shouldFire&&(this._shouldFire=!1,this._actual.fire({}))},t.prototype.fire=function(){this._shouldFire=!0},t}(o.a),Xe=function(e){function t(){var t=e.call(this)||this;return t._fastEmitter=t._register(new r.a),t.fastEvent=t._fastEmitter.event,t._slowEmitter=t._register(new r.a),t.slowEvent=t._slowEmitter.event,t._deferredCnt=0,t._deferredEvent=null,t}return Fe(t,e),t.prototype.beginDeferredEmit=function(){this._deferredCnt++},t.prototype.endDeferredEmit=function(){if(this._deferredCnt--,0===this._deferredCnt&&null!==this._deferredEvent){var e=this._deferredEvent;this._deferredEvent=null,this._fastEmitter.fire(e),this._slowEmitter.fire(e)}},t.prototype.fire=function(e){this._deferredCnt>0?this._deferredEvent?this._deferredEvent=this._deferredEvent.merge(e):this._deferredEvent=e:(this._fastEmitter.fire(e),this._slowEmitter.fire(e))},t}(o.a)},56:function(e,t,n){"use strict";var i,r;n.d(t,"d",(function(){return i})),n.d(t,"c",(function(){return r})),n.d(t,"e",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return a})),function(e){e[e.Left=1]="Left",e[e.Center=2]="Center",e[e.Right=4]="Right",e[e.Full=7]="Full"}(i||(i={})),function(e){e[e.Inline=1]="Inline",e[e.Gutter=2]="Gutter"}(r||(r={}));var o=function(){function e(e){this.tabSize=Math.max(1,0|e.tabSize),this.indentSize=0|e.tabSize,this.insertSpaces=Boolean(e.insertSpaces),this.defaultEOL=0|e.defaultEOL,this.trimAutoWhitespace=Boolean(e.trimAutoWhitespace)}return e.prototype.equals=function(e){return this.tabSize===e.tabSize&&this.indentSize===e.indentSize&&this.insertSpaces===e.insertSpaces&&this.defaultEOL===e.defaultEOL&&this.trimAutoWhitespace===e.trimAutoWhitespace},e.prototype.createChangeEvent=function(e){return{tabSize:this.tabSize!==e.tabSize,indentSize:this.indentSize!==e.indentSize,insertSpaces:this.insertSpaces!==e.insertSpaces,trimAutoWhitespace:this.trimAutoWhitespace!==e.trimAutoWhitespace}},e}(),s=function(e,t){this.range=e,this.matches=t},a=function(e,t,n){this.reverseEdits=e,this.changes=t,this.trimAutoWhitespaceLineNumbers=n}},563:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n(10),r=n(237),o=function(){function e(e,t,n,i){this._uri=e,this._lines=t,this._eol=n,this._versionId=i,this._lineStarts=null}return e.prototype.dispose=function(){this._lines.length=0},e.prototype.getText=function(){return this._lines.join(this._eol)},e.prototype.onEvents=function(e){e.eol&&e.eol!==this._eol&&(this._eol=e.eol,this._lineStarts=null);for(var t=0,n=e.changes;t<n.length;t++){var r=n[t];this._acceptDeleteRange(r.range),this._acceptInsertText(new i.a(r.range.startLineNumber,r.range.startColumn),r.text)}this._versionId=e.versionId},e.prototype._ensureLineStarts=function(){if(!this._lineStarts){for(var e=this._eol.length,t=this._lines.length,n=new Uint32Array(t),i=0;i<t;i++)n[i]=this._lines[i].length+e;this._lineStarts=new r.a(n)}},e.prototype._setLineText=function(e,t){this._lines[e]=t,this._lineStarts&&this._lineStarts.changeValue(e,this._lines[e].length+this._eol.length)},e.prototype._acceptDeleteRange=function(e){if(e.startLineNumber!==e.endLineNumber)this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.endLineNumber-1].substring(e.endColumn-1)),this._lines.splice(e.startLineNumber,e.endLineNumber-e.startLineNumber),this._lineStarts&&this._lineStarts.removeValues(e.startLineNumber,e.endLineNumber-e.startLineNumber);else{if(e.startColumn===e.endColumn)return;this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.startLineNumber-1].substring(e.endColumn-1))}},e.prototype._acceptInsertText=function(e,t){if(0!==t.length){var n=t.split(/\r\n|\r|\n/);if(1!==n.length){n[n.length-1]+=this._lines[e.lineNumber-1].substring(e.column-1),this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+n[0]);for(var i=new Uint32Array(n.length-1),r=1;r<n.length;r++)this._lines.splice(e.lineNumber+r-1,0,n[r]),i[r-1]=n[r].length+this._eol.length;this._lineStarts&&this._lineStarts.insertValues(e.lineNumber,i)}else this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+n[0]+this._lines[e.lineNumber-1].substring(e.column-1))}},e}()}}]);
//# sourceMappingURL=32.243ace61.chunk.js.map